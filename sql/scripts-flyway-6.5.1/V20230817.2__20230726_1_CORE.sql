


-- Parche_NUAILOS_99

-- Parche_NUAILOS_99

-- create copy table from BITACORA_QUEUEMANAGER to BITACORA_QUEUEMANAGER_COPY
SELECT * INTO BITACORA_QUEUEMANAGER_COPY FROM BITACORA_QUEUEMANAGER WHERE 1 = 0;

INSERT INTO BITACORA_QUEUEMANAGER_COPY SELECT * FROM BITACORA_QUEUEMANAGER;

-- Add primary key to BITACORA_QUEUEMANAGER_COPY
ALTER TABLE BITACORA_QUEUEMANAGER_COPY ADD TRANSACTION_ID_STEP NUMERIC(3,0) NOT NULL DEFAULT 0;

ALTER TABLE BITACORA_QUEUEMANAGER_COPY ADD CONSTRAINT PK_BITACORA_QUEUEMANAGER PRIMARY KEY (TRANSACTION_ID, TRANSACTION_ID_STEP);

-- Rename BITACORA_QUEUEMANAGER to BITACORA_QUEUEMANAGER_BK
EXEC sp_rename 'BITACORA_QUEUEMANAGER', 'BITACORA_QUEUEMANAGER_BK';

-- Rename BITACORA_QUEUEMANAGER_COPY to BITACORA_QUEUEMANAGER
EXEC sp_rename 'BITACORA_QUEUEMANAGER_COPY', 'BITACORA_QUEUEMANAGER';




INSERT INTO BITACORA_HM (ACTUALIZACION,FECHA_APLICADO,TIPO_ACTUALIZACION,ESTADO,SCRIPT_SQL,SCRIPT_SQL_UNDO,ULT_SENTENCIA_OK)  VALUES ('20230726_1',NULL,'MANUAL','NO_DEFINIDO','CgoNCi0tIFBhcmNoZV9OVUFJTE9TXzk5Cg0KLS0gUGFyY2hlX05VQUlMT1NfOTkKDQotLSBjcmVh
dGUgY29weSB0YWJsZSBmcm9tIEJJVEFDT1JBX1FVRVVFTUFOQUdFUiB0byBCSVRBQ09SQV9RVUVV
RU1BTkFHRVJfQ09QWQ0KU0VMRUNUICogSU5UTyBCSVRBQ09SQV9RVUVVRU1BTkFHRVJfQ09QWSBG
Uk9NIEJJVEFDT1JBX1FVRVVFTUFOQUdFUiBXSEVSRSAxID0gMDsKCklOU0VSVCBJTlRPIEJJVEFD
T1JBX1FVRVVFTUFOQUdFUl9DT1BZIFNFTEVDVCAqIEZST00gQklUQUNPUkFfUVVFVUVNQU5BR0VS
OwoNCi0tIEFkZCBwcmltYXJ5IGtleSB0byBCSVRBQ09SQV9RVUVVRU1BTkFHRVJfQ09QWQ0KQUxU
RVIgVEFCTEUgQklUQUNPUkFfUVVFVUVNQU5BR0VSX0NPUFkgQUREIFRSQU5TQUNUSU9OX0lEX1NU
RVAgTlVNRVJJQygzLDApIE5PVCBOVUxMIERFRkFVTFQgMDsKCkFMVEVSIFRBQkxFIEJJVEFDT1JB
X1FVRVVFTUFOQUdFUl9DT1BZIEFERCBDT05TVFJBSU5UIFBLX0JJVEFDT1JBX1FVRVVFTUFOQUdF
UiBQUklNQVJZIEtFWSAoVFJBTlNBQ1RJT05fSUQsIFRSQU5TQUNUSU9OX0lEX1NURVApOwoNCi0t
IFJlbmFtZSBCSVRBQ09SQV9RVUVVRU1BTkFHRVIgdG8gQklUQUNPUkFfUVVFVUVNQU5BR0VSX0JL
DQpFWEVDIHNwX3JlbmFtZSAnQklUQUNPUkFfUVVFVUVNQU5BR0VSJywgJ0JJVEFDT1JBX1FVRVVF
TUFOQUdFUl9CSyc7Cg0KLS0gUmVuYW1lIEJJVEFDT1JBX1FVRVVFTUFOQUdFUl9DT1BZIHRvIEJJ
VEFDT1JBX1FVRVVFTUFOQUdFUg0KRVhFQyBzcF9yZW5hbWUgJ0JJVEFDT1JBX1FVRVVFTUFOQUdF
Ul9DT1BZJywgJ0JJVEFDT1JBX1FVRVVFTUFOQUdFUic7Cg0KCgoNCg==', NULL, 0);
