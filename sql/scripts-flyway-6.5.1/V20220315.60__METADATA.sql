EXECUTE('
ALTER TABLE CHE_SOLICITUD_CANJE_INTERNO ADD SUCURSAL_INGRESO NUMERIC(5)

INSERT INTO dbo.DICCIONARIO (NUMERODECAMPO, USODELCAMPO, REFERENCIA, DESCRIPCION, PROMPT, LARGO, TIPODECAMPO, DECIMALES, EDICION, CONTABILIZA, CONCEPTO, CALCULO, VALIDACION, TABLADEVALIDACION, TABLADEAYUDA, OPCIONES, TABLA, CAMPO, BASICO, MASCARA)
VALUES (35545, '' '', 0, ''Sucursal ingreso'', ''Sucursal ingreso'', 5, ''N'', 0, NULL, 0, 0, 0, 0, 0, 0, 0, 3501, ''SUCURSAL_INGRESO'', 0, NULL)
')

EXECUTE('
IF OBJECT_ID (''dbo.VW_CHE_SOLICITUD_CANJE_INTERNO'') IS NOT NULL
	DROP VIEW dbo.VW_CHE_SOLICITUD_CANJE_INTERNO
')

EXECUTE('
CREATE   VIEW [dbo].[VW_CHE_SOLICITUD_CANJE_INTERNO]
									(NRO_SOLICITUD, 
									NRO_CHEQUE, 
									IMPORTE, 
									ESTADO,
									DESCRIPCION_ESTADO, 
									FECHA_ESTADO, 
									SUCURSAL, 
									CUENTA, 
									DENOMINACION_CUENTA, 
									PRODUCTO, 
									DESCRIPCION_PRODUCTO, 
									MONEDA, 
									DENOM_CTA_DEPOSITO, 
									OPERATIVA,
									DESCRIPCION_OPERATIVA,
									USUARIO,
									ASIENTO,
									FECHA_ASIENTO,
									SUCURSAL_ASIENTO,
									SUCURSAL_INGRESO)
							AS
SELECT C.NRO_SOLICITUD, 
		C.NRO_CHEQUE, 
		C.IMPORTE,
		C.ESTADO, 
		OE.DESCRIPCION, 
		C.FECHA_ESTADO, 
		S.SUCURSAL, 
		S.CUENTA, 
		V.NOMBRE_CUENTA, 
		S.PRODUCTO, 
		P.C6251, 
		S.MONEDA, 
		V2.NOMBRE_CUENTA,
		C.OPERATIVA, 
		OO.DESCRIPCION,
		C.USUARIO,
		C.ASIENTO,
		C.FECHA_ASIENTO,
		C.SUCURSAL_ASIENTO,
		C.SUCURSAL_INGRESO
FROM CHE_SOLICITUD_CANJE_INTERNO AS C WITH (nolock)
INNER JOIN SALDOS AS S WITH (nolock) ON C.SALDO_JTS_OID = S.JTS_OID 
									AND S.TZ_LOCK = 0
INNER JOIN OPCIONES AS OE WITH (nolock) ON C.ESTADO = OE.OPCIONINTERNA 
									AND OE.NUMERODECAMPO = 35017 
									AND OE.IDIOMA = ''E''
LEFT JOIN VTA_SALDOS AS V WITH (nolock) ON S.JTS_OID = V.JTS_OID_SALDO 
									AND V.TZ_LOCK = 0
LEFT JOIN PRODUCTOS AS P WITH (nolock) ON S.PRODUCTO = P.C6250 
									AND P.TZ_LOCK = 0
LEFT JOIN CLI_CLIENTES AS L WITH (nolock) ON S.C1803 = L.CODIGOCLIENTE 
									AND L.TZ_LOCK = 0
LEFT JOIN CLI_CLIENTEPERSONA AS CP WITH (nolock) ON L.CODIGOCLIENTE = CP.CODIGOCLIENTE 
									AND CP.TITULARIDAD = ''T'' 
									AND CP.TZ_LOCK = 0
LEFT JOIN CLI_DocumentosPFPJ AS D WITH (nolock) ON CP.NUMEROPERSONA = D.NUMEROPERSONAFJ 
									AND D.TZ_LOCK = 0
LEFT JOIN VTA_SALDOS AS V2 WITH (nolock) ON C.JTS_OID_DEPOSITO = V2.JTS_OID_SALDO 
									AND V2.TZ_LOCK = 0
LEFT JOIN OPCIONES AS OO WITH (nolock) ON C.OPERATIVA = OO.OPCIONINTERNA 
									AND OO.NUMERODECAMPO = 35024 
									AND OO.IDIOMA = ''E''
WHERE C.TZ_LOCK = 0
')

EXECUTE('
INSERT INTO dbo.DICCIONARIO (NUMERODECAMPO, USODELCAMPO, REFERENCIA, DESCRIPCION, PROMPT, LARGO, TIPODECAMPO, DECIMALES, EDICION, CONTABILIZA, CONCEPTO, CALCULO, VALIDACION, TABLADEVALIDACION, TABLADEAYUDA, OPCIONES, TABLA, CAMPO, BASICO, MASCARA)
VALUES (35546, '' '', 0, ''Sucursal de Ingreso'', ''Sucursal de Ingreso'', 5, ''N'', 0, NULL, 0, 0, 0, 0, 0, 0, 0, 3505, ''SUCURSAL_INGRESO'', 0, NULL)

UPDATE dbo.AYUDAS
SET CAMPOS = ''35050ROA2;35025OA1;35051;35052;35053;35054;35055;35056;35057;35058;35059;35063;35064;35338;35546;''
WHERE NUMERODEAYUDA = 35051
')
