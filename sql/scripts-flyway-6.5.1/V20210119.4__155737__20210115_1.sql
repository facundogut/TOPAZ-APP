


-- Parche_NUNBCHACO_244

-- 
-- HM begin sentence
IF NOT EXISTS (
SELECT *
FROM information_schema.columns
WHERE table_name='SALDOS'
AND column_name='OBJETIVA_REFINANCIADO')
BEGIN
ALTER TABLE SALDOS ADD  OBJETIVA_REFINANCIADO VARCHAR (2);

END
-- HM end sentence;

-- 
-- HM begin sentence
IF NOT EXISTS (
SELECT *
FROM information_schema.columns
WHERE table_name='CLI_CLIENTES'
AND column_name='OBJETIVA_REFINANCIADO')
BEGIN
ALTER TABLE CLI_CLIENTES ADD  OBJETIVA_REFINANCIADO VARCHAR (2);

END
-- HM end sentence;

-- 
-- HM begin sentence
IF NOT EXISTS (
SELECT *
FROM information_schema.columns
WHERE table_name='CLI_CLAOBJATRASO_REF')
BEGIN
CREATE TABLE CLI_CLAOBJATRASO_REF
(
TZ_LOCK     NUMERIC (15) DEFAULT ((0)),
MODALIDAD   VARCHAR (1) DEFAULT (' ') NOT NULL,
DESCRIPCION VARCHAR (35) DEFAULT (' '),
CATEGORIA_ORIGEN VARCHAR (2) DEFAULT ((0)) NOT NULL,
CUOTAS_CANCELADAS NUMERIC (4) DEFAULT ((0)) ,
DIAS_CLASIFICACION   NUMERIC (4) DEFAULT ((0)),
PORCENTAJE_CANCELADO_CAPITAL NUMERIC (15, 2) DEFAULT ((0)),
CONSTRAINT PK_CLI_CLAOBJATRASO_REF PRIMARY KEY (MODALIDAD, CATEGORIA_ORIGEN)
)
END
-- HM end sentence;

-- Depura e Inserta registros en PARAMETROS_JTS
INSERT INTO CLI_CLAOBJATRASO_REF (TZ_LOCK, MODALIDAD, DESCRIPCION, CATEGORIA_ORIGEN, CUOTAS_CANCELADAS, DIAS_CLASIFICACION, PORCENTAJE_CANCELADO_CAPITAL)
VALUES (0, 'C', 'Consumo Sit. 2 a 1',	    '2',	1,	 32,	 5);

INSERT INTO CLI_CLAOBJATRASO_REF (TZ_LOCK, MODALIDAD, DESCRIPCION, CATEGORIA_ORIGEN, CUOTAS_CANCELADAS, DIAS_CLASIFICACION, PORCENTAJE_CANCELADO_CAPITAL)
VALUES (0, 'C', 'Consumo Sit. 3 a 2',	    '3',	2,	 91,	 5);

INSERT INTO CLI_CLAOBJATRASO_REF (TZ_LOCK, MODALIDAD, DESCRIPCION, CATEGORIA_ORIGEN, CUOTAS_CANCELADAS, DIAS_CLASIFICACION, PORCENTAJE_CANCELADO_CAPITAL)
VALUES (0, 'C', 'Consumo Sit. 4 a 3',	    '4',	3,	181,	10);

INSERT INTO CLI_CLAOBJATRASO_REF (TZ_LOCK, MODALIDAD, DESCRIPCION, CATEGORIA_ORIGEN, CUOTAS_CANCELADAS, DIAS_CLASIFICACION, PORCENTAJE_CANCELADO_CAPITAL)
VALUES (0, 'C', 'Consumo Sit. 5 a 4',	    '5',	3,	  0,	15);

INSERT INTO CLI_CLAOBJATRASO_REF (TZ_LOCK, MODALIDAD, DESCRIPCION, CATEGORIA_ORIGEN, CUOTAS_CANCELADAS, DIAS_CLASIFICACION, PORCENTAJE_CANCELADO_CAPITAL)
VALUES (0, 'M', 'Comercial Sit. 2 a 1',	'2',	1,	  0,	 0);

INSERT INTO CLI_CLAOBJATRASO_REF (TZ_LOCK, MODALIDAD, DESCRIPCION, CATEGORIA_ORIGEN, CUOTAS_CANCELADAS, DIAS_CLASIFICACION, PORCENTAJE_CANCELADO_CAPITAL)
VALUES (0, 'M', 'Comercial Sit. 3 a 2',	'3',	2,	  0,	 5);

INSERT INTO CLI_CLAOBJATRASO_REF (TZ_LOCK, MODALIDAD, DESCRIPCION, CATEGORIA_ORIGEN, CUOTAS_CANCELADAS, DIAS_CLASIFICACION, PORCENTAJE_CANCELADO_CAPITAL)
VALUES (0, 'M', 'Comercial Sit. 4 a 3',	'4',	3,	  0,	10);

INSERT INTO CLI_CLAOBJATRASO_REF (TZ_LOCK, MODALIDAD, DESCRIPCION, CATEGORIA_ORIGEN, CUOTAS_CANCELADAS, DIAS_CLASIFICACION, PORCENTAJE_CANCELADO_CAPITAL)
VALUES (0, 'M', 'Comercial Sit. 5 a 4',	'5',	3,	  0,	15);

-- Depura e Inserta registros en PARAMETROS_JTS
INSERT INTO PARAMETROS_JTS (FUNCIONALIDAD, PARAMETRO, VALOR, TZ_LOCK)
VALUES ('CALIFICACION_DEUDA_REFINANCIADA', 'CANAL', '0', 0);

INSERT INTO PARAMETROS_JTS (FUNCIONALIDAD, PARAMETRO, VALOR, TZ_LOCK)
VALUES ('CALIFICACION_DEUDA_REFINANCIADA', 'DESCRIPCION', 'Historico de calificacion objetiva de deuda refinanciada', 0);

INSERT INTO PARAMETROS_JTS (FUNCIONALIDAD, PARAMETRO, VALOR, TZ_LOCK)
VALUES ('CALIFICACION_DEUDA_REFINANCIADA', 'OPERACION', '8701', 0);

INSERT INTO PARAMETROS_JTS (FUNCIONALIDAD, PARAMETRO, VALOR, TZ_LOCK)
VALUES ('CALIFICACION_DEUDA_REFINANCIADA', 'DIAS_ALTA_CREDITO_ADICIONAL', '0', 0)

INSERT INTO PARAMETROS_JTS (FUNCIONALIDAD, PARAMETRO, VALOR, TZ_LOCK)
VALUES ('CALIFICACION_DEUDA_REFINANCIADA', 'MAYOR_DIAS_ATRASO_CONCURSO','0', 0)

INSERT INTO PARAMETROS_JTS (FUNCIONALIDAD, PARAMETRO, VALOR, TZ_LOCK)
VALUES ('CALIFICACION_DEUDA_REFINANCIADA', 'MENOR_DIAS_ATRASO', '0', 0)

INSERT INTO PARAMETROS_JTS (FUNCIONALIDAD, PARAMETRO, VALOR, TZ_LOCK)
VALUES ('CALIFICACION_DEUDA_REFINANCIADA', 'PONDERACION_CONCURSO', '4', 0)

INSERT INTO OPERACIONES (TITULO, IDENTIFICACION, NOMBRE, DESCRIPCION, MNEMOTECNICO, AUTORIZACION, FORMULARIOPRINCIPAL, PROXOPERACION, ESTADO, TZ_LOCK, COPIAS, SUBOPERACION, PERMITEBAJA, COMPORTAMIENTOENCIERRE, REQUIERECONTRASENA, PERMITECONCURRENTE, PERMITEESTADODIFERIDO)
VALUES ('8600' , '8701', 'Calif Ob Refinanciado', 'Calif Refin', '8701', 'N', NULL, NULL, 'P', 0, NULL, 0, 'S', 'N', 'N', 'S', 'S');




INSERT INTO BITACORA_HM (ACTUALIZACION,FECHA_APLICADO,TIPO_ACTUALIZACION,ESTADO,SCRIPT_SQL,SCRIPT_SQL_UNDO,ULT_SENTENCIA_OK)  VALUES ('20210115_1',NULL,'MANUAL','NO_DEFINIDO','CgoNCi0tIFBhcmNoZV9OVU5CQ0hBQ09fMjQ0Cg0KLS0gDQotLSBITSBiZWdpbiBzZW50ZW5jZQpJ
RiBOT1QgRVhJU1RTICgKU0VMRUNUICoKRlJPTSBpbmZvcm1hdGlvbl9zY2hlbWEuY29sdW1ucwpX
SEVSRSB0YWJsZV9uYW1lPSdTQUxET1MnCkFORCBjb2x1bW5fbmFtZT0nT0JKRVRJVkFfUkVGSU5B
TkNJQURPJykKQkVHSU4KQUxURVIgVEFCTEUgU0FMRE9TIEFERCAgT0JKRVRJVkFfUkVGSU5BTkNJ
QURPIFZBUkNIQVIgKDIpOwoKRU5ECi0tIEhNIGVuZCBzZW50ZW5jZTsKDQotLSANCi0tIEhNIGJl
Z2luIHNlbnRlbmNlCklGIE5PVCBFWElTVFMgKApTRUxFQ1QgKgpGUk9NIGluZm9ybWF0aW9uX3Nj
aGVtYS5jb2x1bW5zCldIRVJFIHRhYmxlX25hbWU9J0NMSV9DTElFTlRFUycKQU5EIGNvbHVtbl9u
YW1lPSdPQkpFVElWQV9SRUZJTkFOQ0lBRE8nKQpCRUdJTgpBTFRFUiBUQUJMRSBDTElfQ0xJRU5U
RVMgQUREICBPQkpFVElWQV9SRUZJTkFOQ0lBRE8gVkFSQ0hBUiAoMik7CgpFTkQKLS0gSE0gZW5k
IHNlbnRlbmNlOwoNCi0tIA0KLS0gSE0gYmVnaW4gc2VudGVuY2UKSUYgTk9UIEVYSVNUUyAoClNF
TEVDVCAqCkZST00gaW5mb3JtYXRpb25fc2NoZW1hLmNvbHVtbnMKV0hFUkUgdGFibGVfbmFtZT0n
Q0xJX0NMQU9CSkFUUkFTT19SRUYnKQpCRUdJTgpDUkVBVEUgVEFCTEUgQ0xJX0NMQU9CSkFUUkFT
T19SRUYKKApUWl9MT0NLICAgICBOVU1FUklDICgxNSkgREVGQVVMVCAoKDApKSwKTU9EQUxJREFE
ICAgVkFSQ0hBUiAoMSkgREVGQVVMVCAoJyAnKSBOT1QgTlVMTCwKREVTQ1JJUENJT04gVkFSQ0hB
UiAoMzUpIERFRkFVTFQgKCcgJyksCkNBVEVHT1JJQV9PUklHRU4gVkFSQ0hBUiAoMikgREVGQVVM
VCAoKDApKSBOT1QgTlVMTCwKQ1VPVEFTX0NBTkNFTEFEQVMgTlVNRVJJQyAoNCkgREVGQVVMVCAo
KDApKSAsCkRJQVNfQ0xBU0lGSUNBQ0lPTiAgIE5VTUVSSUMgKDQpIERFRkFVTFQgKCgwKSksClBP
UkNFTlRBSkVfQ0FOQ0VMQURPX0NBUElUQUwgTlVNRVJJQyAoMTUsIDIpIERFRkFVTFQgKCgwKSks
CkNPTlNUUkFJTlQgUEtfQ0xJX0NMQU9CSkFUUkFTT19SRUYgUFJJTUFSWSBLRVkgKE1PREFMSURB
RCwgQ0FURUdPUklBX09SSUdFTikKKQpFTkQKLS0gSE0gZW5kIHNlbnRlbmNlOwoNCi0tIERlcHVy
YSBlIEluc2VydGEgcmVnaXN0cm9zIGVuIFBBUkFNRVRST1NfSlRTDQpJTlNFUlQgSU5UTyBDTElf
Q0xBT0JKQVRSQVNPX1JFRiAoVFpfTE9DSywgTU9EQUxJREFELCBERVNDUklQQ0lPTiwgQ0FURUdP
UklBX09SSUdFTiwgQ1VPVEFTX0NBTkNFTEFEQVMsIERJQVNfQ0xBU0lGSUNBQ0lPTiwgUE9SQ0VO
VEFKRV9DQU5DRUxBRE9fQ0FQSVRBTCkKVkFMVUVTICgwLCAnQycsICdDb25zdW1vIFNpdC4gMiBh
IDEnLAkgICAgJzInLAkxLAkgMzIsCSA1KTsKCklOU0VSVCBJTlRPIENMSV9DTEFPQkpBVFJBU09f
UkVGIChUWl9MT0NLLCBNT0RBTElEQUQsIERFU0NSSVBDSU9OLCBDQVRFR09SSUFfT1JJR0VOLCBD
VU9UQVNfQ0FOQ0VMQURBUywgRElBU19DTEFTSUZJQ0FDSU9OLCBQT1JDRU5UQUpFX0NBTkNFTEFE
T19DQVBJVEFMKQpWQUxVRVMgKDAsICdDJywgJ0NvbnN1bW8gU2l0LiAzIGEgMicsCSAgICAnMycs
CTIsCSA5MSwJIDUpOwoKSU5TRVJUIElOVE8gQ0xJX0NMQU9CSkFUUkFTT19SRUYgKFRaX0xPQ0ss
IE1PREFMSURBRCwgREVTQ1JJUENJT04sIENBVEVHT1JJQV9PUklHRU4sIENVT1RBU19DQU5DRUxB
REFTLCBESUFTX0NMQVNJRklDQUNJT04sIFBPUkNFTlRBSkVfQ0FOQ0VMQURPX0NBUElUQUwpClZB
TFVFUyAoMCwgJ0MnLCAnQ29uc3VtbyBTaXQuIDQgYSAzJywJICAgICc0JywJMywJMTgxLAkxMCk7
CgpJTlNFUlQgSU5UTyBDTElfQ0xBT0JKQVRSQVNPX1JFRiAoVFpfTE9DSywgTU9EQUxJREFELCBE
RVNDUklQQ0lPTiwgQ0FURUdPUklBX09SSUdFTiwgQ1VPVEFTX0NBTkNFTEFEQVMsIERJQVNfQ0xB
U0lGSUNBQ0lPTiwgUE9SQ0VOVEFKRV9DQU5DRUxBRE9fQ0FQSVRBTCkKVkFMVUVTICgwLCAnQycs
ICdDb25zdW1vIFNpdC4gNSBhIDQnLAkgICAgJzUnLAkzLAkgIDAsCTE1KTsKCklOU0VSVCBJTlRP
IENMSV9DTEFPQkpBVFJBU09fUkVGIChUWl9MT0NLLCBNT0RBTElEQUQsIERFU0NSSVBDSU9OLCBD
QVRFR09SSUFfT1JJR0VOLCBDVU9UQVNfQ0FOQ0VMQURBUywgRElBU19DTEFTSUZJQ0FDSU9OLCBQ
T1JDRU5UQUpFX0NBTkNFTEFET19DQVBJVEFMKQpWQUxVRVMgKDAsICdNJywgJ0NvbWVyY2lhbCBT
aXQuIDIgYSAxJywJJzInLAkxLAkgIDAsCSAwKTsKCklOU0VSVCBJTlRPIENMSV9DTEFPQkpBVFJB
U09fUkVGIChUWl9MT0NLLCBNT0RBTElEQUQsIERFU0NSSVBDSU9OLCBDQVRFR09SSUFfT1JJR0VO
LCBDVU9UQVNfQ0FOQ0VMQURBUywgRElBU19DTEFTSUZJQ0FDSU9OLCBQT1JDRU5UQUpFX0NBTkNF
TEFET19DQVBJVEFMKQpWQUxVRVMgKDAsICdNJywgJ0NvbWVyY2lhbCBTaXQuIDMgYSAyJywJJzMn
LAkyLAkgIDAsCSA1KTsKCklOU0VSVCBJTlRPIENMSV9DTEFPQkpBVFJBU09fUkVGIChUWl9MT0NL
LCBNT0RBTElEQUQsIERFU0NSSVBDSU9OLCBDQVRFR09SSUFfT1JJR0VOLCBDVU9UQVNfQ0FOQ0VM
QURBUywgRElBU19DTEFTSUZJQ0FDSU9OLCBQT1JDRU5UQUpFX0NBTkNFTEFET19DQVBJVEFMKQpW
QUxVRVMgKDAsICdNJywgJ0NvbWVyY2lhbCBTaXQuIDQgYSAzJywJJzQnLAkzLAkgIDAsCTEwKTsK
CklOU0VSVCBJTlRPIENMSV9DTEFPQkpBVFJBU09fUkVGIChUWl9MT0NLLCBNT0RBTElEQUQsIERF
U0NSSVBDSU9OLCBDQVRFR09SSUFfT1JJR0VOLCBDVU9UQVNfQ0FOQ0VMQURBUywgRElBU19DTEFT
SUZJQ0FDSU9OLCBQT1JDRU5UQUpFX0NBTkNFTEFET19DQVBJVEFMKQpWQUxVRVMgKDAsICdNJywg
J0NvbWVyY2lhbCBTaXQuIDUgYSA0JywJJzUnLAkzLAkgIDAsCTE1KTsKDQotLSBEZXB1cmEgZSBJ
bnNlcnRhIHJlZ2lzdHJvcyBlbiBQQVJBTUVUUk9TX0pUUw0KSU5TRVJUIElOVE8gUEFSQU1FVFJP
U19KVFMgKEZVTkNJT05BTElEQUQsIFBBUkFNRVRSTywgVkFMT1IsIFRaX0xPQ0spClZBTFVFUyAo
J0NBTElGSUNBQ0lPTl9ERVVEQV9SRUZJTkFOQ0lBREEnLCAnQ0FOQUwnLCAnMCcsIDApOwoKSU5T
RVJUIElOVE8gUEFSQU1FVFJPU19KVFMgKEZVTkNJT05BTElEQUQsIFBBUkFNRVRSTywgVkFMT1Is
IFRaX0xPQ0spClZBTFVFUyAoJ0NBTElGSUNBQ0lPTl9ERVVEQV9SRUZJTkFOQ0lBREEnLCAnREVT
Q1JJUENJT04nLCAnSGlzdG9yaWNvIGRlIGNhbGlmaWNhY2lvbiBvYmpldGl2YSBkZSBkZXVkYSBy
ZWZpbmFuY2lhZGEnLCAwKTsKCklOU0VSVCBJTlRPIFBBUkFNRVRST1NfSlRTIChGVU5DSU9OQUxJ
REFELCBQQVJBTUVUUk8sIFZBTE9SLCBUWl9MT0NLKQpWQUxVRVMgKCdDQUxJRklDQUNJT05fREVV
REFfUkVGSU5BTkNJQURBJywgJ09QRVJBQ0lPTicsICc4NzAxJywgMCk7CgpJTlNFUlQgSU5UTyBQ
QVJBTUVUUk9TX0pUUyAoRlVOQ0lPTkFMSURBRCwgUEFSQU1FVFJPLCBWQUxPUiwgVFpfTE9DSykK
VkFMVUVTICgnQ0FMSUZJQ0FDSU9OX0RFVURBX1JFRklOQU5DSUFEQScsICdESUFTX0FMVEFfQ1JF
RElUT19BRElDSU9OQUwnLCAnMCcsIDApCgpJTlNFUlQgSU5UTyBQQVJBTUVUUk9TX0pUUyAoRlVO
Q0lPTkFMSURBRCwgUEFSQU1FVFJPLCBWQUxPUiwgVFpfTE9DSykKVkFMVUVTICgnQ0FMSUZJQ0FD
SU9OX0RFVURBX1JFRklOQU5DSUFEQScsICdNQVlPUl9ESUFTX0FUUkFTT19DT05DVVJTTycsJzAn
LCAwKQoKSU5TRVJUIElOVE8gUEFSQU1FVFJPU19KVFMgKEZVTkNJT05BTElEQUQsIFBBUkFNRVRS
TywgVkFMT1IsIFRaX0xPQ0spClZBTFVFUyAoJ0NBTElGSUNBQ0lPTl9ERVVEQV9SRUZJTkFOQ0lB
REEnLCAnTUVOT1JfRElBU19BVFJBU08nLCAnMCcsIDApCgpJTlNFUlQgSU5UTyBQQVJBTUVUUk9T
X0pUUyAoRlVOQ0lPTkFMSURBRCwgUEFSQU1FVFJPLCBWQUxPUiwgVFpfTE9DSykKVkFMVUVTICgn
Q0FMSUZJQ0FDSU9OX0RFVURBX1JFRklOQU5DSUFEQScsICdQT05ERVJBQ0lPTl9DT05DVVJTTycs
ICc0JywgMCkKCklOU0VSVCBJTlRPIFBBUkFNRVRST1NfSlRTIChGVU5DSU9OQUxJREFELCBQQVJB
TUVUUk8sIFZBTE9SLCBUWl9MT0NLKQpWQUxVRVMgKCdDQUxJRklDQUNJT05fREVVREFfUkVGSU5B
TkNJQURBJywgJ01BWU9SX0RJQVNfQVRSQVNPX0NPTkNVUlNPJywgJzg3MDEnLCAwKTsKCklOU0VS
VCBJTlRPIE9QRVJBQ0lPTkVTIChUSVRVTE8sIElERU5USUZJQ0FDSU9OLCBOT01CUkUsIERFU0NS
SVBDSU9OLCBNTkVNT1RFQ05JQ08sIEFVVE9SSVpBQ0lPTiwgRk9STVVMQVJJT1BSSU5DSVBBTCwg
UFJPWE9QRVJBQ0lPTiwgRVNUQURPLCBUWl9MT0NLLCBDT1BJQVMsIFNVQk9QRVJBQ0lPTiwgUEVS
TUlURUJBSkEsIENPTVBPUlRBTUlFTlRPRU5DSUVSUkUsIFJFUVVJRVJFQ09OVFJBU0VOQSwgUEVS
TUlURUNPTkNVUlJFTlRFLCBQRVJNSVRFRVNUQURPRElGRVJJRE8pClZBTFVFUyAoJzg2MDAnICwg
Jzg3MDEnLCAnQ2FsaWYgT2IgUmVmaW5hbmNpYWRvJywgJ0NhbGlmIFJlZmluJywgJzg3MDEnLCAn
TicsIE5VTEwsIE5VTEwsICdQJywgMCwgTlVMTCwgMCwgJ1MnLCAnTicsICdOJywgJ1MnLCAnUycp
OwoNCgoKDQo=', NULL, 0);
