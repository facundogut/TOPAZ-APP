EXECUTE('
ALTER TABLE GRL_EMBARGO DROP CONSTRAINT PK_GRL_EMBARGO_01
ALTER TABLE GRL_EMBARGO ADD CONSTRAINT PK_GRL_EMBARGO_01 PRIMARY KEY (OM,SALDO_JTS_OID)

UPDATE dbo.INDICES
SET CAMPO2 = 34370
WHERE NUMERODEARCHIVO = 3436 AND NUMERODEINDICE = 1
')

EXECUTE('
IF OBJECT_ID (''dbo.VW_GRL_EMBARGOS_CV'') IS NOT NULL
	DROP VIEW dbo.VW_GRL_EMBARGOS_CV
')

EXECUTE('
CREATE VIEW [dbo].[VW_GRL_EMBARGOS_CV] AS
SELECT E.OM AS [Oficios Manuales], E.NumeroOficio AS [Número de oficio], E.AñoExpediente AS [Año de Expediente],
E.NroExpediente AS [Número de Expediente], S.SUCURSAL AS Sucursal, S.MONEDA AS Moneda, 
S.CUENTA AS Cuenta, V.NOMBRE_CUENTA AS [Denominación de la Cuenta], S.PRODUCTO AS Producto, 
P.C6251 AS [Descripción del Producto], S.C1803 AS Cliente
FROM GRL_EMBARGO E WITH(NOLOCK)
INNER JOIN SALDOS S WITH(NOLOCK) ON E.SALDO_JTS_OID = S.JTS_OID
INNER JOIN VTA_SALDOS V WITH(NOLOCK) ON E.SALDO_JTS_OID = V.JTS_OID_SALDO
INNER JOIN PRODUCTOS P WITH(NOLOCK) ON P.C6250 = S.PRODUCTO
WHERE E.TZ_LOCK = 0 AND S.TZ_LOCK = 0 AND V.TZ_LOCK = 0 AND P.TZ_LOCK = 0 AND E.TipoProducto = 1 							   
')

EXECUTE('
INSERT INTO dbo.AYUDAS (NUMERODEARCHIVO, NUMERODEAYUDA, DESCRIPCION, FILTRO, MOSTRARTODOS, CAMPOS, CAMPOSVISTA, BASEVISTA, NOMBREVISTA, AYUDAGRANDE)
VALUES (0, 34361, ''Embargos Cuenta Vista'', '''', 0, ''1097R;565;109;44871;2612R;2614R;2615R;910;2613R;4968;2611;'', ''Oficios Manuales;Número de Oficio;Año de Expediente;Número de Expediente;Sucursal;Moneda;Cuenta;Denominación de la Cuenta;Producto;Descripción del Producto;Cliente;'', ''TOP/CLIENTES'', ''VW_GRL_EMBARGOS_CV'', 0)

UPDATE dbo.DICCIONARIO
SET TABLADEAYUDA = 34361
WHERE NUMERODECAMPO = 34360
')

EXECUTE('
IF OBJECT_ID (''dbo.VW_GRL_EMBARGOS_DPF'') IS NOT NULL
	DROP VIEW dbo.VW_GRL_EMBARGOS_DPF
')

EXECUTE('
CREATE VIEW [dbo].[VW_GRL_EMBARGOS_DPF] AS
SELECT E.OM AS [Oficios Manuales], E.NumeroOficio AS [Número de oficio], E.AñoExpediente AS [Año de Expediente],
E.NroExpediente AS [Número de Expediente], S.SUCURSAL AS Sucursal, S.MONEDA AS Moneda, 
S.CUENTA AS Cuenta, C.NOMBRECLIENTE AS [Nombre], S.PRODUCTO AS Producto, 
P.C6251 AS [Descripción del Producto], S.OPERACION AS Operación, S.ORDINAL AS Ordinal, S.C1803 AS Cliente
FROM GRL_EMBARGO E WITH(NOLOCK)
INNER JOIN SALDOS S WITH(NOLOCK) ON E.SALDO_JTS_OID = S.JTS_OID
INNER JOIN CLI_CLIENTES C WITH(NOLOCK) ON C.CODIGOCLIENTE = S.C1803
INNER JOIN PRODUCTOS P WITH(NOLOCK) ON P.C6250 = S.PRODUCTO
WHERE E.TZ_LOCK = 0 AND S.TZ_LOCK = 0 AND C.TZ_LOCK = 0 AND P.TZ_LOCK = 0 AND E.TipoProducto = 2						   
')

EXECUTE('
INSERT INTO dbo.AYUDAS (NUMERODEARCHIVO, NUMERODEAYUDA, DESCRIPCION, FILTRO, MOSTRARTODOS, CAMPOS, CAMPOSVISTA, BASEVISTA, NOMBREVISTA, AYUDAGRANDE)
VALUES (0, 35660, ''Embargos DPF'', '''', 0, ''1097R;565;109;44871;2612R;2614R;2615R;910;2613R;4968;2616R;432R;2611;'', ''Oficios Manuales;Número de Oficio;Año de Expediente;Número de Expediente;Sucursal;Moneda;Cuenta;Nombre;Producto;Descripción del Producto;Operación;Ordinal;Cliente;'', ''TOP/CLIENTES'', ''VW_GRL_EMBARGOS_DPF'', 0)

INSERT INTO dbo.DICCIONARIO (NUMERODECAMPO, USODELCAMPO, REFERENCIA, DESCRIPCION, PROMPT, LARGO, TIPODECAMPO, DECIMALES, EDICION, CONTABILIZA, CONCEPTO, CALCULO, VALIDACION, TABLADEVALIDACION, TABLADEAYUDA, OPCIONES, TABLA, CAMPO, BASICO, MASCARA)
VALUES (35660, '' '', 0, ''Ayuda embargos'', ''Embargos'', 15, ''N'', 0, NULL, 0, 0, 0, 0, 0, 35660, 0, 0, ''Ayuda embargos'', 0, NULL)
')

