


-- Parche_NUNBCHACO_211

-- tablaBS_COMISIONDESEMBOLSO
CREATE TABLE BS_COMISIONDESEMBOLSO
(
TZ_LOCK             NUMERIC (16) DEFAULT ((0)),
SALDOS_JTS_OID      NUMERIC (10) DEFAULT (NULL) NOT NULL,
NUMERO_CUOTA        NUMERIC (4) DEFAULT ((0)) NOT NULL,
FECHA_VENCIMIENTO   DATETIME DEFAULT (NULL),
CAPITAL_PRESTAMO    NUMERIC (15, 2) DEFAULT ((0)),
INTERES_PRESTAMO    NUMERIC (15, 2) DEFAULT ((0)),
REMANENTE_PRESTAMO  NUMERIC (15, 2) DEFAULT ((0)),
CAPITAL_COMISION    NUMERIC (15, 2) DEFAULT ((0)),
INTERES_COMISION    NUMERIC (15, 2) DEFAULT ((0)),
REMANENTE_COMISION  NUMERIC (15, 2) DEFAULT ((0)),
IMPORTE_COMISION    NUMERIC (15, 2) DEFAULT ((0)),
FECHA_ULT_DEVENGADO DATETIME DEFAULT (NULL),
DEVENGADO           NUMERIC (15, 2) DEFAULT ((0)),
MONEDA_ORIGEN       NUMERIC (5) DEFAULT ((0)),
PRIMARY KEY (SALDOS_JTS_OID, NUMERO_CUOTA)
);

-- Agregar campo a saldos
ALTER TABLE SALDOS ADD ComisDesemMN  NUMERIC (15, 2) DEFAULT ((0)) NOT NULL;

-- Agregar parametros
INSERT INTO dbo.PARAMETROS_JTS (FUNCIONALIDAD, PARAMETRO, VALOR, TZ_LOCK)
VALUES ('CREA_COMISION_DESEMBOLSO', 'CANAL', '0', 0);

INSERT INTO dbo.PARAMETROS_JTS (FUNCIONALIDAD, PARAMETRO, VALOR, TZ_LOCK)
VALUES ('CREA_COMISION_DESEMBOLSO', 'DESCRIPCION', 'Crea Reg BS_COMISIONDESEMBOLSO', 0);

INSERT INTO dbo.PARAMETROS_JTS (FUNCIONALIDAD, PARAMETRO, VALOR, TZ_LOCK)
VALUES ('CREA_COMISION_DESEMBOLSO', 'OPERACION', '31', 0);

-- Sobre la sentencia
INSERT INTO dbo.PARAMETROS_JTS (FUNCIONALIDAD, PARAMETRO, VALOR, TZ_LOCK)
VALUES ('DEVENGAMIENTO_COMISION_DESEMBOLSO', 'CANAL', '1', 0);

INSERT INTO dbo.PARAMETROS_JTS (FUNCIONALIDAD, PARAMETRO, VALOR, TZ_LOCK)
VALUES ('DEVENGAMIENTO_COMISION_DESEMBOLSO', 'DESCRIPCION', 'Dev com desembolso', 0);

INSERT INTO dbo.PARAMETROS_JTS (FUNCIONALIDAD, PARAMETRO, VALOR, TZ_LOCK)
VALUES ('DEVENGAMIENTO_COMISION_DESEMBOLSO', 'OPERACION', '30', 0);

INSERT INTO dbo.PARAMETROS_JTS (FUNCIONALIDAD, PARAMETRO, VALOR, TZ_LOCK)
VALUES ('DEVENGAMIENTO_COMISION_DESEMBOLSO', 'PIVOTE_CONTAB_COMIS_DESEM', '1', 0);

-- Sobre la sentencia
INSERT INTO dbo.OPERACIONES (TITULO, IDENTIFICACION, NOMBRE, DESCRIPCION, MNEMOTECNICO, AUTORIZACION, FORMULARIOPRINCIPAL, PROXOPERACION, ESTADO, TZ_LOCK, COPIAS, SUBOPERACION, PERMITEBAJA, COMPORTAMIENTOENCIERRE, REQUIERECONTRASENA, PERMITECONCURRENTE, PERMITEESTADODIFERIDO, ICONO_TITULO, ESTILO)
VALUES (8600, 30, 'Devengamiento Comision Desembolso', 'Devengamiento Comision Desembolso', '30', 'N', NULL, NULL, 'P', 0, NULL, 0, 'N', 'N', 'N', 'S', 'S', NULL, NULL);

INSERT INTO dbo.OPERACIONES (TITULO, IDENTIFICACION, NOMBRE, DESCRIPCION, MNEMOTECNICO, AUTORIZACION, FORMULARIOPRINCIPAL, PROXOPERACION, ESTADO, TZ_LOCK, COPIAS, SUBOPERACION, PERMITEBAJA, COMPORTAMIENTOENCIERRE, REQUIERECONTRASENA, PERMITECONCURRENTE, PERMITEESTADODIFERIDO, ICONO_TITULO, ESTILO)
VALUES (8600, 31, 'Creacion Comision Desembolso', 'Creacion Comision Desembolso', '31', 'N', NULL, NULL, 'P', 0, NULL, 0, 'N', 'N', 'N', 'S', 'S', NULL, NULL);

-- Sobre la sentencia
INSERT INTO dbo.DICCIONARIO (NUMERODECAMPO, USODELCAMPO, REFERENCIA, DESCRIPCION, PROMPT, LARGO, TIPODECAMPO, DECIMALES, EDICION, CONTABILIZA, CONCEPTO, CALCULO, VALIDACION, TABLADEVALIDACION, TABLADEAYUDA, OPCIONES, TABLA, CAMPO, BASICO, MASCARA)
VALUES (3367, ' ', NULL, 'ComisDesemMN', 'ComisDesemMN', 15, 'N', 2, NULL, 0, NULL, NULL, NULL, NULL, NULL, 0, 21, 'ComisDesemMN', 0, ' ');




INSERT INTO BITACORA_HM (ACTUALIZACION,FECHA_APLICADO,TIPO_ACTUALIZACION,ESTADO,SCRIPT_SQL,SCRIPT_SQL_UNDO,ULT_SENTENCIA_OK)  VALUES ('20210802_1NBCH',NULL,'MANUAL','NO_DEFINIDO','CgoNCi0tIFBhcmNoZV9OVU5CQ0hBQ09fMjExCg0KLS0gdGFibGFCU19DT01JU0lPTkRFU0VNQk9M
U08NCkNSRUFURSBUQUJMRSBCU19DT01JU0lPTkRFU0VNQk9MU08KKApUWl9MT0NLICAgICAgICAg
ICAgIE5VTUVSSUMgKDE2KSBERUZBVUxUICgoMCkpLApTQUxET1NfSlRTX09JRCAgICAgIE5VTUVS
SUMgKDEwKSBERUZBVUxUIChOVUxMKSBOT1QgTlVMTCwKTlVNRVJPX0NVT1RBICAgICAgICBOVU1F
UklDICg0KSBERUZBVUxUICgoMCkpIE5PVCBOVUxMLApGRUNIQV9WRU5DSU1JRU5UTyAgIERBVEVU
SU1FIERFRkFVTFQgKE5VTEwpLApDQVBJVEFMX1BSRVNUQU1PICAgIE5VTUVSSUMgKDE1LCAyKSBE
RUZBVUxUICgoMCkpLApJTlRFUkVTX1BSRVNUQU1PICAgIE5VTUVSSUMgKDE1LCAyKSBERUZBVUxU
ICgoMCkpLApSRU1BTkVOVEVfUFJFU1RBTU8gIE5VTUVSSUMgKDE1LCAyKSBERUZBVUxUICgoMCkp
LApDQVBJVEFMX0NPTUlTSU9OICAgIE5VTUVSSUMgKDE1LCAyKSBERUZBVUxUICgoMCkpLApJTlRF
UkVTX0NPTUlTSU9OICAgIE5VTUVSSUMgKDE1LCAyKSBERUZBVUxUICgoMCkpLApSRU1BTkVOVEVf
Q09NSVNJT04gIE5VTUVSSUMgKDE1LCAyKSBERUZBVUxUICgoMCkpLApJTVBPUlRFX0NPTUlTSU9O
ICAgIE5VTUVSSUMgKDE1LCAyKSBERUZBVUxUICgoMCkpLApGRUNIQV9VTFRfREVWRU5HQURPIERB
VEVUSU1FIERFRkFVTFQgKE5VTEwpLApERVZFTkdBRE8gICAgICAgICAgIE5VTUVSSUMgKDE1LCAy
KSBERUZBVUxUICgoMCkpLApNT05FREFfT1JJR0VOICAgICAgIE5VTUVSSUMgKDUpIERFRkFVTFQg
KCgwKSksClBSSU1BUlkgS0VZIChTQUxET1NfSlRTX09JRCwgTlVNRVJPX0NVT1RBKQopOwoNCi0t
IEFncmVnYXIgY2FtcG8gYSBzYWxkb3MNCkFMVEVSIFRBQkxFIFNBTERPUyBBREQgQ29taXNEZXNl
bU1OICBOVU1FUklDICgxNSwgMikgREVGQVVMVCAoKDApKSBOT1QgTlVMTDsKDQotLSBBZ3JlZ2Fy
IHBhcmFtZXRyb3MNCklOU0VSVCBJTlRPIGRiby5QQVJBTUVUUk9TX0pUUyAoRlVOQ0lPTkFMSURB
RCwgUEFSQU1FVFJPLCBWQUxPUiwgVFpfTE9DSykKVkFMVUVTICgnQ1JFQV9DT01JU0lPTl9ERVNF
TUJPTFNPJywgJ0NBTkFMJywgJzAnLCAwKTsKCklOU0VSVCBJTlRPIGRiby5QQVJBTUVUUk9TX0pU
UyAoRlVOQ0lPTkFMSURBRCwgUEFSQU1FVFJPLCBWQUxPUiwgVFpfTE9DSykKVkFMVUVTICgnQ1JF
QV9DT01JU0lPTl9ERVNFTUJPTFNPJywgJ0RFU0NSSVBDSU9OJywgJ0NyZWEgUmVnIEJTX0NPTUlT
SU9OREVTRU1CT0xTTycsIDApOwoKSU5TRVJUIElOVE8gZGJvLlBBUkFNRVRST1NfSlRTIChGVU5D
SU9OQUxJREFELCBQQVJBTUVUUk8sIFZBTE9SLCBUWl9MT0NLKQpWQUxVRVMgKCdDUkVBX0NPTUlT
SU9OX0RFU0VNQk9MU08nLCAnT1BFUkFDSU9OJywgJzMxJywgMCk7Cg0KLS0gU29icmUgbGEgc2Vu
dGVuY2lhDQpJTlNFUlQgSU5UTyBkYm8uUEFSQU1FVFJPU19KVFMgKEZVTkNJT05BTElEQUQsIFBB
UkFNRVRSTywgVkFMT1IsIFRaX0xPQ0spClZBTFVFUyAoJ0RFVkVOR0FNSUVOVE9fQ09NSVNJT05f
REVTRU1CT0xTTycsICdDQU5BTCcsICcxJywgMCk7CgpJTlNFUlQgSU5UTyBkYm8uUEFSQU1FVFJP
U19KVFMgKEZVTkNJT05BTElEQUQsIFBBUkFNRVRSTywgVkFMT1IsIFRaX0xPQ0spClZBTFVFUyAo
J0RFVkVOR0FNSUVOVE9fQ09NSVNJT05fREVTRU1CT0xTTycsICdERVNDUklQQ0lPTicsICdEZXYg
Y29tIGRlc2VtYm9sc28nLCAwKTsKCklOU0VSVCBJTlRPIGRiby5QQVJBTUVUUk9TX0pUUyAoRlVO
Q0lPTkFMSURBRCwgUEFSQU1FVFJPLCBWQUxPUiwgVFpfTE9DSykKVkFMVUVTICgnREVWRU5HQU1J
RU5UT19DT01JU0lPTl9ERVNFTUJPTFNPJywgJ09QRVJBQ0lPTicsICczMCcsIDApOwoKSU5TRVJU
IElOVE8gZGJvLlBBUkFNRVRST1NfSlRTIChGVU5DSU9OQUxJREFELCBQQVJBTUVUUk8sIFZBTE9S
LCBUWl9MT0NLKQpWQUxVRVMgKCdERVZFTkdBTUlFTlRPX0NPTUlTSU9OX0RFU0VNQk9MU08nLCAn
UElWT1RFX0NPTlRBQl9DT01JU19ERVNFTScsICcxJywgMCk7Cg0KLS0gU29icmUgbGEgc2VudGVu
Y2lhDQpJTlNFUlQgSU5UTyBkYm8uT1BFUkFDSU9ORVMgKFRJVFVMTywgSURFTlRJRklDQUNJT04s
IE5PTUJSRSwgREVTQ1JJUENJT04sIE1ORU1PVEVDTklDTywgQVVUT1JJWkFDSU9OLCBGT1JNVUxB
UklPUFJJTkNJUEFMLCBQUk9YT1BFUkFDSU9OLCBFU1RBRE8sIFRaX0xPQ0ssIENPUElBUywgU1VC
T1BFUkFDSU9OLCBQRVJNSVRFQkFKQSwgQ09NUE9SVEFNSUVOVE9FTkNJRVJSRSwgUkVRVUlFUkVD
T05UUkFTRU5BLCBQRVJNSVRFQ09OQ1VSUkVOVEUsIFBFUk1JVEVFU1RBRE9ESUZFUklETywgSUNP
Tk9fVElUVUxPLCBFU1RJTE8pClZBTFVFUyAoODYwMCwgMzAsICdEZXZlbmdhbWllbnRvIENvbWlz
aW9uIERlc2VtYm9sc28nLCAnRGV2ZW5nYW1pZW50byBDb21pc2lvbiBEZXNlbWJvbHNvJywgJzMw
JywgJ04nLCBOVUxMLCBOVUxMLCAnUCcsIDAsIE5VTEwsIDAsICdOJywgJ04nLCAnTicsICdTJywg
J1MnLCBOVUxMLCBOVUxMKTsKCklOU0VSVCBJTlRPIGRiby5PUEVSQUNJT05FUyAoVElUVUxPLCBJ
REVOVElGSUNBQ0lPTiwgTk9NQlJFLCBERVNDUklQQ0lPTiwgTU5FTU9URUNOSUNPLCBBVVRPUkla
QUNJT04sIEZPUk1VTEFSSU9QUklOQ0lQQUwsIFBST1hPUEVSQUNJT04sIEVTVEFETywgVFpfTE9D
SywgQ09QSUFTLCBTVUJPUEVSQUNJT04sIFBFUk1JVEVCQUpBLCBDT01QT1JUQU1JRU5UT0VOQ0lF
UlJFLCBSRVFVSUVSRUNPTlRSQVNFTkEsIFBFUk1JVEVDT05DVVJSRU5URSwgUEVSTUlURUVTVEFE
T0RJRkVSSURPLCBJQ09OT19USVRVTE8sIEVTVElMTykKVkFMVUVTICg4NjAwLCAzMSwgJ0NyZWFj
aW9uIENvbWlzaW9uIERlc2VtYm9sc28nLCAnQ3JlYWNpb24gQ29taXNpb24gRGVzZW1ib2xzbycs
ICczMScsICdOJywgTlVMTCwgTlVMTCwgJ1AnLCAwLCBOVUxMLCAwLCAnTicsICdOJywgJ04nLCAn
UycsICdTJywgTlVMTCwgTlVMTCk7Cg0KLS0gU29icmUgbGEgc2VudGVuY2lhDQpJTlNFUlQgSU5U
TyBkYm8uRElDQ0lPTkFSSU8gKE5VTUVST0RFQ0FNUE8sIFVTT0RFTENBTVBPLCBSRUZFUkVOQ0lB
LCBERVNDUklQQ0lPTiwgUFJPTVBULCBMQVJHTywgVElQT0RFQ0FNUE8sIERFQ0lNQUxFUywgRURJ
Q0lPTiwgQ09OVEFCSUxJWkEsIENPTkNFUFRPLCBDQUxDVUxPLCBWQUxJREFDSU9OLCBUQUJMQURF
VkFMSURBQ0lPTiwgVEFCTEFERUFZVURBLCBPUENJT05FUywgVEFCTEEsIENBTVBPLCBCQVNJQ08s
IE1BU0NBUkEpClZBTFVFUyAoMzM2NywgJyAnLCBOVUxMLCAnQ29taXNEZXNlbU1OJywgJ0NvbWlz
RGVzZW1NTicsIDE1LCAnTicsIDIsIE5VTEwsIDAsIE5VTEwsIE5VTEwsIE5VTEwsIE5VTEwsIE5V
TEwsIDAsIDIxLCAnQ29taXNEZXNlbU1OJywgMCwgJyAnKTsKDQoKCg0K', NULL, 0);
