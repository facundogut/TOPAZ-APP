


-- Parche_NUNBCHACO_229

-- Sentencias SQL Server
ALTER TABLE HISTORICO_DEVENGAMIENTO ADD ICMORA_DEVEN_VIGENTE 		NUMERIC (15,2) NULL;

ALTER TABLE HISTORICO_DEVENGAMIENTO ADD ICMORA_DEVEN_NP_VIG       	NUMERIC (15,2) NULL;

ALTER TABLE HISTORICO_DEVENGAMIENTO ADD ICMORA_DEVEN_VIGENTE_CONT	NUMERIC (15,2) NULL;

ALTER TABLE HISTORICO_DEVENGAMIENTO ADD ICMORA_DEVEN_SUSPENSO_CONT	NUMERIC (15,2) NULL;

ALTER TABLE HISTORICO_DEVENGAMIENTO ADD ICMORA_DEVEN_VENCIDO_CONT	NUMERIC (15,2) NULL;

ALTER TABLE HISTORICO_DEVENGAMIENTO ADD ICMORA_PERCIBIDA	      	NUMERIC (15,2) NULL;

ALTER TABLE SALDOS ADD ICMORA_DEVENGADA_VIG NUMERIC (15,2) NULL;

ALTER TABLE SALDOS ADD ICMORA_PERCIBIDA_VIG NUMERIC (15,2) NULL;

-- Sentencias SQL Genéricas
INSERT INTO CONCEPTOS (CODIGO, DESCRIPCION, CAMPOV25)
VALUES (2696, 'ICMORA PAGADO VIGENTE', '922');

INSERT INTO CONCEPTOS (CODIGO, DESCRIPCION, CAMPOV25)
VALUES (2697, 'ICMORA DEVENGADA VIGENTE', '2059');

INSERT INTO CONCEPTOS (CODIGO, DESCRIPCION, CAMPOV25)
VALUES (2698, 'ICMORA PERCIBIDA VIGENTE', '2213');

INSERT INTO DICCIONARIO (NUMERODECAMPO, USODELCAMPO, REFERENCIA, DESCRIPCION, PROMPT, LARGO, TIPODECAMPO, DECIMALES, EDICION, CONTABILIZA, CONCEPTO, CALCULO, VALIDACION, TABLADEVALIDACION, TABLADEAYUDA, OPCIONES, TABLA, CAMPO, BASICO, MASCARA)
VALUES ('922', ' ', NULL, 'ICMora Pagado Vigente', 'ICMora Pag.Vig', 15, 'N', 2, 'I', 0, 2696, NULL, NULL, NULL, NULL, 0, 0, 'ICMORA_PAGADO_VIGENTE', 0, ' ');

INSERT INTO DICCIONARIO (NUMERODECAMPO, USODELCAMPO, REFERENCIA, DESCRIPCION, PROMPT, LARGO, TIPODECAMPO, DECIMALES, EDICION, CONTABILIZA, CONCEPTO, CALCULO, VALIDACION, TABLADEVALIDACION, TABLADEAYUDA, OPCIONES, TABLA, CAMPO, BASICO, MASCARA)
VALUES ('2059', ' ', NULL, 'ICMora Devengada Vigente', 'ICMora Dev.Vig', 15, 'N', 2, 'I', 0, 2697, NULL, NULL, NULL, NULL, 0, 21, 'ICMORA_DEVENGADA_VIG', 0, ' ');

INSERT INTO DICCIONARIO (NUMERODECAMPO, USODELCAMPO, REFERENCIA, DESCRIPCION, PROMPT, LARGO, TIPODECAMPO, DECIMALES, EDICION, CONTABILIZA, CONCEPTO, CALCULO, VALIDACION, TABLADEVALIDACION, TABLADEAYUDA, OPCIONES, TABLA, CAMPO, BASICO, MASCARA)
VALUES ('2213', ' ', NULL, 'ICMora Percibida Vigente', 'ICMora Perc.Vig', 15, 'N', 2, 'I', 0, 2698, NULL, NULL, NULL, NULL, 0, 21, 'ICMORA_PERCIBIDA_VIG', 0, ' ');

INSERT INTO PARAMETROS_JTS (FUNCIONALIDAD, PARAMETRO, VALOR, TZ_LOCK)
VALUES ('DEVENGAMIENTOCONT', 'PIVOT_ICMORA_DEVENGADA_VIGENTE', '0', 0);

INSERT INTO PARAMETROS_JTS (FUNCIONALIDAD, PARAMETRO, VALOR, TZ_LOCK)
VALUES ('DEVENGAMIENTOCONT', 'PIVOT_ICMORA_DEVENGADA_SUSPENSO', '0', 0);

INSERT INTO PARAMETROS_JTS (FUNCIONALIDAD, PARAMETRO, VALOR, TZ_LOCK)
VALUES ('DEVENGAMIENTOCONT', 'PIVOT_ICMORA_DEVENGADA_VENCIDO', '0', 0);

-- Parche_NUNBCHACO_231

-- Sentencias SQL Server
ALTER TABLE CLI_CLIENTES ADD
CLIENTE_DEVENGA_SUSPENSO NUMERIC (3, 0) NULL;

-- Sentencias SQL Genéricas
INSERT INTO DICCIONARIO (NUMERODECAMPO, USODELCAMPO, REFERENCIA, DESCRIPCION, PROMPT, LARGO, TIPODECAMPO, DECIMALES, EDICION, CONTABILIZA, CONCEPTO, CALCULO, VALIDACION, TABLADEVALIDACION, TABLADEAYUDA, OPCIONES, TABLA, CAMPO, BASICO, MASCARA)
VALUES ('2215', ' ', NULL, 'Cliente Dev. Suspenso', 'Cliente Dev.Sus', 3, 'N', 0, 'I', 0, 0, NULL, NULL, NULL, NULL, 0, 11, 'CLIENTE_DEVENGA_SUSPENSO', 0, ' ');

INSERT INTO PARAMETROS_JTS (FUNCIONALIDAD, PARAMETRO, VALOR, TZ_LOCK)
VALUES ('DEVENGAMIENTO', 'DIAS_PASAJE_A_SUSPENSO', '90', 0)

INSERT INTO DICCIONARIO (NUMERODECAMPO, USODELCAMPO, REFERENCIA, DESCRIPCION, PROMPT, LARGO, TIPODECAMPO, DECIMALES, EDICION, CONTABILIZA, CONCEPTO, CALCULO, VALIDACION, TABLADEVALIDACION, TABLADEAYUDA, OPCIONES, TABLA, CAMPO, BASICO, MASCARA)
VALUES ('58500', ' ', 0, 'Pivot ICMora Devengada Vigente', 'Piv ICM DevVig', 15, 'N', 2, 'I', 0, 0, 0, 0, 0, 0, 0, 0, NULL, 0, NULL);

INSERT INTO DICCIONARIO (NUMERODECAMPO, USODELCAMPO, REFERENCIA, DESCRIPCION, PROMPT, LARGO, TIPODECAMPO, DECIMALES, EDICION, CONTABILIZA, CONCEPTO, CALCULO, VALIDACION, TABLADEVALIDACION, TABLADEAYUDA, OPCIONES, TABLA, CAMPO, BASICO, MASCARA)
VALUES ('58501', ' ', 0, 'Pivot ICMora Devengada Suspenso', 'Piv ICM DevSusp', 15, 'N', 2, 'I', 0, 0, 0, 0, 0, 0, 0, 0, NULL, 0, NULL);

INSERT INTO DICCIONARIO (NUMERODECAMPO, USODELCAMPO, REFERENCIA, DESCRIPCION, PROMPT, LARGO, TIPODECAMPO, DECIMALES, EDICION, CONTABILIZA, CONCEPTO, CALCULO, VALIDACION, TABLADEVALIDACION, TABLADEAYUDA, OPCIONES, TABLA, CAMPO, BASICO, MASCARA)
VALUES ('58502', ' ', 0, 'Pivot ICMora Devengada Vencido', 'Piv ICM DevVdo', 15, 'N', 2, 'I', 0, 0, 0, 0, 0, 0, 0, 0, NULL, 0, NULL);

UPDATE PARAMETROS_JTS SET VALOR='58500'
WHERE PARAMETRO = 'PIVOT_ICMORA_DEVENGADA_VIGENTE';

UPDATE PARAMETROS_JTS SET VALOR='58501'
WHERE PARAMETRO = 'PIVOT_ICMORA_DEVENGADA_SUSPENSO';

UPDATE PARAMETROS_JTS SET VALOR='58502'
WHERE PARAMETRO = 'PIVOT_ICMORA_DEVENGADA_VENCIDO';




INSERT INTO BITACORA_HM (ACTUALIZACION,FECHA_APLICADO,TIPO_ACTUALIZACION,ESTADO,SCRIPT_SQL,SCRIPT_SQL_UNDO,ULT_SENTENCIA_OK)  VALUES ('20201127_2NBCH',NULL,'MANUAL','NO_DEFINIDO','CgoNCi0tIFBhcmNoZV9OVU5CQ0hBQ09fMjI5Cg0KLS0gU2VudGVuY2lhcyBTUUwgU2VydmVyDQpB
TFRFUiBUQUJMRSBISVNUT1JJQ09fREVWRU5HQU1JRU5UTyBBREQgSUNNT1JBX0RFVkVOX1ZJR0VO
VEUgCQlOVU1FUklDICgxNSwyKSBOVUxMOwoKQUxURVIgVEFCTEUgSElTVE9SSUNPX0RFVkVOR0FN
SUVOVE8gQUREIElDTU9SQV9ERVZFTl9OUF9WSUcgICAgICAgCU5VTUVSSUMgKDE1LDIpIE5VTEw7
CgpBTFRFUiBUQUJMRSBISVNUT1JJQ09fREVWRU5HQU1JRU5UTyBBREQgSUNNT1JBX0RFVkVOX1ZJ
R0VOVEVfQ09OVAlOVU1FUklDICgxNSwyKSBOVUxMOwoKQUxURVIgVEFCTEUgSElTVE9SSUNPX0RF
VkVOR0FNSUVOVE8gQUREIElDTU9SQV9ERVZFTl9TVVNQRU5TT19DT05UCU5VTUVSSUMgKDE1LDIp
IE5VTEw7CgpBTFRFUiBUQUJMRSBISVNUT1JJQ09fREVWRU5HQU1JRU5UTyBBREQgSUNNT1JBX0RF
VkVOX1ZFTkNJRE9fQ09OVAlOVU1FUklDICgxNSwyKSBOVUxMOwoKQUxURVIgVEFCTEUgSElTVE9S
SUNPX0RFVkVOR0FNSUVOVE8gQUREIElDTU9SQV9QRVJDSUJJREEJICAgICAgCU5VTUVSSUMgKDE1
LDIpIE5VTEw7CgpBTFRFUiBUQUJMRSBTQUxET1MgQUREIElDTU9SQV9ERVZFTkdBREFfVklHIE5V
TUVSSUMgKDE1LDIpIE5VTEw7CgpBTFRFUiBUQUJMRSBTQUxET1MgQUREIElDTU9SQV9QRVJDSUJJ
REFfVklHIE5VTUVSSUMgKDE1LDIpIE5VTEw7Cg0KLS0gU2VudGVuY2lhcyBTUUwgR2Vu6XJpY2Fz
DQpJTlNFUlQgSU5UTyBDT05DRVBUT1MgKENPRElHTywgREVTQ1JJUENJT04sIENBTVBPVjI1KQpW
QUxVRVMgKDI2OTYsICdJQ01PUkEgUEFHQURPIFZJR0VOVEUnLCAnOTIyJyk7CgpJTlNFUlQgSU5U
TyBDT05DRVBUT1MgKENPRElHTywgREVTQ1JJUENJT04sIENBTVBPVjI1KQpWQUxVRVMgKDI2OTcs
ICdJQ01PUkEgREVWRU5HQURBIFZJR0VOVEUnLCAnMjA1OScpOwoKSU5TRVJUIElOVE8gQ09OQ0VQ
VE9TIChDT0RJR08sIERFU0NSSVBDSU9OLCBDQU1QT1YyNSkKVkFMVUVTICgyNjk4LCAnSUNNT1JB
IFBFUkNJQklEQSBWSUdFTlRFJywgJzIyMTMnKTsKCklOU0VSVCBJTlRPIERJQ0NJT05BUklPIChO
VU1FUk9ERUNBTVBPLCBVU09ERUxDQU1QTywgUkVGRVJFTkNJQSwgREVTQ1JJUENJT04sIFBST01Q
VCwgTEFSR08sIFRJUE9ERUNBTVBPLCBERUNJTUFMRVMsIEVESUNJT04sIENPTlRBQklMSVpBLCBD
T05DRVBUTywgQ0FMQ1VMTywgVkFMSURBQ0lPTiwgVEFCTEFERVZBTElEQUNJT04sIFRBQkxBREVB
WVVEQSwgT1BDSU9ORVMsIFRBQkxBLCBDQU1QTywgQkFTSUNPLCBNQVNDQVJBKQpWQUxVRVMgKCc5
MjInLCAnICcsIE5VTEwsICdJQ01vcmEgUGFnYWRvIFZpZ2VudGUnLCAnSUNNb3JhIFBhZy5WaWcn
LCAxNSwgJ04nLCAyLCAnSScsIDAsIDI2OTYsIE5VTEwsIE5VTEwsIE5VTEwsIE5VTEwsIDAsIDAs
ICdJQ01PUkFfUEFHQURPX1ZJR0VOVEUnLCAwLCAnICcpOwoKSU5TRVJUIElOVE8gRElDQ0lPTkFS
SU8gKE5VTUVST0RFQ0FNUE8sIFVTT0RFTENBTVBPLCBSRUZFUkVOQ0lBLCBERVNDUklQQ0lPTiwg
UFJPTVBULCBMQVJHTywgVElQT0RFQ0FNUE8sIERFQ0lNQUxFUywgRURJQ0lPTiwgQ09OVEFCSUxJ
WkEsIENPTkNFUFRPLCBDQUxDVUxPLCBWQUxJREFDSU9OLCBUQUJMQURFVkFMSURBQ0lPTiwgVEFC
TEFERUFZVURBLCBPUENJT05FUywgVEFCTEEsIENBTVBPLCBCQVNJQ08sIE1BU0NBUkEpClZBTFVF
UyAoJzIwNTknLCAnICcsIE5VTEwsICdJQ01vcmEgRGV2ZW5nYWRhIFZpZ2VudGUnLCAnSUNNb3Jh
IERldi5WaWcnLCAxNSwgJ04nLCAyLCAnSScsIDAsIDI2OTcsIE5VTEwsIE5VTEwsIE5VTEwsIE5V
TEwsIDAsIDIxLCAnSUNNT1JBX0RFVkVOR0FEQV9WSUcnLCAwLCAnICcpOwoKSU5TRVJUIElOVE8g
RElDQ0lPTkFSSU8gKE5VTUVST0RFQ0FNUE8sIFVTT0RFTENBTVBPLCBSRUZFUkVOQ0lBLCBERVND
UklQQ0lPTiwgUFJPTVBULCBMQVJHTywgVElQT0RFQ0FNUE8sIERFQ0lNQUxFUywgRURJQ0lPTiwg
Q09OVEFCSUxJWkEsIENPTkNFUFRPLCBDQUxDVUxPLCBWQUxJREFDSU9OLCBUQUJMQURFVkFMSURB
Q0lPTiwgVEFCTEFERUFZVURBLCBPUENJT05FUywgVEFCTEEsIENBTVBPLCBCQVNJQ08sIE1BU0NB
UkEpClZBTFVFUyAoJzIyMTMnLCAnICcsIE5VTEwsICdJQ01vcmEgUGVyY2liaWRhIFZpZ2VudGUn
LCAnSUNNb3JhIFBlcmMuVmlnJywgMTUsICdOJywgMiwgJ0knLCAwLCAyNjk4LCBOVUxMLCBOVUxM
LCBOVUxMLCBOVUxMLCAwLCAyMSwgJ0lDTU9SQV9QRVJDSUJJREFfVklHJywgMCwgJyAnKTsKCklO
U0VSVCBJTlRPIFBBUkFNRVRST1NfSlRTIChGVU5DSU9OQUxJREFELCBQQVJBTUVUUk8sIFZBTE9S
LCBUWl9MT0NLKQpWQUxVRVMgKCdERVZFTkdBTUlFTlRPQ09OVCcsICdQSVZPVF9JQ01PUkFfREVW
RU5HQURBX1ZJR0VOVEUnLCAnMCcsIDApOwoKSU5TRVJUIElOVE8gUEFSQU1FVFJPU19KVFMgKEZV
TkNJT05BTElEQUQsIFBBUkFNRVRSTywgVkFMT1IsIFRaX0xPQ0spClZBTFVFUyAoJ0RFVkVOR0FN
SUVOVE9DT05UJywgJ1BJVk9UX0lDTU9SQV9ERVZFTkdBREFfU1VTUEVOU08nLCAnMCcsIDApOwoK
SU5TRVJUIElOVE8gUEFSQU1FVFJPU19KVFMgKEZVTkNJT05BTElEQUQsIFBBUkFNRVRSTywgVkFM
T1IsIFRaX0xPQ0spClZBTFVFUyAoJ0RFVkVOR0FNSUVOVE9DT05UJywgJ1BJVk9UX0lDTU9SQV9E
RVZFTkdBREFfVkVOQ0lETycsICcwJywgMCk7Cg0KLS0gUGFyY2hlX05VTkJDSEFDT18yMzEKDQot
LSBTZW50ZW5jaWFzIFNRTCBTZXJ2ZXINCkFMVEVSIFRBQkxFIENMSV9DTElFTlRFUyBBREQKQ0xJ
RU5URV9ERVZFTkdBX1NVU1BFTlNPIE5VTUVSSUMgKDMsIDApIE5VTEw7Cg0KLS0gU2VudGVuY2lh
cyBTUUwgR2Vu6XJpY2FzDQpJTlNFUlQgSU5UTyBESUNDSU9OQVJJTyAoTlVNRVJPREVDQU1QTywg
VVNPREVMQ0FNUE8sIFJFRkVSRU5DSUEsIERFU0NSSVBDSU9OLCBQUk9NUFQsIExBUkdPLCBUSVBP
REVDQU1QTywgREVDSU1BTEVTLCBFRElDSU9OLCBDT05UQUJJTElaQSwgQ09OQ0VQVE8sIENBTENV
TE8sIFZBTElEQUNJT04sIFRBQkxBREVWQUxJREFDSU9OLCBUQUJMQURFQVlVREEsIE9QQ0lPTkVT
LCBUQUJMQSwgQ0FNUE8sIEJBU0lDTywgTUFTQ0FSQSkKVkFMVUVTICgnMjIxNScsICcgJywgTlVM
TCwgJ0NsaWVudGUgRGV2LiBTdXNwZW5zbycsICdDbGllbnRlIERldi5TdXMnLCAzLCAnTicsIDAs
ICdJJywgMCwgMCwgTlVMTCwgTlVMTCwgTlVMTCwgTlVMTCwgMCwgMTEsICdDTElFTlRFX0RFVkVO
R0FfU1VTUEVOU08nLCAwLCAnICcpOwoKSU5TRVJUIElOVE8gUEFSQU1FVFJPU19KVFMgKEZVTkNJ
T05BTElEQUQsIFBBUkFNRVRSTywgVkFMT1IsIFRaX0xPQ0spClZBTFVFUyAoJ0RFVkVOR0FNSUVO
VE8nLCAnRElBU19QQVNBSkVfQV9TVVNQRU5TTycsICc5MCcsIDApCgpJTlNFUlQgSU5UTyBESUND
SU9OQVJJTyAoTlVNRVJPREVDQU1QTywgVVNPREVMQ0FNUE8sIFJFRkVSRU5DSUEsIERFU0NSSVBD
SU9OLCBQUk9NUFQsIExBUkdPLCBUSVBPREVDQU1QTywgREVDSU1BTEVTLCBFRElDSU9OLCBDT05U
QUJJTElaQSwgQ09OQ0VQVE8sIENBTENVTE8sIFZBTElEQUNJT04sIFRBQkxBREVWQUxJREFDSU9O
LCBUQUJMQURFQVlVREEsIE9QQ0lPTkVTLCBUQUJMQSwgQ0FNUE8sIEJBU0lDTywgTUFTQ0FSQSkK
VkFMVUVTICgnMScsICcgJywgMCwgJ1Bpdm90IElDTW9yYSBEZXZlbmdhZGEgVmlnZW50ZScsICdQ
aXYgSUNNIERldlZpZycsIDE1LCAnTicsIDIsICdJJywgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwg
TlVMTCwgMCwgTlVMTCk7CgpJTlNFUlQgSU5UTyBESUNDSU9OQVJJTyAoTlVNRVJPREVDQU1QTywg
VVNPREVMQ0FNUE8sIFJFRkVSRU5DSUEsIERFU0NSSVBDSU9OLCBQUk9NUFQsIExBUkdPLCBUSVBP
REVDQU1QTywgREVDSU1BTEVTLCBFRElDSU9OLCBDT05UQUJJTElaQSwgQ09OQ0VQVE8sIENBTENV
TE8sIFZBTElEQUNJT04sIFRBQkxBREVWQUxJREFDSU9OLCBUQUJMQURFQVlVREEsIE9QQ0lPTkVT
LCBUQUJMQSwgQ0FNUE8sIEJBU0lDTywgTUFTQ0FSQSkKVkFMVUVTICgnMicsICcgJywgMCwgJ1Bp
dm90IElDTW9yYSBEZXZlbmdhZGEgU3VzcGVuc28nLCAnUGl2IElDTSBEZXZTdXNwJywgMTUsICdO
JywgMiwgJ0knLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCBOVUxMLCAwLCBOVUxMKTsKCklOU0VS
VCBJTlRPIERJQ0NJT05BUklPIChOVU1FUk9ERUNBTVBPLCBVU09ERUxDQU1QTywgUkVGRVJFTkNJ
QSwgREVTQ1JJUENJT04sIFBST01QVCwgTEFSR08sIFRJUE9ERUNBTVBPLCBERUNJTUFMRVMsIEVE
SUNJT04sIENPTlRBQklMSVpBLCBDT05DRVBUTywgQ0FMQ1VMTywgVkFMSURBQ0lPTiwgVEFCTEFE
RVZBTElEQUNJT04sIFRBQkxBREVBWVVEQSwgT1BDSU9ORVMsIFRBQkxBLCBDQU1QTywgQkFTSUNP
LCBNQVNDQVJBKQpWQUxVRVMgKCczJywgJyAnLCAwLCAnUGl2b3QgSUNNb3JhIERldmVuZ2FkYSBW
ZW5jaWRvJywgJ1BpdiBJQ00gRGV2VmRvJywgMTUsICdOJywgMiwgJ0knLCAwLCAwLCAwLCAwLCAw
LCAwLCAwLCAwLCBOVUxMLCAwLCBOVUxMKTsKClVQREFURSBQQVJBTUVUUk9TX0pUUyBTRVQgVkFM
T1I9JzEnCldIRVJFIFBBUkFNRVRSTyA9ICdQSVZPVF9JQ01PUkFfREVWRU5HQURBX1ZJR0VOVEUn
OwoKVVBEQVRFIFBBUkFNRVRST1NfSlRTIFNFVCBWQUxPUj0nMicKV0hFUkUgUEFSQU1FVFJPID0g
J1BJVk9UX0lDTU9SQV9ERVZFTkdBREFfU1VTUEVOU08nOwoKVVBEQVRFIFBBUkFNRVRST1NfSlRT
IFNFVCBWQUxPUj0nMycKV0hFUkUgUEFSQU1FVFJPID0gJ1BJVk9UX0lDTU9SQV9ERVZFTkdBREFf
VkVOQ0lETyc7Cg0KCgoNCg==', NULL, 0);
