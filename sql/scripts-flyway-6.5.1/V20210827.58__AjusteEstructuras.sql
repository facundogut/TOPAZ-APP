EXECUTE('
IF OBJECT_ID (''dbo.CRE_REL_CAB_DOCUMENTOS'') IS NOT NULL
	DROP TABLE dbo.CRE_REL_CAB_DOCUMENTOS

CREATE TABLE dbo.CRE_REL_CAB_DOCUMENTOS
	(
	TZ_LOCK                  NUMERIC (15) DEFAULT ((0)),
	NUMERO_LISTA             NUMERIC (6) DEFAULT ((0)) NOT NULL,
	TIPO_DOCUMENTO           VARCHAR (4) DEFAULT ('' '') NOT NULL,
	SERIE_DEL_CHEQUE         VARCHAR (6) DEFAULT ('' '') NOT NULL,
	NUMERO_CHEQUE            NUMERIC (12) DEFAULT ((0)) NOT NULL,
	BANCO_GIRADO             NUMERIC (4) DEFAULT ((0)) NOT NULL,
	SUCURSAL_BANCO_GIRADO    NUMERIC (5) DEFAULT ((0)) NOT NULL,
	NUMERICO_CUENTA_GIRADORA NUMERIC (12) DEFAULT ((0)) NOT NULL,
	FECHA_ALTA               DATETIME,
	CONSTRAINT PK_CRE_REL_CAB_DOCUMENTOS PRIMARY KEY (NUMERO_LISTA, TIPO_DOCUMENTO, SERIE_DEL_CHEQUE, NUMERO_CHEQUE, BANCO_GIRADO, SUCURSAL_BANCO_GIRADO, NUMERICO_CUENTA_GIRADORA)
	)
')

EXECUTE('
ALTER PROCEDURE dbo.SP_LISTA_CHEQUES
   @LISTA NUMERIC(12,0)
AS 
   BEGIN      
	
	DELETE FROM CRE_CAB_LISTA_DOCUMENTOS WHERE NUMERO_LISTA = @LISTA
	
	DELETE FROM CLE_CHEQUES_LISTA_DESCUENTO WHERE NUMERO_DEPOSITO = @LISTA
	
	DELETE FROM CRE_REL_CAB_DOCUMENTOS WHERE NUMERO_LISTA = @LISTA

   END
   ')
   
EXECUTE('   
ALTER TABLE CLE_CHEQUES_LISTA_DESCUENTO DROP CONSTRAINT PK_CLE_CHEQUES_LISTA_DESCUENTO

ALTER TABLE CLE_CHEQUES_LISTA_DESCUENTO ALTER COLUMN NUMERICO_CUENTA_GIRADORA NUMERIC(12,0) NOT NULL

ALTER TABLE CLE_CHEQUES_LISTA_DESCUENTO ADD CONSTRAINT PK_CLE_CHEQUES_LISTA_DESCUENTO PRIMARY KEY (TIPO_DOCUMENTO, SERIE_DEL_CHEQUE, NUMERO_CHEQUE, BANCO_GIRADO, SUCURSAL_BANCO_GIRADO, NUMERICO_CUENTA_GIRADORA)
   
')