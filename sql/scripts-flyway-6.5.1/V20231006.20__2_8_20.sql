Execute('IF OBJECT_ID(''dbo.ITF_CLS_CBU_BASE_HISTORICO'',''U'') IS NOT NULL
    DROP TABLE dbo.ITF_CLS_CBU_BASE_HISTORICO;
CREATE TABLE dbo.ITF_CLS_CBU_BASE_HISTORICO
(
    ID BIGINT IDENTITY(1,1) PRIMARY KEY,
    EVENTO VARCHAR(1) NOT NULL,
    REPROCESO VARCHAR(1) NOT NULL,
    CBU VARCHAR(22) NOT NULL,
    CODIGO_BANCO VARCHAR(3) NOT NULL,
    MONEDA VARCHAR(3) NOT NULL,
    TIPO_CUENTA VARCHAR(2) NOT NULL,
    TIPO_TITULAR VARCHAR(1) NOT NULL,
    CANT_TITULARES NUMERIC(2, 0) NOT NULL,
    DOCUMENTO_TITULAR VARCHAR(11) NOT NULL,
    NOMBRE_TITULAR VARCHAR(40) NOT NULL,
    DOCUMENTO_COTITULAR1 VARCHAR(11) NULL,
    NOMBRE_COTITULAR1 VARCHAR(40) NULL,
    DOCUMENTO_COTITULAR2 VARCHAR(11) NULL,
    NOMBRE_COTITULAR2 VARCHAR(40) NULL,
    DOCUMENTO_COTITULAR3 VARCHAR(11) NULL,
    NOMBRE_COTITULAR3 VARCHAR(40) NULL,
    DOCUMENTO_COTITULAR4 VARCHAR(11) NULL,
    NOMBRE_COTITULAR4 VARCHAR(40) NULL,
    DOCUMENTO_COTITULAR5 VARCHAR(11) NULL,
    NOMBRE_COTITULAR5 VARCHAR(40) NULL,
    DOCUMENTO_COTITULAR6 VARCHAR(11) NULL,
    NOMBRE_COTITULAR6 VARCHAR(40) NULL,
    DOCUMENTO_COTITULAR7 VARCHAR(11) NULL,
    NOMBRE_COTITULAR7 VARCHAR(40) NULL,
    DOCUMENTO_COTITULAR8 VARCHAR(11) NULL,
    NOMBRE_COTITULAR8 VARCHAR(40) NULL,
    DOCUMENTO_COTITULAR9 VARCHAR(11) NULL,
    NOMBRE_COTITULAR9 VARCHAR(40) NULL,
    DOCUMENTO_COTITULAR10 VARCHAR(11) NULL,
    NOMBRE_COTITULAR10 VARCHAR(40) NULL,
    DOCUMENTO_COTITULAR11 VARCHAR(11) NULL,
    NOMBRE_COTITULAR11 VARCHAR(40) NULL,
    FECHA_PROCESO DATETIME NOT NULL,
    FECHA_RELOJ DATETIME NOT NULL
);')

Execute('
IF OBJECT_ID(''dbo.ITF_CLS_CBU_BASE_MASTER'',''U'') IS NOT NULL
    DROP TABLE dbo.ITF_CLS_CBU_BASE_MASTER;
create table dbo.ITF_CLS_CBU_BASE_MASTER
(
	EVENTO varchar(1) NOT NULL,
	REPROCESO varchar(1) NOT NULL,
	CBU varchar(22) NOT NULL PRIMARY KEY,
	CODIGO_BANCO varchar(3) NOT NULL,
	MONEDA varchar(3) NOT NULL,
	TIPO_CUENTA varchar(2) NOT NULL,
	TIPO_TITULAR varchar(1) NOT NULL,
	CANT_TITULARES numeric(2,0) NOT NULL,
	DOCUMENTO_TITULAR varchar(11) NOT NULL,
	NOMBRE_TITULAR varchar(40) NOT NULL,
	DOCUMENTO_COTITULAR1 varchar(11) NULL,
	NOMBRE_COTITULAR1 varchar (40) NULL,
	DOCUMENTO_COTITULAR2 varchar(11) NULL,
	NOMBRE_COTITULAR2 varchar (40) NULL,
	DOCUMENTO_COTITULAR3 varchar(11) NULL,
	NOMBRE_COTITULAR3 varchar (40) NULL,
	DOCUMENTO_COTITULAR4 varchar(11) NULL,
	NOMBRE_COTITULAR4 varchar (40) NULL,
	DOCUMENTO_COTITULAR5 varchar(11) NULL,
	NOMBRE_COTITULAR5 varchar (40) NULL,
	DOCUMENTO_COTITULAR6 varchar(11) NULL,
	NOMBRE_COTITULAR6 varchar (40) NULL,
	DOCUMENTO_COTITULAR7 varchar(11) NULL,
	NOMBRE_COTITULAR7 varchar (40) NULL,
	DOCUMENTO_COTITULAR8 varchar(11) NULL,
	NOMBRE_COTITULAR8 varchar (40) NULL,
	DOCUMENTO_COTITULAR9 varchar(11) NULL,
	NOMBRE_COTITULAR9 varchar (40) NULL,
	DOCUMENTO_COTITULAR10 varchar(11) NULL,
	NOMBRE_COTITULAR10 varchar (40) NULL,
	DOCUMENTO_COTITULAR11 varchar(11) NULL,
	NOMBRE_COTITULAR11 varchar (40) NULL
);')
Execute('
delete operaciones where identificacion = 7730;
-- OperaciÃ³n topaz
INSERT INTO dbo.OPERACIONES (TITULO,IDENTIFICACION,NOMBRE,DESCRIPCION,MNEMOTECNICO,AUTORIZACION,FORMULARIOPRINCIPAL,PROXOPERACION,ESTADO,TZ_LOCK,COPIAS,SUBOPERACION,PERMITEBAJA,COMPORTAMIENTOENCIERRE,REQUIERECONTRASENA,PERMITECONCURRENTE,PERMITEESTADODIFERIDO,ICONO_TITULO,ESTILO) 
VALUES (6800,7730,''Reproceso master CBU - Coelsa'',''Reproceso master CBU - Coelsa'',''7730'',''N'',NULL,NULL,''P'',0,NULL,0,''S'',''N'',''N'',''N'',''N'',NULL,0);

delete descriptores where identificacion = 773 and titulo = 930;
-- Descriptor
INSERT INTO dbo.DESCRIPTORES (TITULO,IDENTIFICACION,TIPODEARCHIVO,DESCRIPCION,GRUPODELMAPA,NOMBREFISICO,TIPODEDBMS,LARGODELREGISTRO,INICIALIZACIONDELREGISTRO,BASE,SELECCION,ACEPTA_MOVS_DIFERIDO)
VALUES (930,773,NULL,''Interface 2.8.20 Coelsa CBU'',0,''ITF_CLS_CBU_BASE_MASTER'',''D'',NULL,NULL,''Top/Clientes'',NULL,''N'');

-- Diccionario
delete diccionario where numerodecampo between 77300 and 77305;
INSERT INTO dbo.DICCIONARIO (NUMERODECAMPO,USODELCAMPO,REFERENCIA,DESCRIPCION,PROMPT,LARGO,TIPODECAMPO,DECIMALES,EDICION,CONTABILIZA,CONCEPTO,CALCULO,VALIDACION,TABLADEVALIDACION,TABLADEAYUDA,OPCIONES,TABLA,CAMPO,BASICO,MASCARA)
VALUES
	 (77300,N'' '',0,''CBU'',''CBU'',22,''A'',0,NULL,0,0,0,0,0,0,0,773,''CBU'',0,NULL),
	 (77301,N'' '',0,''DOCUMENTO_TITULAR'',''Documento del titular'',11,''A'',0,NULL,0,0,0,0,0,0,0,773,''DOCUMENTO_TITULAR'',0,NULL),
	 (77302,N'' '',0,''NOMBRE_TITULAR'',''Nombre del titular'',40,''A'',0,NULL,0,0,0,0,0,0,0,773,''NOMBRE_TITULAR'',0,NULL),
	 (77303,N'' '',0,''EVENTO'',''Evento'',1,''A'',0,NULL,0,0,0,0,0,0,1,773,''EVENTO'',0,NULL),
	 (77304,N'' '',0,''REPROCESO'',''Reproceso'',1,''A'',0,NULL,0,0,0,0,0,0,1,773,''REPROCESO'',0,NULL),
	 (77305,N'' '',0,''Grilla cuentas CLS CBU'',''Grilla cuentas CLS CBU'',22,''A'',0,NULL,0,0,0,0,0,99956,0,0,''C77305'',0,NULL);

delete opciones where numerodecampo between 77303 and 77304;	
-- Indice
INSERT INTO dbo.OPCIONES (NUMERODECAMPO,IDIOMA,DESCRIPCION,OPCIONINTERNA,OPCIONDEPANTALLA) VALUES
	 (77303,''E'',''Alta'',''A'',''A''),
	 (77303,''E'',''Baja'',''B'',''B''),
	 (77303,''E'',''Full refresh'',''F'',''F''),
	 (77303,''E'',''Modificacion'',''M'',''M''),
	 (77304,''E'',''No'',''N'',''N''),
	 (77304,''E'',''Si'',''S'',''S'');
	
-- Ayudas
delete dbo.ayudas where numerodeayuda = 99956;
INSERT INTO dbo.AYUDAS (NUMERODEARCHIVO,NUMERODEAYUDA,DESCRIPCION,FILTRO,MOSTRARTODOS,CAMPOS,CAMPOSVISTA,BASEVISTA,NOMBREVISTA,AYUDAGRANDE) VALUES
	 (773,99956,''Buscar cuenta'','''',0,''77300R;77304;77303;77301;77302;'',NULL,NULL,NULL,0);

delete indices where numerodeindice = 77300;
-- Indice
INSERT INTO INDICES (NUMERODEARCHIVO,NUMERODEINDICE,DESCRIPCION,CLAVESREPETIDAS,CAMPO1,CAMPO2,CAMPO3,CAMPO4,CAMPO5,CAMPO6,CAMPO7,CAMPO8,CAMPO9,CAMPO10,CAMPO11,CAMPO12,CAMPO13,CAMPO14,CAMPO15,CAMPO16,CAMPO17,CAMPO18,CAMPO19,CAMPO20) VALUES
	 (773,77300,''Indice CBU'',0,77300,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL);
	 
DELETE FROM ITF_MASTER_PARAMETROS WHERE CODIGO >= 425 and CODIGO <=440;

INSERT INTO dbo.ITF_MASTER_PARAMETROS (CODIGO,CODIGO_INTERFACE,FUNCIONALIDAD,ALFA_1,ALFA_2,ALFA_3,NUMERICO_1,NUMERICO_2,FECHA,IMPORTE_1,IMPORTE_2,TZ_LOCK) VALUES
	 (425,2820,''Mapeo Moneda PESOS'',''032'',''MONEDA'','' '',1,0,NULL,0.00,0.00,0),
	 (426,2820,''Mapeo Moneda DOLAR'',''840'',''MONEDA'','' '',2,0,NULL,0.00,0.00,0),
	 (427,2820,''Mapeo Moneda UVI'',''032'',''MONEDA'','' '',998,0,NULL,0.00,0.00,0),
	 (428,2820,''Mapeo Moneda UVA'',''032'',''MONEDA'','' '',999,0,NULL,0.00,0.00,0),
	 (429,2820,''Mapeo Tipo Cuenta'',''10'',''TIPOCUENTA'','' '',3,1,NULL,0.00,0.00,0),
	 (430,2820,''Mapeo Tipo Cuenta'',''20'',''TIPOCUENTA'','' '',2,1,NULL,0.00,0.00,0),
	 (431,2820,''Mapeo Tipo Cuenta'',''11'',''TIPOCUENTA'','' '',3,2,NULL,0.00,0.00,0),
	 (432,2820,''Mapeo Tipo Cuenta'',''21'',''TIPOCUENTA'','' '',2,2,NULL,0.00,0.00,0),
	 (433,2820,''Mapeo Tipo Cuenta'',''10'',''TIPOCUENTA'','' '',3,998,NULL,0.00,0.00,0),
	 (434,2820,''Mapeo Tipo Cuenta'',''10'',''TIPOCUENTA'','' '',3,999,NULL,0.00,0.00,0),
	 (435,2820,''Mapeo Tipo Cuenta'',''20'',''TIPOCUENTA'','' '',2,998,NULL,0.00,0.00,0),
	 (436,2820,''Mapeo Tipo Cuenta'',''20'',''TIPOCUENTA'','' '',2,999,NULL,0.00,0.00,0),
	 (437,2820,''Mapeo Tipo Cuenta'',''30'',''TIPOCUENTAESP'','' '',5,1,NULL,0.00,0.00,0),
	 (438,2820,''Mapeo Tipo Cuenta'',''31'',''TIPOCUENTAESP'','' '',5,2,NULL,0.00,0.00,0),
	 (439,2820,''Mapeo Tipo Cuenta'',''30'',''TIPOCUENTAESP'','' '',5,998,NULL,0.00,0.00,0),
	 (440,2820,''Mapeo Tipo Cuenta'',''30'',''TIPOCUENTAESP'','' '',5,999,NULL,0.00,0.00,0);') 
