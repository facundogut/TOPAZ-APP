Execute('--TABLA
DROP TABLE IF EXISTS dbo.ITF_MASTER_CAUSALES;
DROP TABLE IF EXISTS dbo.ITF_MASTER_CARGOS;

CREATE TABLE dbo.ITF_MASTER_CAUSALES (
	TZ_LOCK numeric(15,0) DEFAULT 0 NOT NULL,
	ID_SATELITE varchar(10) COLLATE Modern_Spanish_CI_AS DEFAULT 0 NOT NULL,
	COD_CAUSAL varchar(10) COLLATE Modern_Spanish_CI_AS DEFAULT 0 NOT NULL,
	DESCRIPCION varchar(50) COLLATE Modern_Spanish_CI_AS DEFAULT '' '' NULL,
	COD_TRN numeric(5,0) DEFAULT 0 NULL,
	ESTADO numeric(1,0) DEFAULT 0 NULL,
	TIPO_MOV varchar(1) COLLATE Modern_Spanish_CI_AS NULL,
	ID_Evento numeric(5,0) DEFAULT 0 NULL,
	CONC_CONTABLE numeric(12,0) DEFAULT 0 NULL,
	CONC_CONTABLE_ME numeric(12,0) DEFAULT 0 NULL,
	CONC_CONTABLE_2 numeric(12,0) DEFAULT 0 NULL,
	CONC_CONTABLE_ME_2 numeric(12,0) DEFAULT 0 NULL,
	CONSTRAINT PK_ITF_MASTER_CAUSALES_01 PRIMARY KEY (ID_SATELITE,COD_CAUSAL)
	);')
	
Execute('DROP TABLE IF EXISTS dbo.ITF_CUENTAS_BEE;

DROP TABLE IF EXISTS dbo.ITF_BEE_CUENTAS;

CREATE TABLE dbo.ITF_BEE_CUENTAS (
	ID BIGINT IDENTITY(1,1) NOT NULL PRIMARY KEY,
	FECHA_ALTA DATETIME NOT NULL,
	FECHA_REHABILITACION DATETIME NULL,
	FECHA_BAJA DATETIME NULL,
	FECHA_ULTIMO_REFRESH DATETIME NULL,
	FECHA_ULTIMO_EXTRACT DATETIME NULL,
	JTS_OID_SALDO NUMERIC(10,0) NOT NULL,
	CUENTA_REDLINK VARCHAR(21) NOT NULL,
	CUIT NUMERIC(13,0) NOT NULL,
	TIPO_CUENTA_DEBITO VARCHAR(2) NOT NULL,
	NUMERO_CUENTA_DEBITO VARCHAR(19) NOT NULL,
	ESTADO VARCHAR(2) NOT NULL,
	CUENTA_PRINCIPAL VARCHAR(1) NOT NULL,
	PRODUCTO NUMERIC(1,0) NOT NULL,
	RECAUDADORA VARCHAR(1) NULL
);')

Execute('DROP TABLE IF EXISTS dbo.BITACORA_BEE_CUENTAS;

CREATE TABLE dbo.BITACORA_BEE_CUENTAS (
	ID BIGINT IDENTITY(1,1) NOT NULL PRIMARY KEY,
	FECHA_PROCESO DATETIME NOT NULL,
	FECHA_RELOJ DATETIME NOT NULL,
	JTS_OID_SALDO NUMERIC(10,0) NOT NULL,
	CUENTA_REDLINK VARCHAR(21) NOT NULL,
	TIPO_CUENTA_DEBITO VARCHAR(2) NOT NULL,
	NUMERO_CUENTA_DEBITO VARCHAR(19) NOT NULL,
	ACCION VARCHAR(2) NOT NULL
);')

Execute('CREATE NONCLUSTERED INDEX VTA_SALDOS_CTA_REDLINK_IDX ON VTA_SALDOS(CTA_REDLINK ASC);

--OPCIONES
DELETE FROM OPCIONES WHERE NUMERODECAMPO = 41294;

INSERT INTO OPCIONES (NUMERODECAMPO,IDIOMA,DESCRIPCION,OPCIONINTERNA,OPCIONDEPANTALLA) VALUES
	 (41294,''E'',''Crédito'',''C'',''C''),
	 (41294,''E'',''Débito'',''D'',''D''),
	 (41294,''E'',''Impacto contable'',''I'',''I''),
	 (41294,''E'',''Transferencia'',''T'',''T'');

--DICCIONARIO
DELETE FROM DICCIONARIO WHERE TABLA = 835;

INSERT INTO DICCIONARIO (NUMERODECAMPO,USODELCAMPO,REFERENCIA,DESCRIPCION,PROMPT,LARGO,TIPODECAMPO,DECIMALES,EDICION,CONTABILIZA,CONCEPTO,CALCULO,VALIDACION,TABLADEVALIDACION,TABLADEAYUDA,OPCIONES,TABLA,CAMPO,BASICO,MASCARA) VALUES
 	 (41284,'' '',0,''Id Satélite'',''Id Satélite'',10,''A'',0,NULL,0,0,0,0,0,0,0,835,''ID_SATELITE'',0,NULL),
	 (41158,'' '',0,''Cod Causal'',''Cód Causal'',10,''A'',0,NULL,0,0,0,0,0,0,0,835,''COD_CAUSAL'',0,NULL),
	 (41159,'' '',0,''Descripcion'',''Descripción'',50,''A'',0,NULL,0,0,0,0,0,0,0,835,''DESCRIPCION'',0,NULL),
	 (41162,'' '',0,''Cod Transaccion'',''Cód Transacción'',5,''N'',0,NULL,0,0,0,0,0,0,0,835,''COD_TRN'',0,NULL),
	 (41163,'' '',0,''Estado'',''Estado'',1,''N'',0,NULL,0,0,0,0,0,0,1,835,''ESTADO'',0,NULL),
	 (41294,'' '',0,''TIPO_MOV'',''TIPO_MOV'',1,''A'',0,NULL,0,0,0,0,0,0,1,835,''TIPO_MOV'',0,NULL),
 	 (41160,'' '',0,''ID_Evento'',''ID_Evento'',5,''N'',0,NULL,0,0,0,0,0,1971,0,835,''ID_Evento'',0,NULL),
	 (41164,'' '',0,''Concepto Contable'',''Concepto Contable'',12,''N'',0,NULL,0,0,0,0,0,66,0,835,''CONC_CONTABLE'',0,NULL),
	 (41377,'' '',0,''Concepto Contable Mda Extranjera'',''Concepto Contable ME'',12,''N'',0,NULL,0,0,0,0,0,66,0,835,''CONC_CONTABLE_ME'',0,NULL),
	 (88164,'' '',0,''Concepto Contable 2'',''Concepto Contable 2'',12,''N'',0,NULL,0,0,0,0,0,66,0,835,''CONC_CONTABLE_2'',0,NULL),
	 (88377,'' '',0,''Concepto contable Mda Extranjera 2'',''Concepto Contable ME 2'',12,''N'',0,NULL,0,0,0,0,0,66,0,835,''CONC_CONTABLE_ME_2'',0,NULL);

--AYUDAS
DELETE FROM AYUDAS WHERE NUMERODEARCHIVO = 835;

INSERT INTO AYUDAS (NUMERODEARCHIVO,NUMERODEAYUDA,DESCRIPCION,FILTRO,MOSTRARTODOS,CAMPOS,CAMPOSVISTA,BASEVISTA,NOMBREVISTA,AYUDAGRANDE) VALUES
	 (835,90819,''Ayuda ITF_MASTER_CAUSALES'','''',0,''41284R;41158R;41159;41162;41163;41294;41160;41164;41377;88164;88377;'',NULL,NULL,NULL,0);



-- Borrar metadatos y tabla de la operación 9988
DELETE FROM DESCRIPTORES WHERE IDENTIFICACION = 836;
DELETE FROM OPERACIONES WHERE IDENTIFICACION = 9988;
DELETE FROM DICCIONARIO WHERE NUMERODECAMPO IN (41165,41167,41285,41295,41169);
DELETE FROM OPCIONES WHERE NUMERODECAMPO = 41295;
DELETE FROM AYUDAS WHERE NUMERODEAYUDA = 90820;')



