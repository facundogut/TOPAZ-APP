


-- Parche_NUNBCHACO_217

-- 
-- HM begin sentence
IF NOT EXISTS (
SELECT *
FROM information_schema.columns
WHERE table_name='CRE_HISTORICO_DEUDA_GARANTIAS'
AND column_name='PORCENTAJE_PREVISION')
BEGIN
ALTER TABLE CRE_HISTORICO_DEUDA_GARANTIAS ADD  PORCENTAJE_PREVISION NUMERIC (5, 2);

END
-- HM end sentence
-- HM begin sentence
IF NOT EXISTS (
SELECT *
FROM information_schema.columns
WHERE table_name='CRE_HISTORICO_DEUDA_GARANTIAS'
AND column_name='PREVISION')
BEGIN
ALTER TABLE CRE_HISTORICO_DEUDA_GARANTIAS ADD  PREVISION NUMERIC (15, 2);

END
-- HM end sentence;

-- Inserta registros en PARAMETROS_JTS
INSERT INTO PARAMETROS_JTS (FUNCIONALIDAD, PARAMETRO, VALOR, TZ_LOCK)
VALUES ('CALCULO_PREVISIONES', 'CANAL', '0', 0);

INSERT INTO PARAMETROS_JTS (FUNCIONALIDAD, PARAMETRO, VALOR, TZ_LOCK)
VALUES ('CALCULO_PREVISIONES', 'DESCRIPCION', 'CALCULO PREVISION EN FUNCION DE CATEGORIA, ATRASO Y GARANTIA', 0);

INSERT INTO PARAMETROS_JTS (FUNCIONALIDAD, PARAMETRO, VALOR, TZ_LOCK)
VALUES ('CALCULO_PREVISIONES', 'OPERACION', '23', 0);

INSERT INTO PARAMETROS_JTS (FUNCIONALIDAD, PARAMETRO, VALOR, TZ_LOCK)
VALUES ('CALCULO_PREVISIONES', 'CATE_BLOQUEO_S', '1', 0);

INSERT INTO PARAMETROS_JTS (FUNCIONALIDAD, PARAMETRO, VALOR, TZ_LOCK)
VALUES ('CALCULO_PREVISIONES', 'TIPO_BCRA', '0', 0);

INSERT INTO OPERACIONES (TITULO, IDENTIFICACION, NOMBRE, DESCRIPCION, MNEMOTECNICO, AUTORIZACION, FORMULARIOPRINCIPAL, PROXOPERACION, ESTADO, TZ_LOCK, COPIAS, SUBOPERACION, PERMITEBAJA, COMPORTAMIENTOENCIERRE, REQUIERECONTRASENA, PERMITECONCURRENTE, PERMITEESTADODIFERIDO)
VALUES ('8600' , '23', 'Calculo Prevision', 'Cal Prev', '23', 'N', NULL, NULL, 'P', 0, NULL, 0, 'S', 'N', 'N', 'S', 'S');

INSERT INTO PARAMETROS_JTS (FUNCIONALIDAD, PARAMETRO, VALOR, TZ_LOCK)
VALUES ('CONTABILIZACION_PREVISIONES', 'CANAL', '0', 0);

INSERT INTO PARAMETROS_JTS (FUNCIONALIDAD, PARAMETRO, VALOR, TZ_LOCK)
VALUES ('CONTABILIZACION_PREVISIONES', 'DESCRIPCION', 'CONTABILIZA PREVISIONES GENERADAS POR PA CALCULO DE PREVISION', 0);

INSERT INTO PARAMETROS_JTS (FUNCIONALIDAD, PARAMETRO, VALOR, TZ_LOCK)
VALUES ('CONTABILIZACION_PREVISIONES', 'OPERACION', '24', 0);

INSERT INTO OPERACIONES (TITULO, IDENTIFICACION, NOMBRE, DESCRIPCION, MNEMOTECNICO, AUTORIZACION, FORMULARIOPRINCIPAL, PROXOPERACION, ESTADO, TZ_LOCK, COPIAS, SUBOPERACION, PERMITEBAJA, COMPORTAMIENTOENCIERRE, REQUIERECONTRASENA, PERMITECONCURRENTE, PERMITEESTADODIFERIDO)
VALUES ('8600' , '24', 'Contabiliza Prevision', 'Cont Prev', '24', 'N', NULL, NULL, 'P', 0, NULL, 0, 'S', 'N', 'N', 'S', 'S');

INSERT INTO PARAMETROS_JTS (FUNCIONALIDAD, PARAMETRO, VALOR, TZ_LOCK)
VALUES ('CONTABILIZACION_PREVISIONES', 'PIVOT_PREVISION', '1', 0);

-- 
-- HM begin sentence
IF EXISTS (
SELECT *
FROM information_schema.columns
WHERE table_name='HISTORICO_CALIF_X_SALDO'
AND column_name='DIAS_ATRASO')
BEGIN
ALTER TABLE HISTORICO_CALIF_X_SALDO ALTER COLUMN DIAS_ATRASO NUMERIC (6)
END
-- HM end sentence;




INSERT INTO BITACORA_HM (ACTUALIZACION,FECHA_APLICADO,TIPO_ACTUALIZACION,ESTADO,SCRIPT_SQL,SCRIPT_SQL_UNDO,ULT_SENTENCIA_OK)  VALUES ('20201216_1NBCH',NULL,'MANUAL','NO_DEFINIDO','CgoNCi0tIFBhcmNoZV9OVU5CQ0hBQ09fMjE3Cg0KLS0gDQotLSBITSBiZWdpbiBzZW50ZW5jZQpJ
RiBOT1QgRVhJU1RTICgKU0VMRUNUICoKRlJPTSBpbmZvcm1hdGlvbl9zY2hlbWEuY29sdW1ucwpX
SEVSRSB0YWJsZV9uYW1lPSdDUkVfSElTVE9SSUNPX0RFVURBX0dBUkFOVElBUycKQU5EIGNvbHVt
bl9uYW1lPSdQT1JDRU5UQUpFX1BSRVZJU0lPTicpCkJFR0lOCkFMVEVSIFRBQkxFIENSRV9ISVNU
T1JJQ09fREVVREFfR0FSQU5USUFTIEFERCAgUE9SQ0VOVEFKRV9QUkVWSVNJT04gTlVNRVJJQyAo
NSwgMik7CgpFTkQKLS0gSE0gZW5kIHNlbnRlbmNlCi0tIEhNIGJlZ2luIHNlbnRlbmNlCklGIE5P
VCBFWElTVFMgKApTRUxFQ1QgKgpGUk9NIGluZm9ybWF0aW9uX3NjaGVtYS5jb2x1bW5zCldIRVJF
IHRhYmxlX25hbWU9J0NSRV9ISVNUT1JJQ09fREVVREFfR0FSQU5USUFTJwpBTkQgY29sdW1uX25h
bWU9J1BSRVZJU0lPTicpCkJFR0lOCkFMVEVSIFRBQkxFIENSRV9ISVNUT1JJQ09fREVVREFfR0FS
QU5USUFTIEFERCAgUFJFVklTSU9OIE5VTUVSSUMgKDE1LCAyKTsKCkVORAotLSBITSBlbmQgc2Vu
dGVuY2U7Cg0KLS0gSW5zZXJ0YSByZWdpc3Ryb3MgZW4gUEFSQU1FVFJPU19KVFMNCklOU0VSVCBJ
TlRPIFBBUkFNRVRST1NfSlRTIChGVU5DSU9OQUxJREFELCBQQVJBTUVUUk8sIFZBTE9SLCBUWl9M
T0NLKQpWQUxVRVMgKCdDQUxDVUxPX1BSRVZJU0lPTkVTJywgJ0NBTkFMJywgJzAnLCAwKTsKCklO
U0VSVCBJTlRPIFBBUkFNRVRST1NfSlRTIChGVU5DSU9OQUxJREFELCBQQVJBTUVUUk8sIFZBTE9S
LCBUWl9MT0NLKQpWQUxVRVMgKCdDQUxDVUxPX1BSRVZJU0lPTkVTJywgJ0RFU0NSSVBDSU9OJywg
J0NBTENVTE8gUFJFVklTSU9OIEVOIEZVTkNJT04gREUgQ0FURUdPUklBLCBBVFJBU08gWSBHQVJB
TlRJQScsIDApOwoKSU5TRVJUIElOVE8gUEFSQU1FVFJPU19KVFMgKEZVTkNJT05BTElEQUQsIFBB
UkFNRVRSTywgVkFMT1IsIFRaX0xPQ0spClZBTFVFUyAoJ0NBTENVTE9fUFJFVklTSU9ORVMnLCAn
T1BFUkFDSU9OJywgJzIzJywgMCk7CgpJTlNFUlQgSU5UTyBQQVJBTUVUUk9TX0pUUyAoRlVOQ0lP
TkFMSURBRCwgUEFSQU1FVFJPLCBWQUxPUiwgVFpfTE9DSykKVkFMVUVTICgnQ0FMQ1VMT19QUkVW
SVNJT05FUycsICdDQVRFX0JMT1FVRU9fUycsICcxJywgMCk7CgpJTlNFUlQgSU5UTyBQQVJBTUVU
Uk9TX0pUUyAoRlVOQ0lPTkFMSURBRCwgUEFSQU1FVFJPLCBWQUxPUiwgVFpfTE9DSykKVkFMVUVT
ICgnQ0FMQ1VMT19QUkVWSVNJT05FUycsICdUSVBPX0JDUkEnLCAnMCcsIDApOwoKSU5TRVJUIElO
VE8gT1BFUkFDSU9ORVMgKFRJVFVMTywgSURFTlRJRklDQUNJT04sIE5PTUJSRSwgREVTQ1JJUENJ
T04sIE1ORU1PVEVDTklDTywgQVVUT1JJWkFDSU9OLCBGT1JNVUxBUklPUFJJTkNJUEFMLCBQUk9Y
T1BFUkFDSU9OLCBFU1RBRE8sIFRaX0xPQ0ssIENPUElBUywgU1VCT1BFUkFDSU9OLCBQRVJNSVRF
QkFKQSwgQ09NUE9SVEFNSUVOVE9FTkNJRVJSRSwgUkVRVUlFUkVDT05UUkFTRU5BLCBQRVJNSVRF
Q09OQ1VSUkVOVEUsIFBFUk1JVEVFU1RBRE9ESUZFUklETykKVkFMVUVTICgnODYwMCcgLCAnMjMn
LCAnQ2FsY3VsbyBQcmV2aXNpb24nLCAnQ2FsIFByZXYnLCAnMjMnLCAnTicsIE5VTEwsIE5VTEws
ICdQJywgMCwgTlVMTCwgMCwgJ1MnLCAnTicsICdOJywgJ1MnLCAnUycpOwoKSU5TRVJUIElOVE8g
UEFSQU1FVFJPU19KVFMgKEZVTkNJT05BTElEQUQsIFBBUkFNRVRSTywgVkFMT1IsIFRaX0xPQ0sp
ClZBTFVFUyAoJ0NPTlRBQklMSVpBQ0lPTl9QUkVWSVNJT05FUycsICdDQU5BTCcsICcwJywgMCk7
CgpJTlNFUlQgSU5UTyBQQVJBTUVUUk9TX0pUUyAoRlVOQ0lPTkFMSURBRCwgUEFSQU1FVFJPLCBW
QUxPUiwgVFpfTE9DSykKVkFMVUVTICgnQ09OVEFCSUxJWkFDSU9OX1BSRVZJU0lPTkVTJywgJ0RF
U0NSSVBDSU9OJywgJ0NPTlRBQklMSVpBIFBSRVZJU0lPTkVTIEdFTkVSQURBUyBQT1IgUEEgQ0FM
Q1VMTyBERSBQUkVWSVNJT04nLCAwKTsKCklOU0VSVCBJTlRPIFBBUkFNRVRST1NfSlRTIChGVU5D
SU9OQUxJREFELCBQQVJBTUVUUk8sIFZBTE9SLCBUWl9MT0NLKQpWQUxVRVMgKCdDT05UQUJJTEla
QUNJT05fUFJFVklTSU9ORVMnLCAnT1BFUkFDSU9OJywgJzI0JywgMCk7CgpJTlNFUlQgSU5UTyBP
UEVSQUNJT05FUyAoVElUVUxPLCBJREVOVElGSUNBQ0lPTiwgTk9NQlJFLCBERVNDUklQQ0lPTiwg
TU5FTU9URUNOSUNPLCBBVVRPUklaQUNJT04sIEZPUk1VTEFSSU9QUklOQ0lQQUwsIFBST1hPUEVS
QUNJT04sIEVTVEFETywgVFpfTE9DSywgQ09QSUFTLCBTVUJPUEVSQUNJT04sIFBFUk1JVEVCQUpB
LCBDT01QT1JUQU1JRU5UT0VOQ0lFUlJFLCBSRVFVSUVSRUNPTlRSQVNFTkEsIFBFUk1JVEVDT05D
VVJSRU5URSwgUEVSTUlURUVTVEFET0RJRkVSSURPKQpWQUxVRVMgKCc4NjAwJyAsICcyNCcsICdD
b250YWJpbGl6YSBQcmV2aXNpb24nLCAnQ29udCBQcmV2JywgJzI0JywgJ04nLCBOVUxMLCBOVUxM
LCAnUCcsIDAsIE5VTEwsIDAsICdTJywgJ04nLCAnTicsICdTJywgJ1MnKTsKCklOU0VSVCBJTlRP
IFBBUkFNRVRST1NfSlRTIChGVU5DSU9OQUxJREFELCBQQVJBTUVUUk8sIFZBTE9SLCBUWl9MT0NL
KQpWQUxVRVMgKCdDT05UQUJJTElaQUNJT05fUFJFVklTSU9ORVMnLCAnUElWT1RfUFJFVklTSU9O
JywgJzEnLCAwKTsKDQotLSANCi0tIEhNIGJlZ2luIHNlbnRlbmNlCklGIEVYSVNUUyAoClNFTEVD
VCAqCkZST00gaW5mb3JtYXRpb25fc2NoZW1hLmNvbHVtbnMKV0hFUkUgdGFibGVfbmFtZT0nSElT
VE9SSUNPX0NBTElGX1hfU0FMRE8nCkFORCBjb2x1bW5fbmFtZT0nRElBU19BVFJBU08nKQpCRUdJ
TgpBTFRFUiBUQUJMRSBISVNUT1JJQ09fQ0FMSUZfWF9TQUxETyBBTFRFUiBDT0xVTU4gRElBU19B
VFJBU08gTlVNRVJJQyAoNikKRU5ECi0tIEhNIGVuZCBzZW50ZW5jZTsKDQoKCg0K', NULL, 0);
