--METADATA CIERRE DE EJERCICIO

EXECUTE('IF EXISTS (SELECT * FROM PARAMETROS_JTS WHERE FUNCIONALIDAD = ''ACTUALIZACION_RESULTADOS'' AND PARAMETRO = ''OPERACION'')
BEGIN

 DELETE FROM PARAMETROS_JTS WHERE FUNCIONALIDAD = ''ACTUALIZACION_RESULTADOS'' AND PARAMETRO = ''OPERACION'';
 
INSERT INTO PARAMETROS_JTS (FUNCIONALIDAD, PARAMETRO, VALOR, TZ_LOCK)
VALUES (''ACTUALIZACION_RESULTADOS'', ''OPERACION'', ''66'', 0)

END
ELSE
BEGIN

INSERT INTO PARAMETROS_JTS (FUNCIONALIDAD, PARAMETRO, VALOR, TZ_LOCK)
VALUES (''ACTUALIZACION_RESULTADOS'', ''OPERACION'', ''66'', 0)

END


IF EXISTS (SELECT * FROM OPERACIONES WHERE IDENTIFICACION = 66)
BEGIN

DELETE FROM OPERACIONES WHERE IDENTIFICACION = 66;

INSERT INTO OPERACIONES (TITULO, IDENTIFICACION, NOMBRE, DESCRIPCION, MNEMOTECNICO, AUTORIZACION, FORMULARIOPRINCIPAL, PROXOPERACION, ESTADO, TZ_LOCK, COPIAS, SUBOPERACION, PERMITEBAJA, COMPORTAMIENTOENCIERRE, REQUIERECONTRASENA, PERMITECONCURRENTE, PERMITEESTADODIFERIDO, ICONO_TITULO, ESTILO)
VALUES (8600, 66, ''CBL - Cierre de ejercicio Actualización Result'', ''Cierre de ejercicio'', ''66'', ''N'', NULL, NULL, ''P'', 0, NULL, 0, ''S'', ''N'', ''N'', ''S'', ''S'', NULL, NULL)


END
ELSE
BEGIN

INSERT INTO OPERACIONES (TITULO, IDENTIFICACION, NOMBRE, DESCRIPCION, MNEMOTECNICO, AUTORIZACION, FORMULARIOPRINCIPAL, PROXOPERACION, ESTADO, TZ_LOCK, COPIAS, SUBOPERACION, PERMITEBAJA, COMPORTAMIENTOENCIERRE, REQUIERECONTRASENA, PERMITECONCURRENTE, PERMITEESTADODIFERIDO, ICONO_TITULO, ESTILO)
VALUES (8600, 66, ''CBL - Cierre de ejercicio Actualización Result'', ''Cierre de ejercicio'', ''66'', ''N'', NULL, NULL, ''P'', 0, NULL, 0, ''S'', ''N'', ''N'', ''S'', ''S'', NULL, NULL)


END

IF EXISTS (SELECT * FROM OPERACIONES WHERE IDENTIFICACION = 8671)
BEGIN

DELETE FROM OPERACIONES WHERE IDENTIFICACION = 8671;

INSERT INTO OPERACIONES (TITULO, IDENTIFICACION, NOMBRE, DESCRIPCION, MNEMOTECNICO, AUTORIZACION, FORMULARIOPRINCIPAL, PROXOPERACION, ESTADO, TZ_LOCK, COPIAS, SUBOPERACION, PERMITEBAJA, COMPORTAMIENTOENCIERRE, REQUIERECONTRASENA, PERMITECONCURRENTE, PERMITEESTADODIFERIDO, ICONO_TITULO, ESTILO)
VALUES (8600, 8671, ''CBL - Cierre de ejercicio Obtener G y P'', ''Cierre de ejercicio'', ''8671'', ''N'', NULL, NULL, ''P'', 0, NULL, 0, ''S'', ''N'', ''N'', ''S'', ''S'', NULL, NULL)


END
ELSE
BEGIN

INSERT INTO OPERACIONES (TITULO, IDENTIFICACION, NOMBRE, DESCRIPCION, MNEMOTECNICO, AUTORIZACION, FORMULARIOPRINCIPAL, PROXOPERACION, ESTADO, TZ_LOCK, COPIAS, SUBOPERACION, PERMITEBAJA, COMPORTAMIENTOENCIERRE, REQUIERECONTRASENA, PERMITECONCURRENTE, PERMITEESTADODIFERIDO, ICONO_TITULO, ESTILO)
VALUES (8600, 8671, ''CBL - Cierre de ejercicio Obtener G y P'', ''Cierre de ejercicio'', ''8671'', ''N'', NULL, NULL, ''P'', 0, NULL, 0, ''S'', ''N'', ''N'', ''S'', ''S'', NULL, NULL)

END

')