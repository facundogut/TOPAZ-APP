EXECUTE('
IF OBJECT_ID (''dbo.VW_EXCLUSIONES_PRODUCTOS'') IS NOT NULL
	DROP VIEW dbo.VW_EXCLUSIONES_PRODUCTOS
')

EXECUTE ('
CREATE VIEW dbo.VW_EXCLUSIONES_PRODUCTOS AS (
SELECT 
EP.TIPO AS ''Tipo'',
O.DESCRIPCION AS ''Descripción Tipo'',
EP.ITEM AS ''Item'',  
CASE WHEN EP.TIPO=''F'' THEN F.DESCRIPCION    
     WHEN EP.TIPO=''P'' THEN P.C6251
    ELSE ''Sin Descripción'' END AS ''Descripción Item'',
O2.DESCRIPCION AS ''Graduación'',
O3.DESCRIPCION AS ''Fraccionamiento''
FROM CRE_EXCLUSIONES_PRODUCTOS AS EP WITH(NOLOCK)
LEFT JOIN PRODUCTOS AS P WITH(NOLOCK) ON EP.ITEM=P.C6250
LEFT JOIN CRE_FAMILIAS AS F WITH(NOLOCK) ON EP.ITEM=F.FAMILIAPROD
LEFT JOIN OPCIONES AS O WITH(NOLOCK) ON O.NUMERODECAMPO=44033 AND O.OPCIONINTERNA=EP.TIPO
LEFT JOIN OPCIONES AS O2 WITH(NOLOCK) ON O2.NUMERODECAMPO=44035 AND O2.OPCIONINTERNA=EP.GRADUACION
LEFT JOIN OPCIONES AS O3 WITH(NOLOCK) ON O3.NUMERODECAMPO=44036 AND O3.OPCIONINTERNA=EP.FRACCIONAMIENTO
WHERE EP.TZ_LOCK=0
)

')

EXECUTE('
INSERT INTO dbo.AYUDAS (NUMERODEARCHIVO, NUMERODEAYUDA, DESCRIPCION, FILTRO, MOSTRARTODOS, CAMPOS, CAMPOSVISTA, BASEVISTA, NOMBREVISTA, AYUDAGRANDE)
VALUES (0, 49300, ''Vista Exclusiones Productos'', '''', 0, ''378R;2613R;523;9113;375;328;'', ''Tipo;Item;Descripción Tipo;Descripción Item;Graduación;Fraccionamiento;'', ''TOP/CLIENTES'', ''VW_EXCLUSIONES_PRODUCTOS'', 0)

')

EXECUTE('
INSERT INTO dbo.DICCIONARIO (NUMERODECAMPO, USODELCAMPO, REFERENCIA, DESCRIPCION, PROMPT, LARGO, TIPODECAMPO, DECIMALES, EDICION, CONTABILIZA, CONCEPTO, CALCULO, VALIDACION, TABLADEVALIDACION, TABLADEAYUDA, OPCIONES, TABLA, CAMPO, BASICO, MASCARA)
VALUES (90100, '''', 0, ''Vista Exclusiones Productos'', ''Vista Exclusiones Productos'', 1, ''A'', 0, NULL, 0, 0, 0, 0, 0, 49300, 0, 0, ''Vista Exclusiones Productos'', 0, NULL)

')