-- Creación tabla maestro y constraints

DROP TABLE IF EXISTS dbo.ITF_LK_CAF_TARJETAS;

CREATE TABLE dbo.ITF_LK_CAF_TARJETAS (
	NRO_TARJETA VARCHAR(19) NOT NULL PRIMARY KEY,
	NRO_MIEMBRO VARCHAR(3) NOT NULL,
	TIPO_TARJETA VARCHAR(2) NOT NULL,
	ESTADO_TARJETA VARCHAR(1) NOT NULL,
	FECHA_VENCIMIENTO VARCHAR(4) NOT NULL,
	FECHA_PRIMER_USO DATE NULL,
	FECHA_ULTIMO_USO DATE NULL,
	LINK_SOLUCION VARCHAR(1) NOT NULL,
	MARCA_CVC VARCHAR(1) NOT NULL,
	CAMBIO_PIN VARCHAR(1) NOT NULL,
	EMISION_PIN_COMPRA VARCHAR(1) NOT NULL,
	CANT_CUENTAS NUMERIC(2,0) NOT NULL
);

-- Creación tabla cuentas y constraints

DROP TABLE IF EXISTS dbo.ITF_LK_CAF_CUENTAS;

CREATE TABLE dbo.ITF_LK_CAF_CUENTAS (
	NRO_TARJETA VARCHAR(19) NOT NULL,
	ORDEN_CUENTA NUMERIC(2,0) NOT NULL,
	TIPO_CUENTA VARCHAR(2) NOT NULL,
	NRO_CUENTA VARCHAR(19) NOT NULL,
	ESTADO_CUENTA VARCHAR(1) NOT NULL,
	SALDO_JTS_OID NUMERIC(10,0) NULL,
	CONSTRAINT PK_ITF_LK_CAF_CUENTAS_01 PRIMARY KEY (NRO_TARJETA, ORDEN_CUENTA)
);