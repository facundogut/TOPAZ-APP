EXECUTE('
WHILE EXISTS(SELECT * FROM PERMISOSGRUPO WHERE FORMULA LIKE ''%C9503[=#][0-9][0-9][0-9][0-9]%'')
BEGIN
	WITH REEMPLAZOS AS (
		SELECT *,
			STUFF((STUFF(FORMULA, PATINDEX(''%C9503[=#][0-9][0-9][0-9][0-9]%'',FORMULA) + 10, 0, ''"'')), PATINDEX(''%C9503[=#][0-9][0-9][0-9][0-9]%'',FORMULA) + 6, 0, ''"'') AS REPLACE_VALUE
		FROM PERMISOSGRUPO AS P WITH (nolock) 
		WHERE
			P.FORMULA LIKE ''%C9503[=#][0-9][0-9][0-9][0-9]%''
	)
	UPDATE P
		SET P.FORMULA = R.REPLACE_VALUE
	FROM PERMISOSGRUPO AS P
	INNER JOIN REEMPLAZOS AS R ON
		R.GRUPO = P.GRUPO
		AND R.PERMISO = P.PERMISO
END
')