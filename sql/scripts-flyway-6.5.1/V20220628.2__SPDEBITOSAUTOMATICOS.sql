Execute('
CREATE OR ALTER PROCEDURE SP_DEBITOSAUTOMATICOS @NRO_CUENTA NUMERIC(11,0),@TIPO_CUENTA NUMERIC(1,0),@JTS_OID NUMERIC(10,0) OUTPUT,@ERRORS VARCHAR(50) OUTPUT
AS
DECLARE @cant_cuenta NUMERIC(5,0) = 0;

IF @NRO_CUENTA = 0
	BEGIN
		SET @JTS_OID=0;
	END
ELSE
	BEGIN
   	SET @cant_cuenta = (	SELECT count(*) 
							FROM SALDOS  WITH (NOLOCK)
							WHERE CUENTA=@NRO_CUENTA AND MONEDA=1 AND  C1785 = @TIPO_CUENTA 
							AND TZ_LOCK=0);
							
   	IF @cant_cuenta = 0  -- Numero de cuenta inexistente.
   		BEGIN
   			SET @ERRORS = CONCAT(@ERRORS,''NroCuenta Inexistente '');
  		END
  	ELSE 
  		BEGIN
  			SET @JTS_OID = (SELECT JTS_OID 
							FROM SALDOS  WITH (NOLOCK)
							WHERE CUENTA=@NRO_CUENTA AND MONEDA=1 AND  C1785 = @TIPO_CUENTA 
							AND TZ_LOCK=0)
  		END
 	END
')

