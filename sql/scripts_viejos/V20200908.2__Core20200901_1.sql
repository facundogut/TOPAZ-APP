-- Patch_NUAGIBANK_520

-- Patch NUSICREDBR-2195

create table HISTORICO_EVENTO_GENERICO
 (
   ID                 VARCHAR(70) not null,
   ID_EVENTO          NUMERIC(5) not null,
   CODIGO_TRANSACCION NUMERIC(5) not null,
   DESCRIPTOR         NUMERIC(5),
   SUCURSAL           NUMERIC(5) not null,
   EMPRESA            NUMERIC(4) default (0),
   SUCURSAL_EMPRESA   VARCHAR(5) default (' '),	  
   FECHA_PROCESO       DATE not null,
   DATO               VARCHAR (max) NULL,
   CANAL              VARCHAR(10),
   SUB_CANAL          VARCHAR(10),
   FECHA_ENVIO DATETIME NULL DEFAULT GETDATE()
);

alter table HISTORICO_EVENTO_GENERICO
   add constraint PK_HISTORICO_EVENTO_GENERICO primary key (ID);

create table HISTORICO_EVENTO_GENERICO_PK
 (
   PK                 VARCHAR(70) not null, 
   ID                 VARCHAR(70) not null,
   ID_EVENTO          NUMERIC(5) not null,
   CODIGO_TRANSACCION NUMERIC(5) not null,
       DESCRIPTOR         NUMERIC(5),	 
   SUCURSAL           NUMERIC(5) not null,
       EMPRESA            NUMERIC(4) default (0),
       SUCURSAL_EMPRESA   VARCHAR(5) default (' '),
   FECHA_PROCESO       DATE not null,
   DATO               VARCHAR (max) ,
   CANAL              VARCHAR(10),
   SUB_CANAL          VARCHAR(10),
   FECHA_ENVIO DATETIME NULL DEFAULT GETDATE()
 );

alter TABLE HISTORICO_EVENTO_GENERICO_PK
   add constraint PK_HISTORICO_EVENTO_GENERICO_1 primary key (PK);




INSERT INTO BITACORA_HM (ACTUALIZACION,FECHA_APLICADO,TIPO_ACTUALIZACION,ESTADO,SCRIPT_SQL,SCRIPT_SQL_UNDO,ULT_SENTENCIA_OK)  VALUES ('20200901_1',NULL,'MANUAL','NO_DEFINIDO','CgoNCi0tIFBhdGNoX05VQUdJQkFOS181MjAKDQotLSBQYXRjaCBOVVNJQ1JFREJSLTIxOTUKDQpj
cmVhdGUgdGFibGUgSElTVE9SSUNPX0VWRU5UT19HRU5FUklDTwogKAogICBJRCAgICAgICAgICAg
ICAgICAgVkFSQ0hBUig3MCkgbm90IG51bGwsCiAgIElEX0VWRU5UTyAgICAgICAgICBOVU1FUklD
KDUpIG5vdCBudWxsLAogICBDT0RJR09fVFJBTlNBQ0NJT04gTlVNRVJJQyg1KSBub3QgbnVsbCwK
ICAgICAgIERFU0NSSVBUT1IgICAgICAgICBOVU1FUklDKDUpLAogICBTVUNVUlNBTCAgICAgICAg
ICAgTlVNRVJJQyg1KSBub3QgbnVsbCwKICAgICAgIEVNUFJFU0EgICAgICAgICAgICBOVU1CRVIo
NCkgZGVmYXVsdCAoMCksCiAgICAgICBTVUNVUlNBTF9FTVBSRVNBICAgVkFSQ0hBUig1KSBkZWZh
dWx0ICgnICcpLAkgIAogICBGRUNIQV9QUk9DRVNPICAgICAgIERBVEUgbm90IG51bGwsCiAgIERB
VE8gICAgICAgICAgICAgICBDTE9CLAogICBDQU5BTCAgICAgICAgICAgICAgVkFSQ0hBUigxMCks
CiAgIFNVQl9DQU5BTCAgICAgICAgICBWQVJDSEFSKDEwKSwKICAgRkVDSEFfRU5WSU8gREFURVRJ
TUUgTlVMTCBERUZBVUxUIEdFVERBVEUoKTsKCik7CgphbHRlciB0YWJsZSBISVNUT1JJQ09fRVZF
TlRPX0dFTkVSSUNPCiAgIGFkZCBjb25zdHJhaW50IFBLX0hJU1RPUklDT19FVkVOVE9fR0VORVJJ
Q08gcHJpbWFyeSBrZXkgKElEKTsKCmNyZWF0ZSB0YWJsZSBISVNUT1JJQ09fRVZFTlRPX0dFTkVS
SUNPX1BLCiAoCiAgIFBLICAgICAgICAgICAgICAgICBWQVJDSEFSKDcwKSBub3QgbnVsbCwgCiAg
IElEICAgICAgICAgICAgICAgICBWQVJDSEFSKDcwKSBub3QgbnVsbCwKICAgSURfRVZFTlRPICAg
ICAgICAgIE5VTUVSSUMoNSkgbm90IG51bGwsCiAgIENPRElHT19UUkFOU0FDQ0lPTiBOVU1FUklD
KDUpIG5vdCBudWxsLAogICAgICAgREVTQ1JJUFRPUiAgICAgICAgIE5VTUVSSUMoNSksCSAKICAg
U1VDVVJTQUwgICAgICAgICAgIE5VTUVSSUMoNSkgbm90IG51bGwsCiAgICAgICBFTVBSRVNBICAg
ICAgICAgICAgTlVNRVJJQyg0KSBkZWZhdWx0ICgwKSwKICAgICAgIFNVQ1VSU0FMX0VNUFJFU0Eg
ICBWQVJDSEFSKDUpIGRlZmF1bHQgKCcgJyksCiAgIEZFQ0hBX1BST0NFU08gICAgICAgREFURSBu
b3QgbnVsbCwKICAgREFUTyAgICAgICAgICAgICAgIENMT0IsCiAgIENBTkFMICAgICAgICAgICAg
ICBWQVJDSEFSKDEwKSwKICAgU1VCX0NBTkFMICAgICAgICAgIFZBUkNIQVIoMTApLAogICBGRUNI
QV9FTlZJTyBEQVRFVElNRSBOVUxMIERFRkFVTFQgR0VUREFURSgpCiApOwoKYWx0ZXIgSElTVE9S
SUNPX0VWRU5UT19HRU5FUklDT19QSwogICBhZGQgY29uc3RyYWludCBQS19ISVNUT1JJQ09fRVZF
TlRPX0dFTkVSSUNPXzEgcHJpbWFyeSBrZXkgKFBLKTsKDQoKCg0K', NULL, 0);
