EXECUTE('ALTER VIEW dbo.VW_PERSONAS_F_Y_J (  NUMEROPERSONA,  TipoDocIdent,   NroDocIdent,   TipoDocFisico,  NumDocFisico,  NIVELAPERTURA,   TIPOPERSONA,   NOMBRE)AS/* * Identificador del cambio:  #001 * Propietario del Cambio:    ALVAROC (Álvaro Correa - Topaz) * Fecha (dd/mm/yyyy):        12/10/2020 * Nro. Caso:                 NBCHSEG-234 * Código Jira:               NBCHSEG-234 * Descripción breve: Se cambia el campo "NOMBRE" para que en caso de persona *                      física/humana se devuelva en formato  *                      "Apellido/s, Nombre/s". *                      También se agrega la descripción del tipo de persona.*/SELECT  V.NUMEROPERSONAFJ AS NUMEROPERSONA,         V.TIPODOCUMENTO   AS TipoDocIdent,         V.NUMERODOCUMENTO AS NroDocIdent,         V.TIPO_DOC_FISICO AS TIPO_DOC_FISICO,        V.NUM_DOC_FISICO  AS NUM_DOC_FISICO,        (          CASE U.NIVEL_APERTURA            WHEN 0 THEN ''REGISTRO''            WHEN 1 THEN ''BÁSICO''            WHEN 3 THEN ''ACTIVOS''          END        ) AS NIVELAPERTURA,        -- INICIO #001        (V.TIPOPERSONA + '' - '' + o.DESCRIPCION) AS TIPOPERSONA,        (          RTRIM(            ISNULL(U.APELLIDOPATERNO+'' '', '''') +              ISNULL(U.APELLIDOMATERNO+'' '', '''')          ) + '', '' + ISNULL(U.PRIMERNOMBRE, '''') + '' '' +            ISNULL(U.SEGUNDONOMBRE, '''')        ) AS NOMBRE        -- FIN #001FROM    dbo.CLI_PERSONASFISICAS U (nolock),        dbo.CLI_DOCUMENTOSPFPJ V (nolock)        INNER JOIN  OPCIONES o (nolock)          ON  o.NUMERODECAMPO = 1241              AND              o.IDIOMA = ''E''              AND              o.OPCIONINTERNA = V.TIPOPERSONAWHERE   (U.NUMEROPERSONAFISICA = V.NUMEROPERSONAFJ)        AND        (          (U.TZ_LOCK < 300000000000000 OR U.TZ_LOCK >= 400000000000000)          AND          (U.TZ_LOCK < 100000000000000 OR U.TZ_LOCK >= 200000000000000)        )        AND        (          (V.TZ_LOCK < 300000000000000 OR V.TZ_LOCK >= 400000000000000)          AND          (V.TZ_LOCK < 100000000000000 OR V.TZ_LOCK >= 200000000000000)        )--UNION ALL--SELECT  V.NUMEROPERSONAFJ AS NUMEROPERSONA,         V.TIPODOCUMENTO   AS TipoDocIdent,         V.NUMERODOCUMENTO AS NroDocIdent,         V.TIPO_DOC_FISICO AS TIPO_DOC_FISICO,        V.NUM_DOC_FISICO  AS NUM_DOC_FISICO,        (          CASE S.NIVEL_APERTURA            WHEN 0 THEN ''REGISTRO''            WHEN 1 THEN ''BÁSICO''            WHEN 3 THEN ''ACTIVOS''            WHEN 4 THEN ''INST. FINANCIERA''          END        ) AS NIVELAPERTURA,        -- INICIO #001        (V.TIPOPERSONA + '' - '' + o.DESCRIPCION) AS TIPOPERSONA,        -- FIN #001        S.RAZONSOCIAL AS NOMBREFROM    dbo.CLI_PERSONASJURIDICAS S (nolock),        dbo.CLI_DOCUMENTOSPFPJ V (nolock)        INNER JOIN  OPCIONES o (nolock)          ON  o.NUMERODECAMPO = 1241              AND              o.IDIOMA = ''E''              AND              o.OPCIONINTERNA = V.TIPOPERSONAWHERE   (S.NUMEROPERSONAJURIDICA = V.NUMEROPERSONAFJ)        AND        (          (S.TZ_LOCK < 300000000000000 OR S.TZ_LOCK >= 400000000000000)          AND          (S.TZ_LOCK < 100000000000000 OR S.TZ_LOCK >= 200000000000000)        )        AND        (          (V.TZ_LOCK < 300000000000000 OR V.TZ_LOCK >= 400000000000000)          AND          (V.TZ_LOCK < 100000000000000 OR V.TZ_LOCK >= 200000000000000)        );');