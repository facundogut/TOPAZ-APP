Execute('-- Banca Digital
IF EXISTS (SELECT 1 FROM sys.indexes WHERE name = ''IX_DBA_NBCH24_C1785'' AND object_id = OBJECT_ID(''dbo.SALDOS''))
    DROP INDEX [IX_DBA_NBCH24_C1785] ON [dbo].[SALDOS];
CREATE NONCLUSTERED INDEX [IX_DBA_NBCH24_C1785] ON [dbo].[SALDOS] ([C1785]) INCLUDE ([C1803],[JTS_OID]);')

Execute('IF EXISTS (SELECT 1 FROM sys.indexes WHERE name = ''scoring_prestamos'' AND object_id = OBJECT_ID(''dbo.SALDOS''))
	DROP INDEX [scoring_prestamos] ON [dbo].[SALDOS];')
Execute('IF EXISTS (SELECT 1 FROM sys.indexes WHERE name = ''IX_DBA_NBCH24_TZ_LOCK'' AND object_id = OBJECT_ID(''dbo.SALDOS''))
CREATE NONCLUSTERED INDEX [IX_DBA_NBCH24_TZ_LOCK] ON [dbo].[SALDOS] ([TZ_LOCK] ASC,	[C1785] ASC) INCLUDE([C1803],[JTS_OID]);')

Execute('IF EXISTS (SELECT 1 FROM sys.indexes WHERE name = ''IX_DBA_NBCH24_SALDO_JTS_OID'' AND object_id = OBJECT_ID(''dbo.HISTORIA_VISTA''))
    DROP INDEX [IX_DBA_NBCH24_SALDO_JTS_OID] ON [dbo].[HISTORIA_VISTA];
CREATE NONCLUSTERED INDEX [IX_DBA_NBCH24_SALDO_JTS_OID] ON [dbo].[HISTORIA_VISTA] ([SALDO_JTS_OID],[MONTO]);')

Execute('IF EXISTS (SELECT 1 FROM sys.indexes WHERE name = ''IX_DBA_NBCH24_ID_ENTIDAD2'' AND object_id = OBJECT_ID(''dbo.PYF_APODERADOS''))
    DROP INDEX [IX_DBA_NBCH24_ID_ENTIDAD2] ON [dbo].[PYF_APODERADOS];
CREATE NONCLUSTERED INDEX [IX_DBA_NBCH24_ID_ENTIDAD2] ON [dbo].[PYF_APODERADOS] ([ID_ENTIDAD2] ASC);')

Execute('IF EXISTS (SELECT 1 FROM sys.indexes WHERE name = ''IX_DBA_NBCH24_DIM1'' AND object_id = OBJECT_ID(''dbo.CLI_LOCALIDADES''))
    DROP INDEX [IX_DBA_NBCH24_DIM1] ON [dbo].[CLI_LOCALIDADES];
CREATE NONCLUSTERED INDEX [IX_DBA_NBCH24_DIM1] ON [dbo].[CLI_LOCALIDADES] ([DIM1],[DIM2],[DIM3],[TZ_LOCK]) INCLUDE ([DESCRIPCION_DIM3]);')

Execute('
--Pruebas con sucursales
IF EXISTS (SELECT 1 FROM sys.indexes WHERE name = ''SALDOS_IDX01'' AND object_id = OBJECT_ID(''dbo.SALDOS''))
    DROP INDEX [SALDOS_IDX01] ON [dbo].[SALDOS];
CREATE UNIQUE INDEX [SALDOS_IDX01] ON [dbo].[SALDOS] ([SUCURSAL] ASC,[PRODUCTO] ASC,[MONEDA] ASC,[CUENTA] ASC,[OPERACION] ASC,[ORDINAL] ASC);')

Execute('IF EXISTS (SELECT 1 FROM sys.indexes WHERE name = ''IX_DBA_APP_NRO_GARANTIA'' AND object_id = OBJECT_ID(''dbo.CRE_HISTORICO_DEUDA_GARANTIAS''))
    DROP INDEX [IX_DBA_APP_NRO_GARANTIA] ON [dbo].[CRE_HISTORICO_DEUDA_GARANTIAS];
CREATE NONCLUSTERED INDEX [IX_DBA_APP_NRO_GARANTIA] ON [dbo].[CRE_HISTORICO_DEUDA_GARANTIAS]([NRO_GARANTIA] ASC)INCLUDE([MONTO_GARANTIZADO_MG]);')

Execute('IF EXISTS (SELECT 1 FROM sys.indexes WHERE name = ''IX_DBA_APP_POSTING'' AND object_id = OBJECT_ID(''dbo.REPORTS''))
    DROP INDEX [IX_DBA_APP_POSTING] ON [dbo].[REPORTS];
CREATE NONCLUSTERED INDEX [IX_DBA_APP_POSTING] ON [dbo].[REPORTS]( [POSTING] ASC,[PROCESSDATE] ASC, [BRANCH] ASC);')

Execute('IF EXISTS (SELECT 1 FROM sys.indexes WHERE name = ''IX_DBA_ESTADO'' AND object_id = OBJECT_ID(''dbo.ASIENTOS''))
    DROP INDEX [IX_DBA_ESTADO] ON [dbo].[ASIENTOS];
CREATE NONCLUSTERED INDEX [IX_DBA_ESTADO] ON [dbo].[ASIENTOS]([ESTADO] ASC,[SUCURSAL] ASC,[FECHAPROCESO] ASC,[INIUSR] ASC) INCLUDE([ORDINAL],[OPERACION],[DESCRIPCION],[HORAINICIO],[HORAFIN],[PROXST],[INIUSRBAJA],[SECTOR],[PROCESSMANAGERID],[EXTORNO]);')

Execute('IF EXISTS (SELECT 1 FROM sys.indexes WHERE name = ''IX_DBA_APP_MONTO_MAX_INDIV'' AND object_id = OBJECT_ID(''dbo.PYF_APODERADOS''))
    DROP INDEX [IX_DBA_APP_MONTO_MAX_INDIV] ON [dbo].[PYF_APODERADOS];
CREATE NONCLUSTERED INDEX [IX_DBA_APP_MONTO_MAX_INDIV] ON [dbo].[PYF_APODERADOS] ([MONTO_MAX_INDIV]) INCLUDE ([TZ_LOCK],[CATEGORIA],[MONEDA_MONTO_INDIV],[MONEDA_MONTO_GRUPAL],[MONTO_MAX_GRUPAL],[FECHA_VENCIMIENTO],[FECHA_INI_VIGENCIA],[FECHA_INI_SUSPENSION],[FECHA_FIN_SUSPENSION],[APODERAMIENTO],[ID_CLIENTE_SALDO],[ID_ENTIDAD2]);')

Execute('IF EXISTS (SELECT 1 FROM sys.indexes WHERE name = ''IX_DBA_APP_ID_PERSONA'' AND object_id = OBJECT_ID(''dbo.PYF_APODERADOS''))
    DROP INDEX [IX_DBA_APP_ID_PERSONA] ON [dbo].[PYF_APODERADOS];
CREATE NONCLUSTERED INDEX [IX_DBA_APP_ID_PERSONA] ON [dbo].[PYF_APODERADOS] ([ID_PERSONA]) INCLUDE ([TZ_LOCK],[CATEGORIA],[MONEDA_MONTO_INDIV],[MONTO_MAX_INDIV],[MONEDA_MONTO_GRUPAL],[MONTO_MAX_GRUPAL],[FECHA_VENCIMIENTO],[FECHA_INI_VIGENCIA],[FECHA_INI_SUSPENSION],[FECHA_FIN_SUSPENSION],[APODERAMIENTO],[ID_CLIENTE_SALDO],[ID_ENTIDAD2]);')

Execute('IF EXISTS (SELECT 1 FROM sys.indexes WHERE name = ''IX_DBA_POS_ELEMENT0'' AND object_id = OBJECT_ID(''dbo.TP_TOPAZPOSCONTROL''))
    DROP INDEX [IX_DBA_POS_ELEMENT0] ON [dbo].[TP_TOPAZPOSCONTROL];
CREATE NONCLUSTERED INDEX [IX_DBA_POS_ELEMENT0] ON [dbo].[TP_TOPAZPOSCONTROL] ([ELEMENT0],[ELEMENT13],[ELEMENT37],[ELEMENT41]);')

Execute('IF EXISTS (SELECT 1 FROM sys.indexes WHERE name = ''IX_DBA_TIPO_PODER'' AND object_id = OBJECT_ID(''dbo.PYF_APODERADOS''))
    DROP INDEX [IX_DBA_TIPO_PODER] ON [dbo].[PYF_APODERADOS];
CREATE NONCLUSTERED INDEX [IX_DBA_TIPO_PODER] ON [dbo].[PYF_APODERADOS] ([TIPO_PODER],[TIPO_ENTIDAD],[TZ_LOCK]);')