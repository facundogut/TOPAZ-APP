execute('
CREATE OR ALTER PROCEDURE SP_ITF_BUSCO_PERSONAS_EN_COMUN_ENTRE_SALDOS(
@P_JTSOID_1 NUMERIC(10,0),
@P_JTSOID_2 NUMERIC(10,0),
@O_RETORNO  NUMERIC (1,0) OUTPUT) 

AS
BEGIN
	DECLARE @V_COUNT NUMERIC(5);
	
	SELECT @V_COUNT = COUNT(1)
	FROM CLI_ClientePersona c1 WITH (NOLOCK)
	JOIN CLI_ClientePersona c2 WITH (NOLOCK) ON c1.NUMEROPERSONA = c2.NUMEROPERSONA AND c1.CODIGOCLIENTE <> c2.CODIGOCLIENTE AND c1.TZ_LOCK = 0 AND c2.TZ_LOCK = 0
	JOIN saldos s1 WITH (NOLOCK) ON s1.C1803 = c1.CODIGOCLIENTE
	JOIN saldos s2 WITH (NOLOCK) ON s2.C1803 = c2.CODIGOCLIENTE
	WHERE s1.JTS_OID = @P_JTSOID_1 AND s2.JTS_OID = @P_JTSOID_2
	IF @V_COUNT > 0 
		BEGIN
			SET @O_RETORNO = 1;
		END
	ELSE
		BEGIN
			SET @O_RETORNO = 0;
		END
END
');