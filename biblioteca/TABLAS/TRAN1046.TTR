VERSION:055_5
*N  NN *** Parámetros de entrada a sub rutina ***
*$2025-05-28 14:09:34JBENTANCOU
*N  NN -- C35926 = 2 - Cuenta Corriente
*$2025-05-28 14:11:18JBENTANCOU
*N  NN -- C35926 = 3 - Caja de Ahorro
*$2025-05-28 14:11:31JBENTANCOU
 NNNNN 35926   Parámetro Tipo de Cuenta Vista                    INNSN 000007015200300202021011000000007000700300137000
/F=0012400NNN000000000Arial                                   
/f=0012700NNN000000000Arial                                   
*$2025-05-28 14:10:17JBENTANCOU
 NNNNN 35927   Parámetro Código de Cliente                       INNSN 000007015200300302021011000000007000700300137000
/F=0012400NNN000000000Arial                                   
/f=0012700NNN000000000Arial                                   
*$2025-05-28 10:59:06JBENTANCOU
 NNNNN 35928   Valor Salida Nro. Cuenta Vista                    INNSNK000007015200300302021011000000007000700300137000
/V=0
/F=0012400NNN000000000Arial                                   
/f=0012700NNN000000000Arial                                   
*$2025-05-28 14:05:46JBENTANCOU
 NNNNN 35929   Valor Salida Sucursal de Cuenta                   INNSNK000007015200300202021011000000007000700300137000
/V=0
/F=0012400NNN000000000Arial                                   
/f=0012700NNN000000000Arial                                   
*$2025-05-28 14:05:53JBENTANCOU
*N  NN *** Buscamos si existe una cuenta vista del tipo para el cliente ***
*$2025-05-28 12:37:31JBENTANCOU
 NNNNN 43759   Descriptor Saldos                                 INNSNK000007015200300202021011000000007000700300137000
/V=21
/F=0012400NNN000000000Arial                                   
/f=0012700NNN000000000Arial                                   
*$2025-05-28 10:29:58JBENTANCOU
 NNNNN 43769   Número de Campo Cuenta                            INNSNK000007015200300202021011000000007000700300137000
/V=1593
/F=0012400NNN000000000Arial                                   
/f=0012700NNN000000000Arial                                   
*$2025-05-28 08:22:07JBENTANCOU
 NNNNN 43760   where                                             INNSNF000007015200300202021011000000007000700300137000
/V="(TZ_LOCK>=400000000000000 OR TZ_LOCK<300000000000000)"
/F=0012400NNN000000000Arial                                   
/f=0012700NNN000000000Arial                                   
*$2025-05-28 08:22:07JBENTANCOU
 NNNNN 43760   where                                             INNSNF000007015200300202021011000000007000700300137000
/V=C43760+" AND C1785="+C35926.0+" AND C1803="+C35927.0
/F=0012400NNN000000000Arial                                   
/f=0012700NNN000000000Arial                                   
*$2025-05-28 11:49:28JBENTANCOU
 NNNNN 45276   Mayor Nro. de Cta. Vista del Tipo para el Cliente INNSNF000007015200300202021011000000007000700300137000
/V=F(MAXIMO,C43759,C43769,C43760)
/F=0012400NNN000000000Arial                                   
/f=0012700NNN000000000Arial                                   
*$2025-05-28 12:38:02JBENTANCOU
CNNNNN   00000000000000000000100
/F=C45276.0 > 0
/P=I770
/M=Existe Cuenta Vista del Tipo para el Cliente
*$2025-05-28 12:38:46JBENTANCOU
 NNNNN 01593   Cuenta                                            INNNNF000007015200300302021011000000007000700300137000
/?=I770
/V=C45276.0+1
/F=0012400NNN000000000Arial                                   
/f=0012700NNN000000000Arial                                   
*$2025-05-28 12:35:22JBENTANCOU
*N  NN *** Si el Cliente ya tiene una Cuenta Vista, buscamos en qué sucursal ***
*$2025-05-28 12:36:58JBENTANCOU
 NNNNN 43759   Descriptor Saldos                                 INNSNK000007015200300202021011000000007000700300137000
/?=I770
/V=21
/F=0012400NNN000000000Arial                                   
/f=0012700NNN000000000Arial                                   
*$2025-05-28 12:49:59JBENTANCOU
 NNNNN 43769   Número de Campo Sucursal                          INNSNK000007015200300202021011000000007000700300137000
/?=I770
/V=1591
/F=0012400NNN000000000Arial                                   
/f=0012700NNN000000000Arial                                   
*$2025-05-28 12:49:59JBENTANCOU
 NNNNN 43760   where                                             INNSNF000007015200300202021011000000007000700300137000
/?=I770
/V="C1803="+C35927.0+" AND C1785="+C35926.0+" AND CUENTA="+C45276.0
/F=0012400NNN000000000Arial                                   
/f=0012700NNN000000000Arial                                   
*$2025-05-28 12:49:59JBENTANCOU
 NNNNN 43761   Sucursal con el nro. de cuenta para el Cliente    INNSNF000007015200300202021011000000007000700300137000
/?=I770
/V=F(MAXIMO,C43759,C43769,C43760)
/F=0012400NNN000000000Arial                                   
/f=0012700NNN000000000Arial                                   
*$2025-05-28 12:49:59JBENTANCOU
CNNNNN   00000000000000000000100
/?=I770
/F=C43761.0#0
/P=I771
/M=Se encontró Sucursal para la cuenta del Cliente
*$2025-05-28 12:49:59JBENTANCOU
*N  NN             *** Retorno Sucursal encontrada ***
*$2025-05-28 14:08:43JBENTANCOU
 NNNNN 35929   Valor Salida Sucursal de Cuenta                   INNSNA000007015200300202021011000000007000700300137000
/?=I770YI771
/V=C43761.0
/F=0012400NNN000000000Arial                                   
/f=0012700NNN000000000Arial                                   
*$2025-05-28 14:07:20JBENTANCOU
*N  NN *** Si existe buscamos si ya hay una cuenta vista del tipo con mismo Nro. de Cuenta + 1 ***
*$2025-05-28 12:39:13JBENTANCOU
 NNNNN 43759   Descriptor Saldos                                 INNSNK000007015200300202021011000000007000700300137000
/?=I770
/V=21
/F=0012400NNN000000000Arial                                   
/f=0012700NNN000000000Arial                                   
*$2025-05-28 08:23:03JBENTANCOU
 NNNNN 43760   where                                             INNSNF000007015200300202021011000000007000700300137000
/?=I770
/V="(TZ_LOCK>=400000000000000 OR TZ_LOCK<300000000000000)"
/F=0012400NNN000000000Arial                                   
/f=0012700NNN000000000Arial                                   
*$2025-05-28 08:23:03JBENTANCOU
 NNNNN 43760   where                                             INNSNF000007015200300202021011000000007000700300137000
/?=I770
/V=C43760+" AND C1785="+C35926.0+" AND CUENTA="+C1593.0
/F=0012400NNN000000000Arial                                   
/f=0012700NNN000000000Arial                                   
*$2025-05-28 11:50:52JBENTANCOU
 NNNNN 43761   Existe Nro. de Cuenta Vista del Tipo              INNSNF000007015200300202021011000000007000700300137000
/?=I770
/V=F(CANTIDAD,C43759,C43760)
/F=0012400NNN000000000Arial                                   
/f=0012700NNN000000000Arial                                   
*$2025-05-28 12:38:17JBENTANCOU
CNNNNN   00000000000000000000100
/?=I770
/F=C43761.0 > 0
/P=I772
/M=Nro. de Cuenta ya existe en Saldos
*$2025-05-28 12:45:12JBENTANCOU
*N  NN *** Si el número de Cuenta ya existe, buscamos el primero libre ***
*$2025-05-28 08:22:07JBENTANCOU
 NNNNN 43759   Descriptor Vista de Numeración de Cuentas         INNSNK000007015200300202021011000000007000700300137000
/?=I770YI772
/V=3592
/F=0012400NNN000000000Arial                                   
/f=0012700NNN000000000Arial                                   
*$2025-05-28 12:45:31JBENTANCOU
 NNNNN 43769   Número de Campo Cuenta                            INNSNK000007015200300202021011000000007000700300137000
/?=I770YI772
/V=35920
/F=0012400NNN000000000Arial                                   
/f=0012700NNN000000000Arial                                   
*$2025-05-28 12:45:31JBENTANCOU
 NNNNN 43760   where                                             INNSNF000007015200300202021011000000007000700300137000
/?=I770YI772
/V="TIPO_CUENTA="+C35926.0+" AND SIG_NUMERACION <> PROX_CUENTA"
/F=0012400NNN000000000Arial                                   
/f=0012700NNN000000000Arial                                   
*$2025-05-28 12:45:31JBENTANCOU
 NNNNN 43760   where                                             INNSNF000007015200300202021011000000007000700300137000
/?=I770YI772
/V=C43760+" AND CUENTA >= "+C1593.0
/F=0012400NNN000000000Arial                                   
/f=0012700NNN000000000Arial                                   
*$2025-06-10 12:03:14JBENTANCOU
 NNNNN 45276   Menor Numeración sin Nro. siguiente en Saldos     INNSNF000007015200300202021011000000007000700300137000
/?=I770YI772
/V=F(MINIMO,C43759,C43769,C43760)
/F=0012400NNN000000000Arial                                   
/f=0012700NNN000000000Arial                                   
*$2025-05-28 12:45:31JBENTANCOU
*N  NN ***
*$2025-05-28 12:45:31JBENTANCOU
 NNNNN 35920   Nro. de Cuenta                                    INNNNA000007015200300302021011000000007000700300137000
/?=I770YI772
/V=C45276.0
/F=0012400NNN000000000Arial                                   
/f=0012700NNN000000000Arial                                   
*$2025-05-28 12:45:31JBENTANCOU
 NNNNN 35921   Siguiente Nro.                                    INNSN 000007015200300302021011000000007000700300137000
/?=I770YI772
/F=0012400NNN000000000Arial                                   
/f=0012700NNN000000000Arial                                   
*$2025-05-28 12:45:31JBENTANCOU
*N  NN *** Retorno Valor de Salida con nro de cuenta ***
*$2025-05-28 11:01:04JBENTANCOU
*N  NN *** Retorna 0 si el cliente no tenía cuenta previa ***
*$2025-05-28 11:01:21JBENTANCOU
 NNNNN 35928   Valor Salida Nro. Cuenta Vista                    INNSNA000007015200300302021011000000007000700300137000
/?=I770Y!I772
/V=C1593.0
/F=0012400NNN000000000Arial                                   
/f=0012700NNN000000000Arial                                   
*$2025-05-28 12:45:45JBENTANCOU
 NNNNN 35928   Valor Salida Nro. Cuenta Vista                    INNSNA000007015200300302021011000000007000700300137000
/?=I770YI772
/V=C3591.0
/F=0012400NNN000000000Arial                                   
/f=0012700NNN000000000Arial                                   
*$2025-05-28 12:45:42JBENTANCOU
*#I770#Existe Cuenta Vista del Tipo para el Cliente
*#I771#Se encontró Sucursal para la cuenta del Cliente
*#I772#Nro. de Cuenta ya existe en Saldos
