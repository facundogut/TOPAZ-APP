<?xml version="1.0" encoding="UTF-8"?>
<transformation>
  <info>
    <name>ITF_DEPOSITO_DIARIO_ECHEQ_NEGOCIADOS</name>
    <description/>
    <extended_description/>
    <trans_version/>
    <trans_type>Normal</trans_type>
    <directory>/</directory>
    <parameters>
    </parameters>
    <log>
      <trans-log-table>
        <connection/>
        <schema/>
        <table/>
        <size_limit_lines/>
        <interval/>
        <timeout_days/>
        <field>
          <id>ID_BATCH</id>
          <enabled>Y</enabled>
          <name>ID_BATCH</name>
        </field>
        <field>
          <id>CHANNEL_ID</id>
          <enabled>Y</enabled>
          <name>CHANNEL_ID</name>
        </field>
        <field>
          <id>TRANSNAME</id>
          <enabled>Y</enabled>
          <name>TRANSNAME</name>
        </field>
        <field>
          <id>STATUS</id>
          <enabled>Y</enabled>
          <name>STATUS</name>
        </field>
        <field>
          <id>LINES_READ</id>
          <enabled>Y</enabled>
          <name>LINES_READ</name>
          <subject/>
        </field>
        <field>
          <id>LINES_WRITTEN</id>
          <enabled>Y</enabled>
          <name>LINES_WRITTEN</name>
          <subject/>
        </field>
        <field>
          <id>LINES_UPDATED</id>
          <enabled>Y</enabled>
          <name>LINES_UPDATED</name>
          <subject/>
        </field>
        <field>
          <id>LINES_INPUT</id>
          <enabled>Y</enabled>
          <name>LINES_INPUT</name>
          <subject/>
        </field>
        <field>
          <id>LINES_OUTPUT</id>
          <enabled>Y</enabled>
          <name>LINES_OUTPUT</name>
          <subject/>
        </field>
        <field>
          <id>LINES_REJECTED</id>
          <enabled>Y</enabled>
          <name>LINES_REJECTED</name>
          <subject/>
        </field>
        <field>
          <id>ERRORS</id>
          <enabled>Y</enabled>
          <name>ERRORS</name>
        </field>
        <field>
          <id>STARTDATE</id>
          <enabled>Y</enabled>
          <name>STARTDATE</name>
        </field>
        <field>
          <id>ENDDATE</id>
          <enabled>Y</enabled>
          <name>ENDDATE</name>
        </field>
        <field>
          <id>LOGDATE</id>
          <enabled>Y</enabled>
          <name>LOGDATE</name>
        </field>
        <field>
          <id>DEPDATE</id>
          <enabled>Y</enabled>
          <name>DEPDATE</name>
        </field>
        <field>
          <id>REPLAYDATE</id>
          <enabled>Y</enabled>
          <name>REPLAYDATE</name>
        </field>
        <field>
          <id>LOG_FIELD</id>
          <enabled>Y</enabled>
          <name>LOG_FIELD</name>
        </field>
        <field>
          <id>EXECUTING_SERVER</id>
          <enabled>N</enabled>
          <name>EXECUTING_SERVER</name>
        </field>
        <field>
          <id>EXECUTING_USER</id>
          <enabled>N</enabled>
          <name>EXECUTING_USER</name>
        </field>
        <field>
          <id>CLIENT</id>
          <enabled>N</enabled>
          <name>CLIENT</name>
        </field>
      </trans-log-table>
      <perf-log-table>
        <connection/>
        <schema/>
        <table/>
        <interval/>
        <timeout_days/>
        <field>
          <id>ID_BATCH</id>
          <enabled>Y</enabled>
          <name>ID_BATCH</name>
        </field>
        <field>
          <id>SEQ_NR</id>
          <enabled>Y</enabled>
          <name>SEQ_NR</name>
        </field>
        <field>
          <id>LOGDATE</id>
          <enabled>Y</enabled>
          <name>LOGDATE</name>
        </field>
        <field>
          <id>TRANSNAME</id>
          <enabled>Y</enabled>
          <name>TRANSNAME</name>
        </field>
        <field>
          <id>STEPNAME</id>
          <enabled>Y</enabled>
          <name>STEPNAME</name>
        </field>
        <field>
          <id>STEP_COPY</id>
          <enabled>Y</enabled>
          <name>STEP_COPY</name>
        </field>
        <field>
          <id>LINES_READ</id>
          <enabled>Y</enabled>
          <name>LINES_READ</name>
        </field>
        <field>
          <id>LINES_WRITTEN</id>
          <enabled>Y</enabled>
          <name>LINES_WRITTEN</name>
        </field>
        <field>
          <id>LINES_UPDATED</id>
          <enabled>Y</enabled>
          <name>LINES_UPDATED</name>
        </field>
        <field>
          <id>LINES_INPUT</id>
          <enabled>Y</enabled>
          <name>LINES_INPUT</name>
        </field>
        <field>
          <id>LINES_OUTPUT</id>
          <enabled>Y</enabled>
          <name>LINES_OUTPUT</name>
        </field>
        <field>
          <id>LINES_REJECTED</id>
          <enabled>Y</enabled>
          <name>LINES_REJECTED</name>
        </field>
        <field>
          <id>ERRORS</id>
          <enabled>Y</enabled>
          <name>ERRORS</name>
        </field>
        <field>
          <id>INPUT_BUFFER_ROWS</id>
          <enabled>Y</enabled>
          <name>INPUT_BUFFER_ROWS</name>
        </field>
        <field>
          <id>OUTPUT_BUFFER_ROWS</id>
          <enabled>Y</enabled>
          <name>OUTPUT_BUFFER_ROWS</name>
        </field>
      </perf-log-table>
      <channel-log-table>
        <connection/>
        <schema/>
        <table/>
        <timeout_days/>
        <field>
          <id>ID_BATCH</id>
          <enabled>Y</enabled>
          <name>ID_BATCH</name>
        </field>
        <field>
          <id>CHANNEL_ID</id>
          <enabled>Y</enabled>
          <name>CHANNEL_ID</name>
        </field>
        <field>
          <id>LOG_DATE</id>
          <enabled>Y</enabled>
          <name>LOG_DATE</name>
        </field>
        <field>
          <id>LOGGING_OBJECT_TYPE</id>
          <enabled>Y</enabled>
          <name>LOGGING_OBJECT_TYPE</name>
        </field>
        <field>
          <id>OBJECT_NAME</id>
          <enabled>Y</enabled>
          <name>OBJECT_NAME</name>
        </field>
        <field>
          <id>OBJECT_COPY</id>
          <enabled>Y</enabled>
          <name>OBJECT_COPY</name>
        </field>
        <field>
          <id>REPOSITORY_DIRECTORY</id>
          <enabled>Y</enabled>
          <name>REPOSITORY_DIRECTORY</name>
        </field>
        <field>
          <id>FILENAME</id>
          <enabled>Y</enabled>
          <name>FILENAME</name>
        </field>
        <field>
          <id>OBJECT_ID</id>
          <enabled>Y</enabled>
          <name>OBJECT_ID</name>
        </field>
        <field>
          <id>OBJECT_REVISION</id>
          <enabled>Y</enabled>
          <name>OBJECT_REVISION</name>
        </field>
        <field>
          <id>PARENT_CHANNEL_ID</id>
          <enabled>Y</enabled>
          <name>PARENT_CHANNEL_ID</name>
        </field>
        <field>
          <id>ROOT_CHANNEL_ID</id>
          <enabled>Y</enabled>
          <name>ROOT_CHANNEL_ID</name>
        </field>
      </channel-log-table>
      <step-log-table>
        <connection/>
        <schema/>
        <table/>
        <timeout_days/>
        <field>
          <id>ID_BATCH</id>
          <enabled>Y</enabled>
          <name>ID_BATCH</name>
        </field>
        <field>
          <id>CHANNEL_ID</id>
          <enabled>Y</enabled>
          <name>CHANNEL_ID</name>
        </field>
        <field>
          <id>LOG_DATE</id>
          <enabled>Y</enabled>
          <name>LOG_DATE</name>
        </field>
        <field>
          <id>TRANSNAME</id>
          <enabled>Y</enabled>
          <name>TRANSNAME</name>
        </field>
        <field>
          <id>STEPNAME</id>
          <enabled>Y</enabled>
          <name>STEPNAME</name>
        </field>
        <field>
          <id>STEP_COPY</id>
          <enabled>Y</enabled>
          <name>STEP_COPY</name>
        </field>
        <field>
          <id>LINES_READ</id>
          <enabled>Y</enabled>
          <name>LINES_READ</name>
        </field>
        <field>
          <id>LINES_WRITTEN</id>
          <enabled>Y</enabled>
          <name>LINES_WRITTEN</name>
        </field>
        <field>
          <id>LINES_UPDATED</id>
          <enabled>Y</enabled>
          <name>LINES_UPDATED</name>
        </field>
        <field>
          <id>LINES_INPUT</id>
          <enabled>Y</enabled>
          <name>LINES_INPUT</name>
        </field>
        <field>
          <id>LINES_OUTPUT</id>
          <enabled>Y</enabled>
          <name>LINES_OUTPUT</name>
        </field>
        <field>
          <id>LINES_REJECTED</id>
          <enabled>Y</enabled>
          <name>LINES_REJECTED</name>
        </field>
        <field>
          <id>ERRORS</id>
          <enabled>Y</enabled>
          <name>ERRORS</name>
        </field>
        <field>
          <id>LOG_FIELD</id>
          <enabled>N</enabled>
          <name>LOG_FIELD</name>
        </field>
      </step-log-table>
      <metrics-log-table>
        <connection/>
        <schema/>
        <table/>
        <timeout_days/>
        <field>
          <id>ID_BATCH</id>
          <enabled>Y</enabled>
          <name>ID_BATCH</name>
        </field>
        <field>
          <id>CHANNEL_ID</id>
          <enabled>Y</enabled>
          <name>CHANNEL_ID</name>
        </field>
        <field>
          <id>LOG_DATE</id>
          <enabled>Y</enabled>
          <name>LOG_DATE</name>
        </field>
        <field>
          <id>METRICS_DATE</id>
          <enabled>Y</enabled>
          <name>METRICS_DATE</name>
        </field>
        <field>
          <id>METRICS_CODE</id>
          <enabled>Y</enabled>
          <name>METRICS_CODE</name>
        </field>
        <field>
          <id>METRICS_DESCRIPTION</id>
          <enabled>Y</enabled>
          <name>METRICS_DESCRIPTION</name>
        </field>
        <field>
          <id>METRICS_SUBJECT</id>
          <enabled>Y</enabled>
          <name>METRICS_SUBJECT</name>
        </field>
        <field>
          <id>METRICS_TYPE</id>
          <enabled>Y</enabled>
          <name>METRICS_TYPE</name>
        </field>
        <field>
          <id>METRICS_VALUE</id>
          <enabled>Y</enabled>
          <name>METRICS_VALUE</name>
        </field>
      </metrics-log-table>
    </log>
    <maxdate>
      <connection/>
      <table/>
      <field/>
      <offset>0.0</offset>
      <maxdiff>0.0</maxdiff>
    </maxdate>
    <size_rowset>10000</size_rowset>
    <sleep_time_empty>50</sleep_time_empty>
    <sleep_time_full>50</sleep_time_full>
    <unique_connections>N</unique_connections>
    <feedback_shown>Y</feedback_shown>
    <feedback_size>50000</feedback_size>
    <using_thread_priorities>Y</using_thread_priorities>
    <shared_objects_file/>
    <capture_step_performance>N</capture_step_performance>
    <step_performance_capturing_delay>1000</step_performance_capturing_delay>
    <step_performance_capturing_size_limit>100</step_performance_capturing_size_limit>
    <dependencies>
    </dependencies>
    <partitionschemas>
    </partitionschemas>
    <slaveservers>
    </slaveservers>
    <clusterschemas>
    </clusterschemas>
    <created_user>-</created_user>
    <created_date>2025/04/10 10:56:09.529</created_date>
    <modified_user>-</modified_user>
    <modified_date>2025/04/10 10:56:09.529</modified_date>
    <key_for_session_key>H4sIAAAAAAAAAAMAAAAAAAAAAAA=</key_for_session_key>
    <is_key_private>N</is_key_private>
  </info>
  <notepads>
  </notepads>
  <connection>
    <name>TopazDS</name>
    <server/>
    <type>MSSQL</type>
    <access>JNDI</access>
    <database>TopazDS</database>
    <port>1521</port>
    <username/>
    <password>Encrypted </password>
    <servername/>
    <data_tablespace/>
    <index_tablespace/>
    <attributes>
      <attribute>
        <code>FORCE_IDENTIFIERS_TO_LOWERCASE</code>
        <attribute>N</attribute>
      </attribute>
      <attribute>
        <code>FORCE_IDENTIFIERS_TO_UPPERCASE</code>
        <attribute>N</attribute>
      </attribute>
      <attribute>
        <code>IS_CLUSTERED</code>
        <attribute>N</attribute>
      </attribute>
      <attribute>
        <code>MSSQL_DOUBLE_DECIMAL_SEPARATOR</code>
        <attribute>N</attribute>
      </attribute>
      <attribute>
        <code>PORT_NUMBER</code>
        <attribute>1521</attribute>
      </attribute>
      <attribute>
        <code>PRESERVE_RESERVED_WORD_CASE</code>
        <attribute>Y</attribute>
      </attribute>
      <attribute>
        <code>QUOTE_ALL_FIELDS</code>
        <attribute>N</attribute>
      </attribute>
      <attribute>
        <code>SUPPORTS_BOOLEAN_DATA_TYPE</code>
        <attribute>Y</attribute>
      </attribute>
      <attribute>
        <code>SUPPORTS_TIMESTAMP_DATA_TYPE</code>
        <attribute>Y</attribute>
      </attribute>
      <attribute>
        <code>USE_POOLING</code>
        <attribute>N</attribute>
      </attribute>
    </attributes>
  </connection>
  <order>
    <hop>
      <from>Fila Dummy</from>
      <to>Get Token</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>Get Token</from>
      <to>Parsea Token</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>KEY URL y Token</from>
      <to>url deposito</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>URLs Property Input</from>
      <to>Parsea URL</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>INPUT DE DATOS</from>
      <to>KEY URL y Token</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>TIPO BUSQUEDA</from>
      <to>IGUAL</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>TIPO BUSQUEDA</from>
      <to>MAYOR</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>Parsea URL</from>
      <to>url deposito</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>Parsea URL</from>
      <to>url apoderado</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>Parsea Token</from>
      <to>Token MULE</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>Parsea Token</from>
      <to>Token TOPAZ</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>url deposito</from>
      <to>url apoderado</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>url apoderado</from>
      <to>Token MULE</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>Token MULE</from>
      <to>Token TOPAZ</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>Token TOPAZ</from>
      <to>constructor url y validador</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>CONSULTA APODERADOS</from>
      <to>obtiene firmantes y remplaza token y url</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>constructor url y validador</from>
      <to>Topaz-Transaction-ID</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>Topaz-Transaction-ID</from>
      <to>CONSULTA APODERADOS</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>IGUAL</from>
      <to>Constructor Consulta</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>MAYOR</from>
      <to>Constructor Consulta</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>Constructor Consulta</from>
      <to>limpio campos 2</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>limpio campos 2</from>
      <to>quito nulo</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>manejo nulos</from>
      <to>Manejo Respuesta</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>quito nulo</from>
      <to>CONSULTA DEPOSITO</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>quito nulo</from>
      <to>manejo nulos</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>CONSULTA DEPOSITO</from>
      <to>Manejo Respuesta</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>limpio campos</from>
      <to>Bitacora Archivo</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>Bitacora Archivo</from>
      <to>TIPO BUSQUEDA</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>Bitacora Registros</from>
      <to>CSV OUTPUT</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>Manejo Respuesta</from>
      <to>Renombra Header</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>Calculator</from>
      <to>limpio campos</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>obtiene firmantes y remplaza token y url</from>
      <to>Get variables</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>Get variables</from>
      <to>Calculator</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>Renombra Header</from>
      <to>Ordena por Fecha</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>Ordena por Fecha</from>
      <to>Bitacora Registros</to>
      <enabled>Y</enabled>
    </hop>
  </order>
  <step>
    <name>Bitacora Archivo</name>
    <type>TableOutput</type>
    <description/>
    <distribute>Y</distribute>
    <custom_distribution/>
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name/>
    </partitioning>
    <connection>TopazDS</connection>
    <schema>dbo</schema>
    <table>BITACORA_ECHEQ_NEGOCIADOS_ARCHIVOS</table>
    <commit>100</commit>
    <truncate>N</truncate>
    <ignore_errors>N</ignore_errors>
    <use_batch>N</use_batch>
    <specify_fields>Y</specify_fields>
    <partitioning_enabled>N</partitioning_enabled>
    <partitioning_field/>
    <partitioning_daily>N</partitioning_daily>
    <partitioning_monthly>Y</partitioning_monthly>
    <tablename_in_field>N</tablename_in_field>
    <tablename_field/>
    <tablename_in_table>Y</tablename_in_table>
    <return_keys>Y</return_keys>
    <return_field>ID_ARCHIVO</return_field>
    <fields>
      <field>
        <column_name>TIPO_BUSQUEDA</column_name>
        <stream_name>TIPO_BUSQUEDA</stream_name>
      </field>
      <field>
        <column_name>NOMBRE_ARCHIVO</column_name>
        <stream_name>NOMBRE_ARCHIVO</stream_name>
      </field>
      <field>
        <column_name>FECHA_PROCESO</column_name>
        <stream_name>FECHA_PROCESO</stream_name>
      </field>
      <field>
        <column_name>FECHA_BUSQUEDA</column_name>
        <stream_name>FECHA_BUSQUEDA</stream_name>
      </field>
      <field>
        <column_name>USUARIO_PROCESO</column_name>
        <stream_name>USUARIO_PROCESO</stream_name>
      </field>
      <field>
        <column_name>TIMESTAMP</column_name>
        <stream_name>TIMESTAMP</stream_name>
      </field>
    </fields>
    <attributes/>
    <cluster_schema/>
    <remotesteps>
      <input>
      </input>
      <output>
      </output>
    </remotesteps>
    <GUI>
      <xloc>1184</xloc>
      <yloc>480</yloc>
      <draw>Y</draw>
    </GUI>
  </step>
  <step>
    <name>Bitacora Registros</name>
    <type>TableOutput</type>
    <description/>
    <distribute>Y</distribute>
    <custom_distribution/>
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name/>
    </partitioning>
    <connection>TopazDS</connection>
    <schema>dbo</schema>
    <table>BITACORA_ECHEQ_NEGOCIADOS_REGISTROS</table>
    <commit>1000</commit>
    <truncate>N</truncate>
    <ignore_errors>N</ignore_errors>
    <use_batch>Y</use_batch>
    <specify_fields>Y</specify_fields>
    <partitioning_enabled>N</partitioning_enabled>
    <partitioning_field/>
    <partitioning_daily>N</partitioning_daily>
    <partitioning_monthly>Y</partitioning_monthly>
    <tablename_in_field>N</tablename_in_field>
    <tablename_field/>
    <tablename_in_table>Y</tablename_in_table>
    <return_keys>N</return_keys>
    <return_field/>
    <fields>
      <field>
        <column_name>FECHA_VTO</column_name>
        <stream_name>Fecha Vencimiento</stream_name>
      </field>
      <field>
        <column_name>ID_CHEQUE</column_name>
        <stream_name>ID eCheque</stream_name>
      </field>
      <field>
        <column_name>CUIT_NEGOCIADOR</column_name>
        <stream_name>Cuit Negociador</stream_name>
      </field>
      <field>
        <column_name>CMC7</column_name>
        <stream_name>CMC7</stream_name>
      </field>
      <field>
        <column_name>DETALLE</column_name>
        <stream_name>Detalle</stream_name>
      </field>
      <field>
        <column_name>ID_ARCHIVO</column_name>
        <stream_name>ID_ARCHIVO</stream_name>
      </field>
      <field>
        <column_name>ESTADO</column_name>
        <stream_name>estadoDeposito</stream_name>
      </field>
    </fields>
    <attributes/>
    <cluster_schema/>
    <remotesteps>
      <input>
      </input>
      <output>
      </output>
    </remotesteps>
    <GUI>
      <xloc>2656</xloc>
      <yloc>480</yloc>
      <draw>Y</draw>
    </GUI>
  </step>
  <step>
    <name>CONSULTA APODERADOS</name>
    <type>Rest</type>
    <description/>
    <distribute>Y</distribute>
    <custom_distribution/>
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name/>
    </partitioning>
    <applicationType>JSON</applicationType>
    <method>POST</method>
    <url/>
    <urlInField>Y</urlInField>
    <dynamicMethod>Y</dynamicMethod>
    <methodFieldName>METODO</methodFieldName>
    <urlField>URL</urlField>
    <bodyField>BODY</bodyField>
    <httpLogin/>
    <httpPassword>Encrypted </httpPassword>
    <proxyHost/>
    <proxyPort/>
    <preemptive>N</preemptive>
    <trustStoreFile/>
    <trustStorePassword>Encrypted </trustStorePassword>
    <headers>
      <header>
        <field>TOKEN</field>
        <name>Authorization</name>
      </header>
      <header>
        <field>Topaz-Transaction-ID</field>
        <name>Topaz-Transaction-ID</name>
      </header>
      <header>
        <field>Topaz-User</field>
        <name>Topaz-User</name>
      </header>
      <header>
        <field>Topaz-Channel</field>
        <name>Topaz-Channel</name>
      </header>
      <header>
        <field>Topaz-Branch</field>
        <name>Topaz-Branch</name>
      </header>
    </headers>
    <parameters>
      </parameters>
    <matrixParameters>
      </matrixParameters>
    <result>
      <name>RESPUESTA</name>
      <code>CODIGO_HTTP</code>
      <response_time/>
      <response_header/>
    </result>
    <attributes/>
    <cluster_schema/>
    <remotesteps>
      <input>
      </input>
      <output>
      </output>
    </remotesteps>
    <GUI>
      <xloc>1024</xloc>
      <yloc>160</yloc>
      <draw>Y</draw>
    </GUI>
  </step>
  <step>
    <name>CONSULTA DEPOSITO</name>
    <type>Rest</type>
    <description/>
    <distribute>Y</distribute>
    <custom_distribution/>
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name/>
    </partitioning>
    <applicationType>JSON</applicationType>
    <method>POST</method>
    <url/>
    <urlInField>Y</urlInField>
    <dynamicMethod>Y</dynamicMethod>
    <methodFieldName>METODO</methodFieldName>
    <urlField>URL</urlField>
    <bodyField>BODY</bodyField>
    <httpLogin/>
    <httpPassword>Encrypted </httpPassword>
    <proxyHost/>
    <proxyPort/>
    <preemptive>N</preemptive>
    <trustStoreFile/>
    <trustStorePassword>Encrypted </trustStorePassword>
    <headers>
      <header>
        <field>TOKEN</field>
        <name>Authorization</name>
      </header>
    </headers>
    <parameters>
      </parameters>
    <matrixParameters>
      </matrixParameters>
    <result>
      <name>RESPUESTA</name>
      <code>CODIGO_HTTP</code>
      <response_time/>
      <response_header/>
    </result>
    <attributes/>
    <cluster_schema/>
    <remotesteps>
      <input>
      </input>
      <output>
      </output>
    </remotesteps>
    <GUI>
      <xloc>2144</xloc>
      <yloc>480</yloc>
      <draw>Y</draw>
    </GUI>
  </step>
  <step>
    <name>CSV OUTPUT</name>
    <type>TextFileOutput</type>
    <description/>
    <distribute>Y</distribute>
    <custom_distribution/>
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name/>
    </partitioning>
    <separator>;</separator>
    <enclosure>"</enclosure>
    <enclosure_forced>N</enclosure_forced>
    <enclosure_fix_disabled>N</enclosure_fix_disabled>
    <header>Y</header>
    <footer>N</footer>
    <format>DOS</format>
    <compression>None</compression>
    <encoding/>
    <endedLine/>
    <fileNameInField>N</fileNameInField>
    <fileNameField/>
    <create_parent_folder>N</create_parent_folder>
    <file>
      <name>${RCO}REPORTE_ECHEQ_NEGOCIADOS_${FECHARELOJ_F1}${HORA_F1}</name>
      <servlet_output>N</servlet_output>
      <do_not_open_new_file_init>Y</do_not_open_new_file_init>
      <extention>csv</extention>
      <append>N</append>
      <split>N</split>
      <haspartno>N</haspartno>
      <add_date>N</add_date>
      <add_time>N</add_time>
      <SpecifyFormat>N</SpecifyFormat>
      <date_time_format/>
      <add_to_result_filenames>Y</add_to_result_filenames>
      <pad>N</pad>
      <fast_dump>N</fast_dump>
      <splitevery/>
    </file>
    <fields>
      <field>
        <name>Fecha Vencimiento</name>
        <type>String</type>
        <format>#</format>
        <currency/>
        <decimal/>
        <group/>
        <nullif/>
        <trim_type>both</trim_type>
        <length>-1</length>
        <precision>-1</precision>
      </field>
      <field>
        <name>ID eCheque</name>
        <type>String</type>
        <format>#</format>
        <currency/>
        <decimal/>
        <group/>
        <nullif/>
        <trim_type>both</trim_type>
        <length>-1</length>
        <precision>-1</precision>
      </field>
      <field>
        <name>Cuit Negociador</name>
        <type>String</type>
        <format>#</format>
        <currency/>
        <decimal/>
        <group/>
        <nullif/>
        <trim_type>both</trim_type>
        <length>-1</length>
        <precision>-1</precision>
      </field>
      <field>
        <name>CMC7</name>
        <type>String</type>
        <format>#</format>
        <currency/>
        <decimal/>
        <group/>
        <nullif/>
        <trim_type>both</trim_type>
        <length>-1</length>
        <precision>-1</precision>
      </field>
      <field>
        <name>Detalle</name>
        <type>String</type>
        <format>#</format>
        <currency/>
        <decimal/>
        <group/>
        <nullif/>
        <trim_type>both</trim_type>
        <length>-1</length>
        <precision>-1</precision>
      </field>
    </fields>
    <attributes/>
    <cluster_schema/>
    <remotesteps>
      <input>
      </input>
      <output>
      </output>
    </remotesteps>
    <GUI>
      <xloc>2752</xloc>
      <yloc>480</yloc>
      <draw>Y</draw>
    </GUI>
  </step>
  <step>
    <name>Calculator</name>
    <type>Calculator</type>
    <description/>
    <distribute>Y</distribute>
    <custom_distribution/>
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name/>
    </partitioning>
    <failIfNoFile>Y</failIfNoFile>
    <calculation>
      <field_name>FECHA_BUSQUEDA</field_name>
      <calc_type>COPY_FIELD</calc_type>
      <field_a>fechaHabil</field_a>
      <field_b/>
      <field_c/>
      <value_type>Date</value_type>
      <value_length>-1</value_length>
      <value_precision>-1</value_precision>
      <remove>N</remove>
      <conversion_mask/>
      <decimal_symbol/>
      <grouping_symbol/>
      <currency_symbol/>
    </calculation>
    <attributes/>
    <cluster_schema/>
    <remotesteps>
      <input>
      </input>
      <output>
      </output>
    </remotesteps>
    <GUI>
      <xloc>1024</xloc>
      <yloc>400</yloc>
      <draw>Y</draw>
    </GUI>
  </step>
  <step>
    <name>Constructor Consulta</name>
    <type>ScriptValueMod</type>
    <description/>
    <distribute>Y</distribute>
    <custom_distribution/>
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name/>
    </partitioning>
    <compatible>N</compatible>
    <optimizationLevel>9</optimizationLevel>
    <jsScripts>
      <jsScript>
        <jsScript_type>0</jsScript_type>
        <jsScript_name>Script 1</jsScript_name>
        <jsScript_script>//Script here
var bodyDeposito = null;
if (!ID_CHEQUE) {
	bodyDeposito = null;
} else if (ID_CHEQUE) {
var firmantes = JSON.parse(BODY);

var obj = {
  depositos: [
    {
      chequeId: ID_CHEQUE,
      beneficiarioDocumento: DOC_NBCH,
      beneficiarioCbu: CBU_NBCH
    }
  ],
  firmantes: firmantes
};

	bodyDeposito = JSON.stringify(obj);
}</jsScript_script>
      </jsScript>
      <jsScript>
        <jsScript_type>1</jsScript_type>
        <jsScript_name>Item_0</jsScript_name>
        <jsScript_script>LoadScriptFromTab('utils')</jsScript_script>
      </jsScript>
      <jsScript>
        <jsScript_type>-1</jsScript_type>
        <jsScript_name>utils</jsScript_name>
        <jsScript_script>var JSON = {};
 
if (!String.hasOwnProperty("repeat")) {
  String.prototype.repeat = function (n) {
    var s = "";
    var a = this;
    for (;;) {
      if (n &amp; 1) s += a;
      n >>= 1;
      if (n) {
        a += a;
      } else break;
    }
    return s;
  };
}
 
if (!Array.hasOwnProperty("reduce")) {
    Array.prototype.reduce = function (callback, initialValue) {
    if (this == null) {
      throw new TypeError(
        "Array.prototype.myReduce called on null or undefined"
      );
    }
 
    if (typeof callback !== "function") {
      throw new TypeError(callback + " is not a function");
    }
 
    var length = this.length;
    var index = 0;
    var accumulator;
 
    if (arguments.length >= 2) {
      accumulator = initialValue;
    } else {
      if (length === 0) {
        throw new TypeError("Reduce of empty array with no initial value");
      }
      accumulator = this[0];
      index = 1;
    }
 
    for (; index &lt; length; index++) {
      if (index in this) {
        accumulator = callback(accumulator, this[index], index, this);
      }
    }
 
    return accumulator;
  };
}
 
(function () {
  JSON.parse = function (json) {
    var pattern = /[^,:{}\[\]0-9.\-+Eaeflnr-u \n\r\t]/;
    var replacedJson = json.replace(/\"(\\.|[^"\\])*\"/g, "");
    return !pattern.test(replacedJson) &amp;&amp; eval("(" + json + ")");
  };
 
  var javaTypes = {
    "java.lang.String": "string",
    "java.math.BigDecimal": "number",
    "java.lang.Long": "number",
    "java.lang.Double": "number",
    "java.lang.Boolean": "boolean",
    "java.util.Date": "date",
    "java.sql.Timestamp": "date",
    "java.net.Inet4Address": "string",
  };
 
  var escapeCharacters = function (str) {
    str = String(str);
    var newStr = "";
    for (var i = 0; i &lt; str.length; i++) {
      var character = str[i];
      switch (character) {
        case "\\":
        case '"':
        case "/":
          newStr += "\\" + character;
          break;
        case "\b":
          newStr += "\\b";
          break;
        case "\f":
          newStr += "\\f";
          break;
        case "\n":
          newStr += "\\n";
          break;
        case "\r":
          newStr += "\\r";
          break;
        case "\t":
          newStr += "\\t";
          break;
        default:
          // /[^,:{}\[\]0-9.\-+Eaeflnr-u \n\r\t]/;
          if (!/[\u0020-\u007e]/.test(character)) {
            newStr += "\\u" + lpad(character.charCodeAt(0).toString(16), "0", 4);
          } else {
            newStr += character;
          }
          break;
      }
    }
    return newStr;
  };
 
  var getValue = function (type, value, replacer, space, indentation) {
    switch (type) {
      case "number":
        return isNaN(value) ? null : value;
      case "boolean":
      case "null":
        return value;
      case "array":
        return arrayStringify(value, replacer, space, indentation);
      case "javaArray":
        return arrayStringify(
          javaArrayShallowCopy(value),
          replacer,
          space,
          indentation
        );
      case "list":
        return arrayStringify(
          javaListShallowCopy(value),
          replacer,
          space,
          indentation
        );
      case "object":
        return stringify(value, replacer, space, indentation + 1);
      case "date":
        return (
          '"' + date2str(value, "yyyy-MM-dd'T'HH:mm:ss.SSSZ", "es", "AGT") + '"'
        );
      default:
        return '"' + escapeCharacters(value) + '"';
    }
  };
 
  var getIndentation = function (space, indentation) {
    if (getType(space) === "number" &amp;&amp; space > 0) {
      return "\n" + " ".repeat(space * indentation);
    } else if (getType(space) === "string") {
      return "\n" + String(space).repeat(indentation);
    }
    return "";
  };
 
  var arrayStringify = function (array, replacer, space, indentation) {
    return (
      "[" +
      array
        .reduce(function (acc, e) {
          return (
            acc +
            stringify(e, replacer, space, indentation + 1) +
            "," +
            getIndentation(space, indentation)
          );
        }, getIndentation(space, indentation))
        .slice(0, -1 - getIndentation(space, indentation).length) +
      getIndentation(space, indentation - 1) +
      "]"
    );
  };
 
  var getType = function (obj) {
    if (obj === null || obj === undefined) return "null";
 
    switch (Object.prototype.toString.call(obj)) {
      case "[object Array]":
        return "array";
      case "[object Date]":
        return "date";
      case "[object Boolean]":
        return "boolean";
      case "[object Number]":
        return "number";
      case "[object String]":
        return "string";
      case "[object Object]":
        return "object";
      case "[object JavaArray]":
        return "javaArray";
      case "[object JavaObject]":
        if (
          java.lang.Class.forName("java.util.List").isAssignableFrom(
            obj.getClass()
          )
        )
          return "list";
        return javaTypes[obj.getClass().getName()];
      default:
        return "undefined";
    }
  };
 
  var javaListShallowCopy = function (list) {
    var arr = [];
    for (var i = 0; i &lt; list.size(); i++) {
      arr.push(list.get(i));
    }
    return arr;
  };
 
  var javaArrayShallowCopy = function (arr) {
    var jsArr = [];
    for (var i = 0; i &lt; arr.length; i++) {
      jsArr.push(arr[i]);
    }
    return jsArr;
  };
 
  var stringify = function (object, replacer, space, indentation) {
    var type = getType(object);
 
    if (type != "object")
      return getValue(type, object, replacer, space, indentation);
 
    var accumulator = getIndentation(space, indentation);
 
    for (var key in object) {
      var value = object[key];
 
      if (typeof value !== "function" &amp;&amp; value !== undefined) {
        // Si hay valor
        if (typeof replacer == "array" &amp;&amp; !replacer.contains(key)) {
          continue;
        } else if (typeof replacer === "function") {
          // Si es una funcion, hay que usarla para retornar valores
          value = replacer(key, value);
        }
        accumulator +=
          '"' +
          key +
          '":' +
          (space ? " " : "") +
          getValue(type, value, replacer, space, indentation) +
          "," +
          getIndentation(space, indentation);
      }
    }
 
    return (
      "{" +
      accumulator.slice(0, -1 - getIndentation(space, indentation).length) +
      getIndentation(space, indentation - 1) +
      "}"
    );
  };
 
  JSON.stringify = function (object, replacer, space) {
    return stringify(object, replacer, space, 1);
  };
})();</jsScript_script>
      </jsScript>
    </jsScripts>
    <fields>
      <field>
        <name>bodyDeposito</name>
        <rename>BODY</rename>
        <type>String</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>Y</replace>
      </field>
    </fields>
    <attributes/>
    <cluster_schema/>
    <remotesteps>
      <input>
      </input>
      <output>
      </output>
    </remotesteps>
    <GUI>
      <xloc>1712</xloc>
      <yloc>480</yloc>
      <draw>Y</draw>
    </GUI>
  </step>
  <step>
    <name>Dummy (do nothing)</name>
    <type>Dummy</type>
    <description/>
    <distribute>Y</distribute>
    <custom_distribution/>
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name/>
    </partitioning>
    <attributes/>
    <cluster_schema/>
    <remotesteps>
      <input>
      </input>
      <output>
      </output>
    </remotesteps>
    <GUI>
      <xloc>2608</xloc>
      <yloc>1968</yloc>
      <draw>Y</draw>
    </GUI>
  </step>
  <step>
    <name>Fila Dummy</name>
    <type>DataGrid</type>
    <description/>
    <distribute>Y</distribute>
    <custom_distribution/>
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name/>
    </partitioning>
    <fields>
      <field>
        <name>DUMMY</name>
        <type>String</type>
        <format/>
        <currency/>
        <decimal/>
        <group/>
        <length>-1</length>
        <precision>-1</precision>
        <set_empty_string>N</set_empty_string>
      </field>
    </fields>
    <data>
      <line>
        <item>DUMMY</item>
      </line>
    </data>
    <attributes/>
    <cluster_schema/>
    <remotesteps>
      <input>
      </input>
      <output>
      </output>
    </remotesteps>
    <GUI>
      <xloc>736</xloc>
      <yloc>160</yloc>
      <draw>Y</draw>
    </GUI>
  </step>
  <step>
    <name>Get Token</name>
    <type>TransExecutor</type>
    <description/>
    <distribute>Y</distribute>
    <custom_distribution/>
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name/>
    </partitioning>
    <specification_method>filename</specification_method>
    <trans_object_id/>
    <trans_name/>
    <filename>${Top.Repository}GENERICO_GET_TOKENS.ktr</filename>
    <directory_path/>
    <group_size>1</group_size>
    <group_field/>
    <group_time/>
    <parameters>
      <inherit_all_vars>Y</inherit_all_vars>
    </parameters>
    <execution_result_target_step/>
    <execution_time_field>ExecutionTime</execution_time_field>
    <execution_result_field>ExecutionResult</execution_result_field>
    <execution_errors_field>ExecutionNrErrors</execution_errors_field>
    <execution_lines_read_field>ExecutionLinesRead</execution_lines_read_field>
    <execution_lines_written_field>ExecutionLinesWritten</execution_lines_written_field>
    <execution_lines_input_field>ExecutionLinesInput</execution_lines_input_field>
    <execution_lines_output_field>ExecutionLinesOutput</execution_lines_output_field>
    <execution_lines_rejected_field>ExecutionLinesRejected</execution_lines_rejected_field>
    <execution_lines_updated_field>ExecutionLinesUpdated</execution_lines_updated_field>
    <execution_lines_deleted_field>ExecutionLinesDeleted</execution_lines_deleted_field>
    <execution_files_retrieved_field>ExecutionFilesRetrieved</execution_files_retrieved_field>
    <execution_exit_status_field>ExecutionExitStatus</execution_exit_status_field>
    <execution_log_text_field>ExecutionLogText</execution_log_text_field>
    <execution_log_channelid_field>ExecutionLogChannelId</execution_log_channelid_field>
    <result_rows_target_step>Parsea Token</result_rows_target_step>
    <result_rows_field>
      <name>key</name>
      <type>String</type>
      <length>-1</length>
      <precision>-1</precision>
    </result_rows_field>
    <result_rows_field>
      <name>value</name>
      <type>String</type>
      <length>-1</length>
      <precision>-1</precision>
    </result_rows_field>
    <result_files_target_step/>
    <result_files_file_name_field>FileName</result_files_file_name_field>
    <executors_output_step/>
    <attributes/>
    <cluster_schema/>
    <remotesteps>
      <input>
      </input>
      <output>
      </output>
    </remotesteps>
    <GUI>
      <xloc>736</xloc>
      <yloc>240</yloc>
      <draw>Y</draw>
    </GUI>
  </step>
  <step>
    <name>Get variables</name>
    <type>GetVariable</type>
    <description/>
    <distribute>Y</distribute>
    <custom_distribution/>
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name/>
    </partitioning>
    <fields>
      <field>
        <name>TIMESTAMP</name>
        <variable>${FYHACTRELOJ}</variable>
        <type>Date</type>
        <format>yyyy-MM-dd HH:mm:ss</format>
        <currency/>
        <decimal/>
        <group/>
        <length>-1</length>
        <precision>-1</precision>
        <trim_type>none</trim_type>
      </field>
      <field>
        <name>FECHA_PROCESO</name>
        <variable>${FECHA_PROCESO}</variable>
        <type>Date</type>
        <format>yyyy-MM-dd HH:mm:ss</format>
        <currency/>
        <decimal/>
        <group/>
        <length>-1</length>
        <precision>-1</precision>
        <trim_type>none</trim_type>
      </field>
      <field>
        <name>USUARIO_PROCESO</name>
        <variable>${USUARIO}</variable>
        <type>String</type>
        <format>#</format>
        <currency/>
        <decimal/>
        <group/>
        <length>-1</length>
        <precision>-1</precision>
        <trim_type>none</trim_type>
      </field>
    </fields>
    <attributes/>
    <cluster_schema/>
    <remotesteps>
      <input>
      </input>
      <output>
      </output>
    </remotesteps>
    <GUI>
      <xloc>1024</xloc>
      <yloc>320</yloc>
      <draw>Y</draw>
    </GUI>
  </step>
  <step>
    <name>IGUAL</name>
    <type>DBJoin</type>
    <description/>
    <distribute>Y</distribute>
    <custom_distribution/>
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name/>
    </partitioning>
    <connection>TopazDS</connection>
    <rowlimit>0</rowlimit>
    <sql>select DISTINCT 
	cde.ID_CHEQUE, cde.CUIT_NEGOCIADOR, cde.CMC7, cde.FECHA_VTO
from CLE_DESCUENTOS_ECHEQ (nolock) cde 
where cde.ESTADO = 'D'
	and cde.FECHA_VTO = ?</sql>
    <outer_join>Y</outer_join>
    <replace_vars>Y</replace_vars>
    <parameter>
      <field>
        <name>FechaHabil</name>
        <type>Date</type>
      </field>
    </parameter>
    <attributes/>
    <cluster_schema/>
    <remotesteps>
      <input>
      </input>
      <output>
      </output>
    </remotesteps>
    <GUI>
      <xloc>1520</xloc>
      <yloc>480</yloc>
      <draw>Y</draw>
    </GUI>
  </step>
  <step>
    <name>INPUT DE DATOS</name>
    <type>TableInput</type>
    <description/>
    <distribute>Y</distribute>
    <custom_distribution/>
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name/>
    </partitioning>
    <connection>TopazDS</connection>
    <sql>DECLARE @fecha VARCHAR(16);
SET @fecha = '${FECHA_ECHEQ_DEPOSITO}'

SELECT 
    CASE 
        WHEN @fecha in ('busqueda-default', 'default')
            THEN DATEADD(DAY, 1, CAST(p.FECHAPROCESOANTERIOR AS DATETIME))
        ELSE CAST(dbo.diaHabil(TRY_CONVERT(DATE, @fecha, 112), 'A') AS DATETIME)
    END AS fechaHabil,
    CASE 
        WHEN @fecha in ('busqueda-default', 'default')
            THEN 'M' --MAYOR
        ELSE 'I' --IGUAL
    END AS tipoBusqueda,
	ALFA_1 as CBU_NBCH, 
	CAST(NUMERICO_1 AS BIGINT) as DOC_NBCH,
	CAST(vs.JTS_OID_SALDO AS INT) as SALDO_NBCH 
FROM PARAMETROS p
JOIN ITF_MASTER_PARAMETROS imp ON 276 = imp.CODIGO
	and 3001935 = imp.CODIGO_INTERFACE
JOIN VTA_SALDOS vs ON imp.ALFA_1 = vs.CTA_CBU
	and vs.TZ_LOCK = 0
</sql>
    <limit>0</limit>
    <lookup/>
    <execute_each_row>N</execute_each_row>
    <variables_active>Y</variables_active>
    <lazy_conversion_active>N</lazy_conversion_active>
    <attributes/>
    <cluster_schema/>
    <remotesteps>
      <input>
      </input>
      <output>
      </output>
    </remotesteps>
    <GUI>
      <xloc>160</xloc>
      <yloc>480</yloc>
      <draw>Y</draw>
    </GUI>
  </step>
  <step>
    <name>KEY URL y Token</name>
    <type>Constant</type>
    <description/>
    <distribute>Y</distribute>
    <custom_distribution/>
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name/>
    </partitioning>
    <fields>
      <field>
        <name>keyURL_deposito</name>
        <type>String</type>
        <format/>
        <currency/>
        <decimal/>
        <group/>
        <nullif>externos.echeq.negociados.deposito</nullif>
        <length>-1</length>
        <precision>-1</precision>
        <set_empty_string>N</set_empty_string>
      </field>
      <field>
        <name>keyURL_apoderado</name>
        <type>String</type>
        <format/>
        <currency/>
        <decimal/>
        <group/>
        <nullif>interno.apoderamiento.url</nullif>
        <length>-1</length>
        <precision>-1</precision>
        <set_empty_string>N</set_empty_string>
      </field>
      <field>
        <name>keyTOKEN_MULE</name>
        <type>String</type>
        <format/>
        <currency/>
        <decimal/>
        <group/>
        <nullif>TOKEN_MULE</nullif>
        <length>-1</length>
        <precision>-1</precision>
        <set_empty_string>N</set_empty_string>
      </field>
      <field>
        <name>keyTOKEN_TOPAZ</name>
        <type>String</type>
        <format/>
        <currency/>
        <decimal/>
        <group/>
        <nullif>TOKEN_TOPAZ</nullif>
        <length>-1</length>
        <precision>-1</precision>
        <set_empty_string>N</set_empty_string>
      </field>
    </fields>
    <attributes/>
    <cluster_schema/>
    <remotesteps>
      <input>
      </input>
      <output>
      </output>
    </remotesteps>
    <GUI>
      <xloc>288</xloc>
      <yloc>480</yloc>
      <draw>Y</draw>
    </GUI>
  </step>
  <step>
    <name>MAYOR</name>
    <type>DBJoin</type>
    <description/>
    <distribute>Y</distribute>
    <custom_distribution/>
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name/>
    </partitioning>
    <connection>TopazDS</connection>
    <rowlimit>0</rowlimit>
    <sql>SELECT DISTINCT 
	cde.ID_CHEQUE, cde.CUIT_NEGOCIADOR, cde.CMC7, cde.FECHA_VTO
FROM CLE_DESCUENTOS_ECHEQ (NOLOCK) cde 
WHERE cde.ESTADO = 'D'
    AND cde.FECHA_VTO BETWEEN ? AND '${FECHA_PROCESO}'
</sql>
    <outer_join>Y</outer_join>
    <replace_vars>Y</replace_vars>
    <parameter>
      <field>
        <name>FechaHabil</name>
        <type>Date</type>
      </field>
    </parameter>
    <attributes/>
    <cluster_schema/>
    <remotesteps>
      <input>
      </input>
      <output>
      </output>
    </remotesteps>
    <GUI>
      <xloc>1520</xloc>
      <yloc>560</yloc>
      <draw>Y</draw>
    </GUI>
  </step>
  <step>
    <name>Manejo Respuesta</name>
    <type>ScriptValueMod</type>
    <description/>
    <distribute>Y</distribute>
    <custom_distribution/>
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name/>
    </partitioning>
    <compatible>N</compatible>
    <optimizationLevel>9</optimizationLevel>
    <jsScripts>
      <jsScript>
        <jsScript_type>0</jsScript_type>
        <jsScript_name>Script 1</jsScript_name>
        <jsScript_script>trans_Status = CONTINUE_TRANSFORMATION;

if ((cont_ok+cont_desc+cont_unk) == 0) {
	fechaUlt = date2str(fechaHabil, 'yyyy-MM-dd');
	tipoBusquedaUlt = tipoBusqueda;
	idArchivo = ID_ARCHIVO;
}

var estadoNeg = null;
var estadoDeposito = null;
var fechaVto = null;
if (FECHA_VTO){
	fechaVto = date2str(FECHA_VTO, 'yyyyMMdd');
}

if (!FECHA_VTO) {
	if (tipoBusquedaUlt == 'I') {
		RESPUESTA = 'No se encontro ningun eCheque para depositar en la fecha ['+fechaUlt+']'
	} else if (tipoBusquedaUlt == 'M') {
		RESPUESTA = 'No se encontro ningun eCheque para depositar entre las fechas ['+fechaUlt+'] &lt;---> ['+fechaProc+']'
	}
	ResponseLog('e', 'ER', 'null', 'null', RESPUESTA);
	msgNull = RESPUESTA;
	trans_Status = SKIP_TRANSFORMATION;
} else if (CODIGO_HTTP == 999 &amp;&amp; (FECHA_VTO)) {
	estadoNeg = 'El registro no tiene ID_CHEQUE.';
	estadoDeposito = 'NO DEPOSITADO';
	ResponseLog('e', 'ER', 'null', 'null', estadoNeg);
	cont_desc++;
} else if (CODIGO_HTTP == 200) {
	try {
		var resultado = JSON.parse(RESPUESTA);
		var codigo = resultado[0].respuesta.codigo;
		if (codigo == 3000) {
			estadoNeg = 'eCheque depositado.';
			estadoDeposito = 'DEPOSITADO';
			ResponseLog('b', 'OK', ID_CHEQUE, CODIGO_HTTP, RESPUESTA);
			cont_ok++;
		} else {
			estadoNeg = trim(resultado[0].respuesta.descripcion) + '.';
			estadoDeposito = 'NO DEPOSITADO';
			ResponseLog('b', 'ER', ID_CHEQUE, CODIGO_HTTP, RESPUESTA);
			cont_desc++;
		}
	} catch (e) {
		estadoNeg = 'No fue posible parsear la respuesta de COELSA.';
		estadoDeposito = 'NO DEPOSITADO';
		ResponseLog('e', 'UNK', ID_CHEQUE, CODIGO_HTTP, RESPUESTA);
		cont_unk++;
	}
} else {
	estadoNeg = 'COELSA no pudo procesar la solicitud.';
	estadoDeposito = 'NO DEPOSITADO';
    ResponseLog('e', 'ER', ID_CHEQUE, CODIGO_HTTP, RESPUESTA);
    cont_desc++;
}

</jsScript_script>
      </jsScript>
      <jsScript>
        <jsScript_type>1</jsScript_type>
        <jsScript_name>Item_0</jsScript_name>
        <jsScript_script>LoadScriptFromTab('utils')
var cont_ok = 0;
var cont_desc = 0;
var cont_unk = 0;
var idArchivo = null;
var msgNull = null;
var fechaUlt = null;
var tipoBusquedaUlt = null;
var fechaProc = date2str(str2date(getVariable('FECHA_PROCESO', 'default'), 'yyyy-MM-dd HH:mm:ss.SSS'), 'yyyy-MM-dd')

function ResponseLog(tipo, msgtipo, cheque, http_resp, json_resp) {
	var msg = null;
	var detalle = '';
	if (msgtipo == 'ER') {
		msg = '*** No se pudo depositar el eCheque = [' + cheque + '] ***';
		detalle = '\n********INICIO RESPUESTA\n' + json_resp + '\n********FIN RESPUESTA';
	} else if (msgtipo == 'OK') {
		msg = '*** Se deposita el eCheque = [' + cheque + '] ***';
	} else if (msgtipo == 'UNK') {
		msg = '*** Error al parsear la respuesta de COELSA ***\n'
		detalle = '\n********INICIO RESPUESTA\n' + json_resp + '\n********FIN RESPUESTA';
	}
	writeToLog(tipo, '\n#######################################################################\n' 
				+ msg 
				+ '\n*** Codigo de respuesta de COELSA = [' + http_resp + '] ***' 
				+ detalle
				+ '\n#');
}
</jsScript_script>
      </jsScript>
      <jsScript>
        <jsScript_type>-1</jsScript_type>
        <jsScript_name>utils</jsScript_name>
        <jsScript_script>var JSON = {};
 
if (!String.hasOwnProperty("repeat")) {
  String.prototype.repeat = function (n) {
    var s = "";
    var a = this;
    for (;;) {
      if (n &amp; 1) s += a;
      n >>= 1;
      if (n) {
        a += a;
      } else break;
    }
    return s;
  };
}
 
if (!Array.hasOwnProperty("reduce")) {
    Array.prototype.reduce = function (callback, initialValue) {
    if (this == null) {
      throw new TypeError(
        "Array.prototype.myReduce called on null or undefined"
      );
    }
 
    if (typeof callback !== "function") {
      throw new TypeError(callback + " is not a function");
    }
 
    var length = this.length;
    var index = 0;
    var accumulator;
 
    if (arguments.length >= 2) {
      accumulator = initialValue;
    } else {
      if (length === 0) {
        throw new TypeError("Reduce of empty array with no initial value");
      }
      accumulator = this[0];
      index = 1;
    }
 
    for (; index &lt; length; index++) {
      if (index in this) {
        accumulator = callback(accumulator, this[index], index, this);
      }
    }
 
    return accumulator;
  };
}
 
(function () {
  JSON.parse = function (json) {
    var pattern = /[^,:{}\[\]0-9.\-+Eaeflnr-u \n\r\t]/;
    var replacedJson = json.replace(/\"(\\.|[^"\\])*\"/g, "");
    return !pattern.test(replacedJson) &amp;&amp; eval("(" + json + ")");
  };
 
  var javaTypes = {
    "java.lang.String": "string",
    "java.math.BigDecimal": "number",
    "java.lang.Long": "number",
    "java.lang.Double": "number",
    "java.lang.Boolean": "boolean",
    "java.util.Date": "date",
    "java.sql.Timestamp": "date",
    "java.net.Inet4Address": "string",
  };
 
  var escapeCharacters = function (str) {
    str = String(str);
    var newStr = "";
    for (var i = 0; i &lt; str.length; i++) {
      var character = str[i];
      switch (character) {
        case "\\":
        case '"':
        case "/":
          newStr += "\\" + character;
          break;
        case "\b":
          newStr += "\\b";
          break;
        case "\f":
          newStr += "\\f";
          break;
        case "\n":
          newStr += "\\n";
          break;
        case "\r":
          newStr += "\\r";
          break;
        case "\t":
          newStr += "\\t";
          break;
        default:
          // /[^,:{}\[\]0-9.\-+Eaeflnr-u \n\r\t]/;
          if (!/[\u0020-\u007e]/.test(character)) {
            newStr += "\\u" + lpad(character.charCodeAt(0).toString(16), "0", 4);
          } else {
            newStr += character;
          }
          break;
      }
    }
    return newStr;
  };
 
  var getValue = function (type, value, replacer, space, indentation) {
    switch (type) {
      case "number":
        return isNaN(value) ? null : value;
      case "boolean":
      case "null":
        return value;
      case "array":
        return arrayStringify(value, replacer, space, indentation);
      case "javaArray":
        return arrayStringify(
          javaArrayShallowCopy(value),
          replacer,
          space,
          indentation
        );
      case "list":
        return arrayStringify(
          javaListShallowCopy(value),
          replacer,
          space,
          indentation
        );
      case "object":
        return stringify(value, replacer, space, indentation + 1);
      case "date":
        return (
          '"' + date2str(value, "yyyy-MM-dd'T'HH:mm:ss.SSSZ", "es", "AGT") + '"'
        );
      default:
        return '"' + escapeCharacters(value) + '"';
    }
  };
 
  var getIndentation = function (space, indentation) {
    if (getType(space) === "number" &amp;&amp; space > 0) {
      return "\n" + " ".repeat(space * indentation);
    } else if (getType(space) === "string") {
      return "\n" + String(space).repeat(indentation);
    }
    return "";
  };
 
  var arrayStringify = function (array, replacer, space, indentation) {
    return (
      "[" +
      array
        .reduce(function (acc, e) {
          return (
            acc +
            stringify(e, replacer, space, indentation + 1) +
            "," +
            getIndentation(space, indentation)
          );
        }, getIndentation(space, indentation))
        .slice(0, -1 - getIndentation(space, indentation).length) +
      getIndentation(space, indentation - 1) +
      "]"
    );
  };
 
  var getType = function (obj) {
    if (obj === null || obj === undefined) return "null";
 
    switch (Object.prototype.toString.call(obj)) {
      case "[object Array]":
        return "array";
      case "[object Date]":
        return "date";
      case "[object Boolean]":
        return "boolean";
      case "[object Number]":
        return "number";
      case "[object String]":
        return "string";
      case "[object Object]":
        return "object";
      case "[object JavaArray]":
        return "javaArray";
      case "[object JavaObject]":
        if (
          java.lang.Class.forName("java.util.List").isAssignableFrom(
            obj.getClass()
          )
        )
          return "list";
        return javaTypes[obj.getClass().getName()];
      default:
        return "undefined";
    }
  };
 
  var javaListShallowCopy = function (list) {
    var arr = [];
    for (var i = 0; i &lt; list.size(); i++) {
      arr.push(list.get(i));
    }
    return arr;
  };
 
  var javaArrayShallowCopy = function (arr) {
    var jsArr = [];
    for (var i = 0; i &lt; arr.length; i++) {
      jsArr.push(arr[i]);
    }
    return jsArr;
  };
 
  var stringify = function (object, replacer, space, indentation) {
    var type = getType(object);
 
    if (type != "object")
      return getValue(type, object, replacer, space, indentation);
 
    var accumulator = getIndentation(space, indentation);
 
    for (var key in object) {
      var value = object[key];
 
      if (typeof value !== "function" &amp;&amp; value !== undefined) {
        // Si hay valor
        if (typeof replacer == "array" &amp;&amp; !replacer.contains(key)) {
          continue;
        } else if (typeof replacer === "function") {
          // Si es una funcion, hay que usarla para retornar valores
          value = replacer(key, value);
        }
        accumulator +=
          '"' +
          key +
          '":' +
          (space ? " " : "") +
          getValue(type, value, replacer, space, indentation) +
          "," +
          getIndentation(space, indentation);
      }
    }
 
    return (
      "{" +
      accumulator.slice(0, -1 - getIndentation(space, indentation).length) +
      getIndentation(space, indentation - 1) +
      "}"
    );
  };
 
  JSON.stringify = function (object, replacer, space) {
    return stringify(object, replacer, space, 1);
  };
})();</jsScript_script>
      </jsScript>
      <jsScript>
        <jsScript_type>2</jsScript_type>
        <jsScript_name>Item_1</jsScript_name>
        <jsScript_script>//FWESFSDFG
var msg_job = '${CRLF}TOPAZ_PROCESS_OK: ';
var msg_dia = 'Busqueda de eCheques para depositar en la fecha ['+fechaUlt+']';

if ((cont_desc+cont_ok+cont_unk) == 0) {
	msg_job += msgNull;
} else {
    if ((tipoBusquedaUlt == 'M') &amp;&amp; (fechaUlt != fechaProc)) {
		msg_dia = 'Busqueda de eCheques para depositar entre las fechas ['+fechaUlt+'] y ['+fechaProc+']'
	}
	msg_job += msg_dia+'${CRLF}- Total de eCheques encontrados: '+(cont_desc+cont_ok+cont_unk)+
					'${CRLF}- eCheques depositados: '+cont_ok+
					'${CRLF}- eCheques rechazados por la CAMARA: '+cont_desc;
	if (cont_unk != 0) {
		msg_job += '${CRLF}-INFO- Hubieron respuestas de la camara que no se pudieron manejar, se recomienda leer el log para saber el estado de esos eCheques.'
	}
	msg_job += '${CRLF}TOPAZ_PROCESS_INFO 1: Archivo [REPORTE_ECHEQ_NEGOCIADOS_${FECHARELOJ_F1}${HORA_F1}.csv] creado en la ruta:${CRLF}-> ${RCO}' 
}

setVariable('MENSAJE_GLOBAL', msg_job, 'r');

setVariable('ID_BITACORA_ARCHIVO', idArchivo, 'r');
setVariable('CANT_TOTAL', (cont_desc+cont_ok+cont_unk), 'r');
setVariable('CANT_OK', cont_ok, 'r');
setVariable('REPORTE', msg_dia, 'r');
setVariable('CORREO_RUTA_ADJUNTOS', '${RCO}REPORTE_ECHEQ_NEGOCIADOS_${FECHARELOJ_F1}${HORA_F1}.csv', 'r');
</jsScript_script>
      </jsScript>
    </jsScripts>
    <fields>
      <field>
        <name>estadoNeg</name>
        <rename>estadoNeg</rename>
        <type>String</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>N</replace>
      </field>
      <field>
        <name>fechaVto</name>
        <rename>fechaVto</rename>
        <type>String</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>N</replace>
      </field>
      <field>
        <name>estadoDeposito</name>
        <rename>estadoDeposito</rename>
        <type>String</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>N</replace>
      </field>
    </fields>
    <attributes/>
    <cluster_schema/>
    <remotesteps>
      <input>
      </input>
      <output>
      </output>
    </remotesteps>
    <GUI>
      <xloc>2320</xloc>
      <yloc>480</yloc>
      <draw>Y</draw>
    </GUI>
  </step>
  <step>
    <name>Ordena por Fecha</name>
    <type>SortRows</type>
    <description/>
    <distribute>Y</distribute>
    <custom_distribution/>
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name/>
    </partitioning>
    <directory>%%java.io.tmpdir%%</directory>
    <prefix>out</prefix>
    <sort_size>1000000</sort_size>
    <free_memory/>
    <compress>N</compress>
    <compress_variable/>
    <unique_rows>N</unique_rows>
    <fields>
      <field>
        <name>FechaParaOrden</name>
        <ascending>N</ascending>
        <case_sensitive>N</case_sensitive>
        <collator_enabled>N</collator_enabled>
        <collator_strength>0</collator_strength>
        <presorted>N</presorted>
      </field>
    </fields>
    <attributes/>
    <cluster_schema/>
    <remotesteps>
      <input>
      </input>
      <output>
      </output>
    </remotesteps>
    <GUI>
      <xloc>2544</xloc>
      <yloc>480</yloc>
      <draw>Y</draw>
    </GUI>
  </step>
  <step>
    <name>Parsea Token</name>
    <type>SelectValues</type>
    <description/>
    <distribute>N</distribute>
    <custom_distribution/>
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name/>
    </partitioning>
    <fields>
      <field>
        <name>key</name>
      </field>
      <field>
        <name>value</name>
      </field>
      <select_unspecified>N</select_unspecified>
      <meta>
        <name>key</name>
        <rename>key</rename>
        <type>String</type>
        <length>-2</length>
        <precision>-2</precision>
        <conversion_mask/>
        <date_format_lenient>false</date_format_lenient>
        <date_format_locale/>
        <date_format_timezone/>
        <lenient_string_to_number>false</lenient_string_to_number>
        <encoding/>
        <decimal_symbol/>
        <grouping_symbol/>
        <currency_symbol/>
        <storage_type/>
      </meta>
      <meta>
        <name>value</name>
        <rename>value</rename>
        <type>String</type>
        <length>-2</length>
        <precision>-2</precision>
        <conversion_mask/>
        <date_format_lenient>false</date_format_lenient>
        <date_format_locale/>
        <date_format_timezone/>
        <lenient_string_to_number>false</lenient_string_to_number>
        <encoding/>
        <decimal_symbol/>
        <grouping_symbol/>
        <currency_symbol/>
        <storage_type/>
      </meta>
    </fields>
    <attributes/>
    <cluster_schema/>
    <remotesteps>
      <input>
      </input>
      <output>
      </output>
    </remotesteps>
    <GUI>
      <xloc>736</xloc>
      <yloc>320</yloc>
      <draw>Y</draw>
    </GUI>
  </step>
  <step>
    <name>Parsea URL</name>
    <type>SelectValues</type>
    <description/>
    <distribute>N</distribute>
    <custom_distribution/>
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name/>
    </partitioning>
    <fields>
      <field>
        <name>Key</name>
      </field>
      <field>
        <name>Value</name>
      </field>
      <select_unspecified>N</select_unspecified>
      <meta>
        <name>Key</name>
        <rename>Key</rename>
        <type>String</type>
        <length>-2</length>
        <precision>-2</precision>
        <conversion_mask/>
        <date_format_lenient>false</date_format_lenient>
        <date_format_locale/>
        <date_format_timezone/>
        <lenient_string_to_number>false</lenient_string_to_number>
        <encoding/>
        <decimal_symbol/>
        <grouping_symbol/>
        <currency_symbol/>
        <storage_type/>
      </meta>
      <meta>
        <name>Value</name>
        <rename>Value</rename>
        <type>String</type>
        <length>-2</length>
        <precision>-2</precision>
        <conversion_mask/>
        <date_format_lenient>false</date_format_lenient>
        <date_format_locale/>
        <date_format_timezone/>
        <lenient_string_to_number>false</lenient_string_to_number>
        <encoding/>
        <decimal_symbol/>
        <grouping_symbol/>
        <currency_symbol/>
        <storage_type/>
      </meta>
    </fields>
    <attributes/>
    <cluster_schema/>
    <remotesteps>
      <input>
      </input>
      <output>
      </output>
    </remotesteps>
    <GUI>
      <xloc>576</xloc>
      <yloc>320</yloc>
      <draw>Y</draw>
    </GUI>
  </step>
  <step>
    <name>Renombra Header</name>
    <type>SelectValues</type>
    <description/>
    <distribute>Y</distribute>
    <custom_distribution/>
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name/>
    </partitioning>
    <fields>
      <field>
        <name>fechaVto</name>
        <rename>Fecha Vencimiento</rename>
      </field>
      <field>
        <name>ID_CHEQUE</name>
        <rename>ID eCheque</rename>
      </field>
      <field>
        <name>CUIT_NEGOCIADOR</name>
        <rename>Cuit Negociador</rename>
      </field>
      <field>
        <name>CMC7</name>
      </field>
      <field>
        <name>estadoNeg</name>
        <rename>Detalle</rename>
      </field>
      <field>
        <name>ID_ARCHIVO</name>
      </field>
      <field>
        <name>estadoDeposito</name>
      </field>
      <field>
        <name>FECHA_VTO</name>
        <rename>FechaParaOrden</rename>
      </field>
      <select_unspecified>N</select_unspecified>
    </fields>
    <attributes/>
    <cluster_schema/>
    <remotesteps>
      <input>
      </input>
      <output>
      </output>
    </remotesteps>
    <GUI>
      <xloc>2432</xloc>
      <yloc>480</yloc>
      <draw>Y</draw>
    </GUI>
  </step>
  <step>
    <name>TIPO BUSQUEDA</name>
    <type>SwitchCase</type>
    <description/>
    <distribute>Y</distribute>
    <custom_distribution/>
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name/>
    </partitioning>
    <fieldname>tipoBusqueda</fieldname>
    <use_contains>N</use_contains>
    <case_value_type>String</case_value_type>
    <case_value_format/>
    <case_value_decimal/>
    <case_value_group/>
    <default_target_step/>
    <cases>
      <case>
        <value>I</value>
        <target_step>IGUAL</target_step>
      </case>
      <case>
        <value>M</value>
        <target_step>MAYOR</target_step>
      </case>
    </cases>
    <attributes/>
    <cluster_schema/>
    <remotesteps>
      <input>
      </input>
      <output>
      </output>
    </remotesteps>
    <GUI>
      <xloc>1344</xloc>
      <yloc>480</yloc>
      <draw>Y</draw>
    </GUI>
  </step>
  <step>
    <name>Token MULE</name>
    <type>StreamLookup</type>
    <description/>
    <distribute>Y</distribute>
    <custom_distribution/>
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name/>
    </partitioning>
    <from>Parsea Token</from>
    <input_sorted>N</input_sorted>
    <preserve_memory>Y</preserve_memory>
    <sorted_list>Y</sorted_list>
    <integer_pair>N</integer_pair>
    <lookup>
      <key>
        <name>keyTOKEN_MULE</name>
        <field>key</field>
      </key>
      <value>
        <name>value</name>
        <rename>TOKEN_MULE</rename>
        <default/>
        <type>String</type>
      </value>
    </lookup>
    <attributes/>
    <cluster_schema/>
    <remotesteps>
      <input>
      </input>
      <output>
      </output>
    </remotesteps>
    <GUI>
      <xloc>736</xloc>
      <yloc>480</yloc>
      <draw>Y</draw>
    </GUI>
  </step>
  <step>
    <name>Token TOPAZ</name>
    <type>StreamLookup</type>
    <description/>
    <distribute>Y</distribute>
    <custom_distribution/>
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name/>
    </partitioning>
    <from>Parsea Token</from>
    <input_sorted>N</input_sorted>
    <preserve_memory>Y</preserve_memory>
    <sorted_list>Y</sorted_list>
    <integer_pair>N</integer_pair>
    <lookup>
      <key>
        <name>keyTOKEN_TOPAZ</name>
        <field>key</field>
      </key>
      <value>
        <name>value</name>
        <rename>TOKEN_TOPAZ</rename>
        <default/>
        <type>String</type>
      </value>
    </lookup>
    <attributes/>
    <cluster_schema/>
    <remotesteps>
      <input>
      </input>
      <output>
      </output>
    </remotesteps>
    <GUI>
      <xloc>880</xloc>
      <yloc>480</yloc>
      <draw>Y</draw>
    </GUI>
  </step>
  <step>
    <name>Topaz-Transaction-ID</name>
    <type>RandomValue</type>
    <description/>
    <distribute>Y</distribute>
    <custom_distribution/>
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name/>
    </partitioning>
    <fields>
      <field>
        <name>Topaz-Transaction-ID</name>
        <type>random uuid4</type>
      </field>
    </fields>
    <attributes/>
    <cluster_schema/>
    <remotesteps>
      <input>
      </input>
      <output>
      </output>
    </remotesteps>
    <GUI>
      <xloc>1024</xloc>
      <yloc>80</yloc>
      <draw>Y</draw>
    </GUI>
  </step>
  <step>
    <name>URLs Property Input</name>
    <type>PropertyInput</type>
    <description/>
    <distribute>Y</distribute>
    <custom_distribution/>
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name/>
    </partitioning>
    <file_type>property</file_type>
    <encoding>UTF-8</encoding>
    <include>N</include>
    <include_field/>
    <filename_Field/>
    <rownum>N</rownum>
    <isaddresult>Y</isaddresult>
    <filefield>N</filefield>
    <rownum_field/>
    <resetrownumber>N</resetrownumber>
    <resolvevaluevariable>N</resolvevaluevariable>
    <ini_section>N</ini_section>
    <ini_section_field/>
    <section/>
    <file>
      <name>${Top.Param}WS_URLs.properties</name>
      <exclude_filemask/>
      <filemask/>
      <file_required>Y</file_required>
      <include_subfolders>N</include_subfolders>
    </file>
    <fields>
      <field>
        <name>Key</name>
        <column>key</column>
        <type>String</type>
        <format/>
        <length>-1</length>
        <precision>-1</precision>
        <currency/>
        <decimal/>
        <group/>
        <trim_type>none</trim_type>
        <repeat>N</repeat>
      </field>
      <field>
        <name>Value</name>
        <column>value</column>
        <type>String</type>
        <format/>
        <length>-1</length>
        <precision>-1</precision>
        <currency/>
        <decimal/>
        <group/>
        <trim_type>none</trim_type>
        <repeat>N</repeat>
      </field>
    </fields>
    <limit>0</limit>
    <shortFileFieldName/>
    <pathFieldName/>
    <hiddenFieldName/>
    <lastModificationTimeFieldName/>
    <uriNameFieldName/>
    <rootUriNameFieldName/>
    <extensionFieldName/>
    <sizeFieldName/>
    <attributes/>
    <cluster_schema/>
    <remotesteps>
      <input>
      </input>
      <output>
      </output>
    </remotesteps>
    <GUI>
      <xloc>576</xloc>
      <yloc>240</yloc>
      <draw>Y</draw>
    </GUI>
  </step>
  <step>
    <name>constructor url y validador</name>
    <type>ScriptValueMod</type>
    <description/>
    <distribute>Y</distribute>
    <custom_distribution/>
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name/>
    </partitioning>
    <compatible>N</compatible>
    <optimizationLevel>9</optimizationLevel>
    <jsScripts>
      <jsScript>
        <jsScript_type>0</jsScript_type>
        <jsScript_name>Script 1</jsScript_name>
        <jsScript_script>if (!fechaHabil) kaboom('La fecha [${FECHA_ECHEQ_DEPOSITO}] no es valida.');
var TOKEN = 'Bearer '+TOKEN_TOPAZ;
var URL = URL_apoderado+'/'+SALDO_NBCH+'/F/';
var METODO = 'GET';
var BODY = null;
var TopazUser = 'TOPWS';
var TopazBranch = 30;
var TopazChannel = 'CANAL 1';


var TIPO_BUSQUEDA = "U";
if (fechaHabil != fechaProceso) TIPO_BUSQUEDA = "R";


var NOMBRE_ARCHIVO = 'REPORTE_ECHEQ_NEGOCIADOS_'+getVariable('FECHARELOJ_F1','')+getVariable('HORA_F1','')+'.csv';






</jsScript_script>
      </jsScript>
      <jsScript>
        <jsScript_type>1</jsScript_type>
        <jsScript_name>Item_0</jsScript_name>
        <jsScript_script>//Script here

var fechaProceso = getVariable('FECHA_PROCESO', '00000000');

const kaboom = function(ERROR) {
	writeToLog('e', ERROR);
	setVariable('msg_err', ERROR, 'r');
	trans_Status = ERROR_TRANSFORMATION;
	_step_.setErrors(1);
	_step_.stopAll();
};</jsScript_script>
      </jsScript>
    </jsScripts>
    <fields>
      <field>
        <name>URL</name>
        <rename>URL</rename>
        <type>String</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>N</replace>
      </field>
      <field>
        <name>METODO</name>
        <rename>METODO</rename>
        <type>String</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>N</replace>
      </field>
      <field>
        <name>BODY</name>
        <rename>BODY</rename>
        <type>String</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>N</replace>
      </field>
      <field>
        <name>TopazUser</name>
        <rename>Topaz-User</rename>
        <type>String</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>N</replace>
      </field>
      <field>
        <name>TopazBranch</name>
        <rename>Topaz-Branch</rename>
        <type>Integer</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>N</replace>
      </field>
      <field>
        <name>TopazChannel</name>
        <rename>Topaz-Channel</rename>
        <type>String</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>N</replace>
      </field>
      <field>
        <name>TOKEN</name>
        <rename>TOKEN</rename>
        <type>String</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>N</replace>
      </field>
      <field>
        <name>TIPO_BUSQUEDA</name>
        <rename>TIPO_BUSQUEDA</rename>
        <type>String</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>N</replace>
      </field>
      <field>
        <name>NOMBRE_ARCHIVO</name>
        <rename>NOMBRE_ARCHIVO</rename>
        <type>String</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>N</replace>
      </field>
    </fields>
    <attributes/>
    <cluster_schema/>
    <remotesteps>
      <input>
      </input>
      <output>
      </output>
    </remotesteps>
    <GUI>
      <xloc>1024</xloc>
      <yloc>0</yloc>
      <draw>Y</draw>
    </GUI>
  </step>
  <step>
    <name>limpio campos</name>
    <type>SelectValues</type>
    <description/>
    <distribute>Y</distribute>
    <custom_distribution/>
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name/>
    </partitioning>
    <fields>
      <select_unspecified>N</select_unspecified>
      <remove>
        <name>keyTOKEN_MULE</name>
      </remove>
      <remove>
        <name>keyTOKEN_TOPAZ</name>
      </remove>
      <remove>
        <name>keyURL_apoderado</name>
      </remove>
      <remove>
        <name>keyURL_deposito</name>
      </remove>
      <remove>
        <name>TOKEN_TOPAZ</name>
      </remove>
      <remove>
        <name>URL_apoderado</name>
      </remove>
      <remove>
        <name>CODIGO_HTTP</name>
      </remove>
      <remove>
        <name>RESPUESTA</name>
      </remove>
      <remove>
        <name>Topaz-Branch</name>
      </remove>
      <remove>
        <name>Topaz-Channel</name>
      </remove>
      <remove>
        <name>Topaz-Transaction-ID</name>
      </remove>
      <remove>
        <name>Topaz-User</name>
      </remove>
      <remove>
        <name>TOKEN_MULE</name>
      </remove>
      <remove>
        <name>URL_deposito</name>
      </remove>
      <remove>
        <name>SALDO_NBCH</name>
      </remove>
    </fields>
    <attributes/>
    <cluster_schema/>
    <remotesteps>
      <input>
      </input>
      <output>
      </output>
    </remotesteps>
    <GUI>
      <xloc>1024</xloc>
      <yloc>480</yloc>
      <draw>Y</draw>
    </GUI>
  </step>
  <step>
    <name>limpio campos 2</name>
    <type>SelectValues</type>
    <description/>
    <distribute>Y</distribute>
    <custom_distribution/>
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name/>
    </partitioning>
    <fields>
      <select_unspecified>N</select_unspecified>
      <remove>
        <name>CBU_NBCH</name>
      </remove>
      <remove>
        <name>DOC_NBCH</name>
      </remove>
    </fields>
    <attributes/>
    <cluster_schema/>
    <remotesteps>
      <input>
      </input>
      <output>
      </output>
    </remotesteps>
    <GUI>
      <xloc>1872</xloc>
      <yloc>480</yloc>
      <draw>Y</draw>
    </GUI>
  </step>
  <step>
    <name>manejo nulos</name>
    <type>Constant</type>
    <description/>
    <distribute>Y</distribute>
    <custom_distribution/>
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name/>
    </partitioning>
    <fields>
      <field>
        <name>RESPUESTA</name>
        <type>String</type>
        <format/>
        <currency/>
        <decimal/>
        <group/>
        <nullif/>
        <length>-1</length>
        <precision>-1</precision>
        <set_empty_string>N</set_empty_string>
      </field>
      <field>
        <name>CODIGO_HTTP</name>
        <type>Integer</type>
        <format/>
        <currency/>
        <decimal/>
        <group/>
        <nullif>999</nullif>
        <length>-1</length>
        <precision>-1</precision>
        <set_empty_string>N</set_empty_string>
      </field>
    </fields>
    <attributes/>
    <cluster_schema/>
    <remotesteps>
      <input>
      </input>
      <output>
      </output>
    </remotesteps>
    <GUI>
      <xloc>2144</xloc>
      <yloc>608</yloc>
      <draw>Y</draw>
    </GUI>
  </step>
  <step>
    <name>obtiene firmantes y remplaza token y url</name>
    <type>ScriptValueMod</type>
    <description/>
    <distribute>Y</distribute>
    <custom_distribution/>
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name/>
    </partitioning>
    <compatible>N</compatible>
    <optimizationLevel>9</optimizationLevel>
    <jsScripts>
      <jsScript>
        <jsScript_type>0</jsScript_type>
        <jsScript_name>Script 1</jsScript_name>
        <jsScript_script>//Script here

if (CODIGO_HTTP == 200) {
  var resultado = JSON.parse(RESPUESTA);
  var personas = resultado[0].persona;

  if (personas.length == 0) {
    kaboom('No se encontraron firmantes');
  } else {
    var limite = personas.length &lt; 3 ? personas.length : 3;

    for (var i = 0; i &lt; limite; i++) {
      var persona = personas[i];
      var obj = {
        //documentoTipo: persona.documento.tipo,
        documentoTipo: 'CUIT',
        documento: persona.documento.numero
      };
      salida.push(obj);
    }
  }
  var firmantes = JSON.stringify(salida);
} else {
	kaboom('No se pudo obtener los firmantes')
}

var TOKEN = 'Bearer '+TOKEN_MULE;
var URL = URL_deposito;
var METODO = 'POST';
</jsScript_script>
      </jsScript>
      <jsScript>
        <jsScript_type>1</jsScript_type>
        <jsScript_name>Item_0</jsScript_name>
        <jsScript_script>LoadScriptFromTab('utils')
var salida = [];

const kaboom = function(ERROR) {
	writeToLog('e', ERROR);
	setVariable('msg_err', ERROR, 'r');
	trans_Status = ERROR_TRANSFORMATION;
	_step_.setErrors(1);
	_step_.stopAll();
};</jsScript_script>
      </jsScript>
      <jsScript>
        <jsScript_type>-1</jsScript_type>
        <jsScript_name>utils</jsScript_name>
        <jsScript_script>var JSON = {};
 
if (!String.hasOwnProperty("repeat")) {
  String.prototype.repeat = function (n) {
    var s = "";
    var a = this;
    for (;;) {
      if (n &amp; 1) s += a;
      n >>= 1;
      if (n) {
        a += a;
      } else break;
    }
    return s;
  };
}
 
if (!Array.hasOwnProperty("reduce")) {
    Array.prototype.reduce = function (callback, initialValue) {
    if (this == null) {
      throw new TypeError(
        "Array.prototype.myReduce called on null or undefined"
      );
    }
 
    if (typeof callback !== "function") {
      throw new TypeError(callback + " is not a function");
    }
 
    var length = this.length;
    var index = 0;
    var accumulator;
 
    if (arguments.length >= 2) {
      accumulator = initialValue;
    } else {
      if (length === 0) {
        throw new TypeError("Reduce of empty array with no initial value");
      }
      accumulator = this[0];
      index = 1;
    }
 
    for (; index &lt; length; index++) {
      if (index in this) {
        accumulator = callback(accumulator, this[index], index, this);
      }
    }
 
    return accumulator;
  };
}
 
(function () {
  JSON.parse = function (json) {
    var pattern = /[^,:{}\[\]0-9.\-+Eaeflnr-u \n\r\t]/;
    var replacedJson = json.replace(/\"(\\.|[^"\\])*\"/g, "");
    return !pattern.test(replacedJson) &amp;&amp; eval("(" + json + ")");
  };
 
  var javaTypes = {
    "java.lang.String": "string",
    "java.math.BigDecimal": "number",
    "java.lang.Long": "number",
    "java.lang.Double": "number",
    "java.lang.Boolean": "boolean",
    "java.util.Date": "date",
    "java.sql.Timestamp": "date",
    "java.net.Inet4Address": "string",
  };
 
  var escapeCharacters = function (str) {
    str = String(str);
    var newStr = "";
    for (var i = 0; i &lt; str.length; i++) {
      var character = str[i];
      switch (character) {
        case "\\":
        case '"':
        case "/":
          newStr += "\\" + character;
          break;
        case "\b":
          newStr += "\\b";
          break;
        case "\f":
          newStr += "\\f";
          break;
        case "\n":
          newStr += "\\n";
          break;
        case "\r":
          newStr += "\\r";
          break;
        case "\t":
          newStr += "\\t";
          break;
        default:
          // /[^,:{}\[\]0-9.\-+Eaeflnr-u \n\r\t]/;
          if (!/[\u0020-\u007e]/.test(character)) {
            newStr += "\\u" + lpad(character.charCodeAt(0).toString(16), "0", 4);
          } else {
            newStr += character;
          }
          break;
      }
    }
    return newStr;
  };
 
  var getValue = function (type, value, replacer, space, indentation) {
    switch (type) {
      case "number":
        return isNaN(value) ? null : value;
      case "boolean":
      case "null":
        return value;
      case "array":
        return arrayStringify(value, replacer, space, indentation);
      case "javaArray":
        return arrayStringify(
          javaArrayShallowCopy(value),
          replacer,
          space,
          indentation
        );
      case "list":
        return arrayStringify(
          javaListShallowCopy(value),
          replacer,
          space,
          indentation
        );
      case "object":
        return stringify(value, replacer, space, indentation + 1);
      case "date":
        return (
          '"' + date2str(value, "yyyy-MM-dd'T'HH:mm:ss.SSSZ", "es", "AGT") + '"'
        );
      default:
        return '"' + escapeCharacters(value) + '"';
    }
  };
 
  var getIndentation = function (space, indentation) {
    if (getType(space) === "number" &amp;&amp; space > 0) {
      return "\n" + " ".repeat(space * indentation);
    } else if (getType(space) === "string") {
      return "\n" + String(space).repeat(indentation);
    }
    return "";
  };
 
  var arrayStringify = function (array, replacer, space, indentation) {
    return (
      "[" +
      array
        .reduce(function (acc, e) {
          return (
            acc +
            stringify(e, replacer, space, indentation + 1) +
            "," +
            getIndentation(space, indentation)
          );
        }, getIndentation(space, indentation))
        .slice(0, -1 - getIndentation(space, indentation).length) +
      getIndentation(space, indentation - 1) +
      "]"
    );
  };
 
  var getType = function (obj) {
    if (obj === null || obj === undefined) return "null";
 
    switch (Object.prototype.toString.call(obj)) {
      case "[object Array]":
        return "array";
      case "[object Date]":
        return "date";
      case "[object Boolean]":
        return "boolean";
      case "[object Number]":
        return "number";
      case "[object String]":
        return "string";
      case "[object Object]":
        return "object";
      case "[object JavaArray]":
        return "javaArray";
      case "[object JavaObject]":
        if (
          java.lang.Class.forName("java.util.List").isAssignableFrom(
            obj.getClass()
          )
        )
          return "list";
        return javaTypes[obj.getClass().getName()];
      default:
        return "undefined";
    }
  };
 
  var javaListShallowCopy = function (list) {
    var arr = [];
    for (var i = 0; i &lt; list.size(); i++) {
      arr.push(list.get(i));
    }
    return arr;
  };
 
  var javaArrayShallowCopy = function (arr) {
    var jsArr = [];
    for (var i = 0; i &lt; arr.length; i++) {
      jsArr.push(arr[i]);
    }
    return jsArr;
  };
 
  var stringify = function (object, replacer, space, indentation) {
    var type = getType(object);
 
    if (type != "object")
      return getValue(type, object, replacer, space, indentation);
 
    var accumulator = getIndentation(space, indentation);
 
    for (var key in object) {
      var value = object[key];
 
      if (typeof value !== "function" &amp;&amp; value !== undefined) {
        // Si hay valor
        if (typeof replacer == "array" &amp;&amp; !replacer.contains(key)) {
          continue;
        } else if (typeof replacer === "function") {
          // Si es una funcion, hay que usarla para retornar valores
          value = replacer(key, value);
        }
        accumulator +=
          '"' +
          key +
          '":' +
          (space ? " " : "") +
          getValue(type, value, replacer, space, indentation) +
          "," +
          getIndentation(space, indentation);
      }
    }
 
    return (
      "{" +
      accumulator.slice(0, -1 - getIndentation(space, indentation).length) +
      getIndentation(space, indentation - 1) +
      "}"
    );
  };
 
  JSON.stringify = function (object, replacer, space) {
    return stringify(object, replacer, space, 1);
  };
})();</jsScript_script>
      </jsScript>
    </jsScripts>
    <fields>
      <field>
        <name>firmantes</name>
        <rename>BODY</rename>
        <type>String</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>Y</replace>
      </field>
      <field>
        <name>URL</name>
        <rename>URL</rename>
        <type>String</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>Y</replace>
      </field>
      <field>
        <name>METODO</name>
        <rename>METODO</rename>
        <type>String</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>Y</replace>
      </field>
      <field>
        <name>TOKEN</name>
        <rename>TOKEN</rename>
        <type>String</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>Y</replace>
      </field>
    </fields>
    <attributes/>
    <cluster_schema/>
    <remotesteps>
      <input>
      </input>
      <output>
      </output>
    </remotesteps>
    <GUI>
      <xloc>1024</xloc>
      <yloc>240</yloc>
      <draw>Y</draw>
    </GUI>
  </step>
  <step>
    <name>quito nulo</name>
    <type>FilterRows</type>
    <description/>
    <distribute>Y</distribute>
    <custom_distribution/>
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name/>
    </partitioning>
    <send_true_to>CONSULTA DEPOSITO</send_true_to>
    <send_false_to>manejo nulos</send_false_to>
    <compare>
      <condition>
        <negated>N</negated>
        <leftvalue>ID_CHEQUE</leftvalue>
        <function>IS NOT NULL</function>
        <rightvalue/>
      </condition>
    </compare>
    <attributes/>
    <cluster_schema/>
    <remotesteps>
      <input>
      </input>
      <output>
      </output>
    </remotesteps>
    <GUI>
      <xloc>2000</xloc>
      <yloc>480</yloc>
      <draw>Y</draw>
    </GUI>
  </step>
  <step>
    <name>url apoderado</name>
    <type>StreamLookup</type>
    <description/>
    <distribute>Y</distribute>
    <custom_distribution/>
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name/>
    </partitioning>
    <from>Parsea URL</from>
    <input_sorted>N</input_sorted>
    <preserve_memory>Y</preserve_memory>
    <sorted_list>Y</sorted_list>
    <integer_pair>N</integer_pair>
    <lookup>
      <key>
        <name>keyURL_apoderado</name>
        <field>Key</field>
      </key>
      <value>
        <name>Value</name>
        <rename>URL_apoderado</rename>
        <default/>
        <type>String</type>
      </value>
    </lookup>
    <attributes/>
    <cluster_schema/>
    <remotesteps>
      <input>
      </input>
      <output>
      </output>
    </remotesteps>
    <GUI>
      <xloc>576</xloc>
      <yloc>480</yloc>
      <draw>Y</draw>
    </GUI>
  </step>
  <step>
    <name>url deposito</name>
    <type>StreamLookup</type>
    <description/>
    <distribute>Y</distribute>
    <custom_distribution/>
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name/>
    </partitioning>
    <from>Parsea URL</from>
    <input_sorted>N</input_sorted>
    <preserve_memory>Y</preserve_memory>
    <sorted_list>Y</sorted_list>
    <integer_pair>N</integer_pair>
    <lookup>
      <key>
        <name>keyURL_deposito</name>
        <field>Key</field>
      </key>
      <value>
        <name>Value</name>
        <rename>URL_deposito</rename>
        <default/>
        <type>String</type>
      </value>
    </lookup>
    <attributes/>
    <cluster_schema/>
    <remotesteps>
      <input>
      </input>
      <output>
      </output>
    </remotesteps>
    <GUI>
      <xloc>416</xloc>
      <yloc>480</yloc>
      <draw>Y</draw>
    </GUI>
  </step>
  <step_error_handling>
  </step_error_handling>
  <slave-step-copy-partition-distribution>
  </slave-step-copy-partition-distribution>
  <slave_transformation>N</slave_transformation>
  <attributes/>
</transformation>
