<?xml version="1.0" encoding="UTF-8"?>
<transformation>
  <info>
    <name>ITF_ECHEQ_EXTRACT_LINK_PROCESA</name>
    <description/>
    <extended_description/>
    <trans_version/>
    <trans_type>Normal</trans_type>
    <trans_status>0</trans_status>
    <directory>/</directory>
    <parameters>
    </parameters>
    <log>
      <trans-log-table>
        <connection/>
        <schema/>
        <table/>
        <size_limit_lines/>
        <interval/>
        <timeout_days/>
        <field>
          <id>ID_BATCH</id>
          <enabled>Y</enabled>
          <name>ID_BATCH</name>
        </field>
        <field>
          <id>CHANNEL_ID</id>
          <enabled>Y</enabled>
          <name>CHANNEL_ID</name>
        </field>
        <field>
          <id>TRANSNAME</id>
          <enabled>Y</enabled>
          <name>TRANSNAME</name>
        </field>
        <field>
          <id>STATUS</id>
          <enabled>Y</enabled>
          <name>STATUS</name>
        </field>
        <field>
          <id>LINES_READ</id>
          <enabled>Y</enabled>
          <name>LINES_READ</name>
          <subject/>
        </field>
        <field>
          <id>LINES_WRITTEN</id>
          <enabled>Y</enabled>
          <name>LINES_WRITTEN</name>
          <subject/>
        </field>
        <field>
          <id>LINES_UPDATED</id>
          <enabled>Y</enabled>
          <name>LINES_UPDATED</name>
          <subject/>
        </field>
        <field>
          <id>LINES_INPUT</id>
          <enabled>Y</enabled>
          <name>LINES_INPUT</name>
          <subject/>
        </field>
        <field>
          <id>LINES_OUTPUT</id>
          <enabled>Y</enabled>
          <name>LINES_OUTPUT</name>
          <subject/>
        </field>
        <field>
          <id>LINES_REJECTED</id>
          <enabled>Y</enabled>
          <name>LINES_REJECTED</name>
          <subject/>
        </field>
        <field>
          <id>ERRORS</id>
          <enabled>Y</enabled>
          <name>ERRORS</name>
        </field>
        <field>
          <id>STARTDATE</id>
          <enabled>Y</enabled>
          <name>STARTDATE</name>
        </field>
        <field>
          <id>ENDDATE</id>
          <enabled>Y</enabled>
          <name>ENDDATE</name>
        </field>
        <field>
          <id>LOGDATE</id>
          <enabled>Y</enabled>
          <name>LOGDATE</name>
        </field>
        <field>
          <id>DEPDATE</id>
          <enabled>Y</enabled>
          <name>DEPDATE</name>
        </field>
        <field>
          <id>REPLAYDATE</id>
          <enabled>Y</enabled>
          <name>REPLAYDATE</name>
        </field>
        <field>
          <id>LOG_FIELD</id>
          <enabled>Y</enabled>
          <name>LOG_FIELD</name>
        </field>
        <field>
          <id>EXECUTING_SERVER</id>
          <enabled>N</enabled>
          <name>EXECUTING_SERVER</name>
        </field>
        <field>
          <id>EXECUTING_USER</id>
          <enabled>N</enabled>
          <name>EXECUTING_USER</name>
        </field>
        <field>
          <id>CLIENT</id>
          <enabled>N</enabled>
          <name>CLIENT</name>
        </field>
      </trans-log-table>
      <perf-log-table>
        <connection/>
        <schema/>
        <table/>
        <interval/>
        <timeout_days/>
        <field>
          <id>ID_BATCH</id>
          <enabled>Y</enabled>
          <name>ID_BATCH</name>
        </field>
        <field>
          <id>SEQ_NR</id>
          <enabled>Y</enabled>
          <name>SEQ_NR</name>
        </field>
        <field>
          <id>LOGDATE</id>
          <enabled>Y</enabled>
          <name>LOGDATE</name>
        </field>
        <field>
          <id>TRANSNAME</id>
          <enabled>Y</enabled>
          <name>TRANSNAME</name>
        </field>
        <field>
          <id>STEPNAME</id>
          <enabled>Y</enabled>
          <name>STEPNAME</name>
        </field>
        <field>
          <id>STEP_COPY</id>
          <enabled>Y</enabled>
          <name>STEP_COPY</name>
        </field>
        <field>
          <id>LINES_READ</id>
          <enabled>Y</enabled>
          <name>LINES_READ</name>
        </field>
        <field>
          <id>LINES_WRITTEN</id>
          <enabled>Y</enabled>
          <name>LINES_WRITTEN</name>
        </field>
        <field>
          <id>LINES_UPDATED</id>
          <enabled>Y</enabled>
          <name>LINES_UPDATED</name>
        </field>
        <field>
          <id>LINES_INPUT</id>
          <enabled>Y</enabled>
          <name>LINES_INPUT</name>
        </field>
        <field>
          <id>LINES_OUTPUT</id>
          <enabled>Y</enabled>
          <name>LINES_OUTPUT</name>
        </field>
        <field>
          <id>LINES_REJECTED</id>
          <enabled>Y</enabled>
          <name>LINES_REJECTED</name>
        </field>
        <field>
          <id>ERRORS</id>
          <enabled>Y</enabled>
          <name>ERRORS</name>
        </field>
        <field>
          <id>INPUT_BUFFER_ROWS</id>
          <enabled>Y</enabled>
          <name>INPUT_BUFFER_ROWS</name>
        </field>
        <field>
          <id>OUTPUT_BUFFER_ROWS</id>
          <enabled>Y</enabled>
          <name>OUTPUT_BUFFER_ROWS</name>
        </field>
      </perf-log-table>
      <channel-log-table>
        <connection/>
        <schema/>
        <table/>
        <timeout_days/>
        <field>
          <id>ID_BATCH</id>
          <enabled>Y</enabled>
          <name>ID_BATCH</name>
        </field>
        <field>
          <id>CHANNEL_ID</id>
          <enabled>Y</enabled>
          <name>CHANNEL_ID</name>
        </field>
        <field>
          <id>LOG_DATE</id>
          <enabled>Y</enabled>
          <name>LOG_DATE</name>
        </field>
        <field>
          <id>LOGGING_OBJECT_TYPE</id>
          <enabled>Y</enabled>
          <name>LOGGING_OBJECT_TYPE</name>
        </field>
        <field>
          <id>OBJECT_NAME</id>
          <enabled>Y</enabled>
          <name>OBJECT_NAME</name>
        </field>
        <field>
          <id>OBJECT_COPY</id>
          <enabled>Y</enabled>
          <name>OBJECT_COPY</name>
        </field>
        <field>
          <id>REPOSITORY_DIRECTORY</id>
          <enabled>Y</enabled>
          <name>REPOSITORY_DIRECTORY</name>
        </field>
        <field>
          <id>FILENAME</id>
          <enabled>Y</enabled>
          <name>FILENAME</name>
        </field>
        <field>
          <id>OBJECT_ID</id>
          <enabled>Y</enabled>
          <name>OBJECT_ID</name>
        </field>
        <field>
          <id>OBJECT_REVISION</id>
          <enabled>Y</enabled>
          <name>OBJECT_REVISION</name>
        </field>
        <field>
          <id>PARENT_CHANNEL_ID</id>
          <enabled>Y</enabled>
          <name>PARENT_CHANNEL_ID</name>
        </field>
        <field>
          <id>ROOT_CHANNEL_ID</id>
          <enabled>Y</enabled>
          <name>ROOT_CHANNEL_ID</name>
        </field>
      </channel-log-table>
      <step-log-table>
        <connection/>
        <schema/>
        <table/>
        <timeout_days/>
        <field>
          <id>ID_BATCH</id>
          <enabled>Y</enabled>
          <name>ID_BATCH</name>
        </field>
        <field>
          <id>CHANNEL_ID</id>
          <enabled>Y</enabled>
          <name>CHANNEL_ID</name>
        </field>
        <field>
          <id>LOG_DATE</id>
          <enabled>Y</enabled>
          <name>LOG_DATE</name>
        </field>
        <field>
          <id>TRANSNAME</id>
          <enabled>Y</enabled>
          <name>TRANSNAME</name>
        </field>
        <field>
          <id>STEPNAME</id>
          <enabled>Y</enabled>
          <name>STEPNAME</name>
        </field>
        <field>
          <id>STEP_COPY</id>
          <enabled>Y</enabled>
          <name>STEP_COPY</name>
        </field>
        <field>
          <id>LINES_READ</id>
          <enabled>Y</enabled>
          <name>LINES_READ</name>
        </field>
        <field>
          <id>LINES_WRITTEN</id>
          <enabled>Y</enabled>
          <name>LINES_WRITTEN</name>
        </field>
        <field>
          <id>LINES_UPDATED</id>
          <enabled>Y</enabled>
          <name>LINES_UPDATED</name>
        </field>
        <field>
          <id>LINES_INPUT</id>
          <enabled>Y</enabled>
          <name>LINES_INPUT</name>
        </field>
        <field>
          <id>LINES_OUTPUT</id>
          <enabled>Y</enabled>
          <name>LINES_OUTPUT</name>
        </field>
        <field>
          <id>LINES_REJECTED</id>
          <enabled>Y</enabled>
          <name>LINES_REJECTED</name>
        </field>
        <field>
          <id>ERRORS</id>
          <enabled>Y</enabled>
          <name>ERRORS</name>
        </field>
        <field>
          <id>LOG_FIELD</id>
          <enabled>N</enabled>
          <name>LOG_FIELD</name>
        </field>
      </step-log-table>
      <metrics-log-table>
        <connection/>
        <schema/>
        <table/>
        <timeout_days/>
        <field>
          <id>ID_BATCH</id>
          <enabled>Y</enabled>
          <name>ID_BATCH</name>
        </field>
        <field>
          <id>CHANNEL_ID</id>
          <enabled>Y</enabled>
          <name>CHANNEL_ID</name>
        </field>
        <field>
          <id>LOG_DATE</id>
          <enabled>Y</enabled>
          <name>LOG_DATE</name>
        </field>
        <field>
          <id>METRICS_DATE</id>
          <enabled>Y</enabled>
          <name>METRICS_DATE</name>
        </field>
        <field>
          <id>METRICS_CODE</id>
          <enabled>Y</enabled>
          <name>METRICS_CODE</name>
        </field>
        <field>
          <id>METRICS_DESCRIPTION</id>
          <enabled>Y</enabled>
          <name>METRICS_DESCRIPTION</name>
        </field>
        <field>
          <id>METRICS_SUBJECT</id>
          <enabled>Y</enabled>
          <name>METRICS_SUBJECT</name>
        </field>
        <field>
          <id>METRICS_TYPE</id>
          <enabled>Y</enabled>
          <name>METRICS_TYPE</name>
        </field>
        <field>
          <id>METRICS_VALUE</id>
          <enabled>Y</enabled>
          <name>METRICS_VALUE</name>
        </field>
      </metrics-log-table>
    </log>
    <maxdate>
      <connection/>
      <table/>
      <field/>
      <offset>0.0</offset>
      <maxdiff>0.0</maxdiff>
    </maxdate>
    <size_rowset>10000</size_rowset>
    <sleep_time_empty>50</sleep_time_empty>
    <sleep_time_full>50</sleep_time_full>
    <unique_connections>N</unique_connections>
    <feedback_shown>Y</feedback_shown>
    <feedback_size>50000</feedback_size>
    <using_thread_priorities>Y</using_thread_priorities>
    <shared_objects_file/>
    <capture_step_performance>N</capture_step_performance>
    <step_performance_capturing_delay>1000</step_performance_capturing_delay>
    <step_performance_capturing_size_limit>100</step_performance_capturing_size_limit>
    <dependencies>
    </dependencies>
    <partitionschemas>
    </partitionschemas>
    <slaveservers>
    </slaveservers>
    <clusterschemas>
    </clusterschemas>
    <created_user>-</created_user>
    <created_date>2025/01/22 11:10:50.792</created_date>
    <modified_user>-</modified_user>
    <modified_date>2025/01/22 11:10:50.792</modified_date>
    <key_for_session_key>H4sIAAAAAAAAAAMAAAAAAAAAAAA=</key_for_session_key>
    <is_key_private>N</is_key_private>
  </info>
  <notepads>
    <notepad>
      <note>Reporte totalizador</note>
      <xloc>1808</xloc>
      <yloc>96</yloc>
      <width>141</width>
      <heigth>30</heigth>
      <fontname>Segoe UI</fontname>
      <fontsize>9</fontsize>
      <fontbold>N</fontbold>
      <fontitalic>N</fontitalic>
      <fontcolorred>0</fontcolorred>
      <fontcolorgreen>0</fontcolorgreen>
      <fontcolorblue>0</fontcolorblue>
      <backgroundcolorred>255</backgroundcolorred>
      <backgroundcolorgreen>205</backgroundcolorgreen>
      <backgroundcolorblue>112</backgroundcolorblue>
      <bordercolorred>100</bordercolorred>
      <bordercolorgreen>100</bordercolorgreen>
      <bordercolorblue>100</bordercolorblue>
      <drawshadow>Y</drawshadow>
    </notepad>
  </notepads>
  <connection>
    <name>TopazDS</name>
    <server/>
    <type>MSSQL</type>
    <access>JNDI</access>
    <database>TopazDS</database>
    <port>1521</port>
    <username/>
    <password>Encrypted </password>
    <servername/>
    <data_tablespace/>
    <index_tablespace/>
    <attributes>
      <attribute>
        <code>FORCE_IDENTIFIERS_TO_LOWERCASE</code>
        <attribute>N</attribute>
      </attribute>
      <attribute>
        <code>FORCE_IDENTIFIERS_TO_UPPERCASE</code>
        <attribute>N</attribute>
      </attribute>
      <attribute>
        <code>IS_CLUSTERED</code>
        <attribute>N</attribute>
      </attribute>
      <attribute>
        <code>MSSQL_DOUBLE_DECIMAL_SEPARATOR</code>
        <attribute>N</attribute>
      </attribute>
      <attribute>
        <code>PORT_NUMBER</code>
        <attribute>1521</attribute>
      </attribute>
      <attribute>
        <code>PRESERVE_RESERVED_WORD_CASE</code>
        <attribute>Y</attribute>
      </attribute>
      <attribute>
        <code>QUOTE_ALL_FIELDS</code>
        <attribute>N</attribute>
      </attribute>
      <attribute>
        <code>SUPPORTS_BOOLEAN_DATA_TYPE</code>
        <attribute>Y</attribute>
      </attribute>
      <attribute>
        <code>SUPPORTS_TIMESTAMP_DATA_TYPE</code>
        <attribute>Y</attribute>
      </attribute>
      <attribute>
        <code>USE_POOLING</code>
        <attribute>N</attribute>
      </attribute>
    </attributes>
  </connection>
  <order>
    <hop>
      <from>lastRow</from>
      <to>Cancelatorias</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>Cancelatorias</from>
      <to>Detalle</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>IF_ERROR</from>
      <to>Reporte de errores</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>Lee archivo</from>
      <to>lastRow</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>Select values</from>
      <to>Graba Echeqs</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>Graba Echeqs</from>
      <to>Sin error?</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>Sin error?</from>
      <to>Error en generico</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>Valida set de datos</from>
      <to>Selecciona registros</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>Error en generico</from>
      <to>Normaliza errores</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>Selecciona registros</from>
      <to>IF_ERROR</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>Normaliza errores</from>
      <to>IF_ERROR</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>Lee archivo</from>
      <to>Detecta flujo vacio</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>Detecta flujo vacio</from>
      <to>Error archivo vacio</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>Sin error?</from>
      <to>REG_OK</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>Sort rows</from>
      <to>reporteLastRow</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>reporteLastRow</from>
      <to>Configura reporte</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>Configura reporte</from>
      <to>Selecciona para reporte</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>Selecciona para reporte</from>
      <to>Reporte de totales</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>REG_OK</from>
      <to>Sort rows</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>Detalle</from>
      <to>Valida set de datos</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>Valida set de datos</from>
      <to>Configuración</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>Descartar echeqs</from>
      <to>Select values</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>Configuración</from>
      <to>Database lookup</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>Database lookup</from>
      <to>Descartar echeqs</to>
      <enabled>Y</enabled>
    </hop>
  </order>
  <step>
    <name>Cancelatorias</name>
    <type>ScriptValueMod</type>
    <description/>
    <distribute>Y</distribute>
    <custom_distribution/>
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name/>
    </partitioning>
    <compatible>N</compatible>
    <optimizationLevel>9</optimizationLevel>
    <jsScripts>
      <jsScript>
        <jsScript_type>0</jsScript_type>
        <jsScript_name>Transform</jsScript_name>
        <jsScript_script>trans_Status = CONTINUE_TRANSFORMATION;

regCantidad++

// Valida largo del registro
if (linea.length != 350) {
	kaboom('Largo de registro inválido: Registro N° '+regCantidad+' - Valor: ['+linea.length+']');
}
// Valida tipo de Identificador de registro
else if (['H','D','T'].indexOf(String(ID_TIPO_REG))==-1 ) {
	kaboom('Identificador tipo de registro inválido: Registro N° '+regCantidad+' - Valor: ['+ID_TIPO_REG+']');
} 
else {
	// Contar y validar Cabeza
	if (ID_TIPO_REG == 'H') {
		cabCantidad++;
		if (cabCantidad == 1) {
			if (regCantidad != 1) {
				kaboom('Cabecera inválida: Debe estar en la primera fila del archivo ['+archivo+']. ');
			}
			else {
				var cab_ENT_FIID = trim(substr(linea, 1, 5));
				if (isNaN(cab_ENT_FIID)) {
					kaboom('Entidad de la cabecera ['+cab_ENT_FIID+'] debe ser numérico');
				}
				else {
					cab_ENT_FIID = parseInt(cab_ENT_FIID, 10);
					if (cab_ENT_FIID != 311) kaboom('El archivo ['+archivo+']: NO es del NBCH, el banco informado es '+cab_ENT_FIID+'. ');
				};
			};
		};
	};
	
	// Contar y validar Pie
	if (ID_TIPO_REG == 'T') {
		pieCantidad++;
		if (pieCantidad == 1) {
			if(lastRow != true) {
				kaboom('Pie inválido: Debe estar en la última fila del archivo ['+archivo+']. ');
			}
			else {
				var pie_regCantidad = trim(substr(linea, 1, 10));
				if (isNaN(pie_regCantidad)) {
					kaboom('Cantidad de registros del Pie ['+pie_regCantidad+'] debe ser numérico');
				}
				else {
					pie_regCantidad = parseInt(pie_regCantidad, 10);
					if (regCantidad != pie_regCantidad) kaboom('El archivo ['+archivo+']: Tiene diferencia en lo informado en el Pie: '+pie_regCantidad+' y lo procesado: '+regCantidad+'. ');
				};
			};
		};
	};
	
	// Contar detalle descartar registros que no son detalle
	if (ID_TIPO_REG == 'D') {
		detCantidad++;
	}
	else {
		trans_Status = SKIP_TRANSFORMATION;
	};
};	

// Continúa en End script...

</jsScript_script>
      </jsScript>
      <jsScript>
        <jsScript_type>1</jsScript_type>
        <jsScript_name>Start</jsScript_name>
        <jsScript_script>//Script here
LoadScriptFromTab('Util');

regCantidad = 0;

cabCantidad = 0;
detCantidad = 0;
pieCantidad = 0;

var archivo = getVariable('archivo', '');

</jsScript_script>
      </jsScript>
      <jsScript>
        <jsScript_type>2</jsScript_type>
        <jsScript_name>End</jsScript_name>
        <jsScript_script>//Script here
var ERROR = '';

// Valida cantidad tipo de registros
if (cabCantidad == 0) ERROR += 'No tiene cabecera. '
else if (cabCantidad > 1) ERROR += 'Tiene más de una cabecera. '

if (detCantidad == 0) ERROR += 'No tiene detalle. '

if (pieCantidad == 0) ERROR += 'No tiene pie. '
else if (pieCantidad > 1) ERROR += 'Tiene más de un pie. '

if (ERROR != '') {
	ERROR = 'El archivo ['+archivo+']: '+ERROR;
	kaboom(ERROR);
};

// Setea total de echeqs leídos
setVariable('REG_TOTAL', detCantidad, 'r');</jsScript_script>
      </jsScript>
      <jsScript>
        <jsScript_type>-1</jsScript_type>
        <jsScript_name>Util</jsScript_name>
        <jsScript_script>//Script here

const kaboom = function(ERROR) {
	writeToLog('e', ERROR);
	setVariable('msg_err', ERROR, 'r');
	trans_Status = ERROR_TRANSFORMATION;
	_step_.setErrors(1);
	_step_.stopAll();

};

const parseDate = function (date, format) {
  var parsedDate;
  try {
    parsedDate = str2date( date, format);
  } catch (ex) {
    return null;
  }
 
  var reversedDate = date2str( parsedDate, format);
 
  if ( reversedDate == date) {
    return parsedDate;
  } else {
    return null;
  }
}
</jsScript_script>
      </jsScript>
    </jsScripts>
    <fields>
      <field>
        <name>detCantidad</name>
        <rename>detCantidad</rename>
        <type>Integer</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>N</replace>
      </field>
      <field>
        <name>regCantidad</name>
        <rename>regCantidad</rename>
        <type>Integer</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>N</replace>
      </field>
      <field>
        <name>archivo</name>
        <rename>archivo</rename>
        <type>String</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>N</replace>
      </field>
    </fields>
    <attributes/>
    <cluster_schema/>
    <remotesteps>
      <input>
      </input>
      <output>
      </output>
    </remotesteps>
    <GUI>
      <xloc>288</xloc>
      <yloc>160</yloc>
      <draw>Y</draw>
    </GUI>
  </step>
  <step>
    <name>Configura reporte</name>
    <type>ScriptValueMod</type>
    <description/>
    <distribute>Y</distribute>
    <custom_distribution/>
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name/>
    </partitioning>
    <compatible>N</compatible>
    <optimizationLevel>9</optimizationLevel>
    <jsScripts>
      <jsScript>
        <jsScript_type>0</jsScript_type>
        <jsScript_name>Script 1</jsScript_name>
        <jsScript_script>trans_Status = CONTINUE_TRANSFORMATION;
var IF_CAMARA = '';
var IF_REPORTE = '';

regTotal++
importeTotal = importeTotal.add( new java.math.BigDecimal( java.lang.String.valueOf(IMPORTE) ) );

switch(String(REG_TIPO)) {

	case 'D':
		cantidadDepositos++
		importeDepositos = importeDepositos.add( new java.math.BigDecimal( java.lang.String.valueOf(IMPORTE) ) );
		break;
	case 'C':
		cantidadCustodia++
		importeCustodia = importeCustodia.add( new java.math.BigDecimal( java.lang.String.valueOf(IMPORTE) ) );
		break;
	case 'R':
		cantidadRescate++
		importeRescate = importeRescate.add( new java.math.BigDecimal( java.lang.String.valueOf(IMPORTE) ) );
		break;
	case 'N':
		cantidadNegociacion++
		importeNegociacion = importeNegociacion.add( new java.math.BigDecimal( java.lang.String.valueOf(IMPORTE) ) );
		break;
	default:
		writeToLog('e', 'Registro tipo ['+REG_TIPO+']: NO SE PUDO ACUMULAR');
}

if (EMI_FIID != 311) {
	cantidadCamara++;
	importeCamara = importeCamara.add( new java.math.BigDecimal( java.lang.String.valueOf(IMPORTE) ) );
};


if (reporteLastRow == false) {
	trans_Status = SKIP_TRANSFORMATION;
} else {

	if (cantidadCamara==0) {
		DESCRIPCION = 'NO se recibieron ECHEQS para enviar a cámara, por lo que NO se generan archivos adicionales';
	} else {
		DESCRIPCION = 'Se recibieron '+cantidadCamara+' ECHEQS para enviar a cámara, por lo que se deberá realizar el proceso de recepción TOPAZ , y su posterior envío a cámara';
	};

	IF_CAMARA = '${CRLF}TOPAZ_PROCESS_INFO_1: '+DESCRIPCION;
	IF_REPORTE = '${CRLF}TOPAZ_PROCESS_INFO_2: Reporte de totales generado en: '+FILE_NAME;

}</jsScript_script>
      </jsScript>
      <jsScript>
        <jsScript_type>1</jsScript_type>
        <jsScript_name>Item_0</jsScript_name>
        <jsScript_script>//Script here
var regTotal = 0;
var importeTotal = java.math.BigDecimal.ZERO;

var cantidadDepositos = 0;
var importeDepositos = java.math.BigDecimal.ZERO;

var cantidadCustodia = 0;
var importeCustodia = java.math.BigDecimal.ZERO;

var cantidadRescate = 0;
var importeRescate = java.math.BigDecimal.ZERO;

var cantidadNegociacion= 0;
var importeNegociacion = java.math.BigDecimal.ZERO;

var cantidadCamara = 0;
var importeCamara = java.math.BigDecimal.ZERO;

var SOPORTE = getVariable('archivo', '');
var USUARIO = getVariable('USUARIO', '');
var TERMINAL = getVariable('MAQUINA', '');

var FECHA = getVariable('FECHATOP_F1', '');
var HORA = String(getVariable('HORA', '')).replace(/:/g, "");

var RCO = getVariable('RCO', '');
FILE_NAME = RCO+FECHA+'_ECHEQ_LINK_TOTAL.csv';


</jsScript_script>
      </jsScript>
      <jsScript>
        <jsScript_type>2</jsScript_type>
        <jsScript_name>Item_1</jsScript_name>
        <jsScript_script>//Script here

setVariable('IF_CAMARA', IF_CAMARA, 'r');
setVariable('IF_REPORTE', IF_REPORTE, 'r');</jsScript_script>
      </jsScript>
    </jsScripts>
    <fields>
      <field>
        <name>DESCRIPCION</name>
        <rename>DESCRIPCION</rename>
        <type>String</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>Y</replace>
      </field>
      <field>
        <name>FILE_NAME</name>
        <rename>FILE_NAME</rename>
        <type>String</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>N</replace>
      </field>
      <field>
        <name>SOPORTE</name>
        <rename>SOPORTE</rename>
        <type>String</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>N</replace>
      </field>
      <field>
        <name>USUARIO</name>
        <rename>USUARIO</rename>
        <type>String</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>N</replace>
      </field>
      <field>
        <name>TERMINAL</name>
        <rename>TERMINAL</rename>
        <type>String</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>N</replace>
      </field>
      <field>
        <name>FECHA</name>
        <rename>FECHA</rename>
        <type>String</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>N</replace>
      </field>
      <field>
        <name>HORA</name>
        <rename>HORA</rename>
        <type>String</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>N</replace>
      </field>
      <field>
        <name>cantidadDepositos</name>
        <rename>cantidadDepositos</rename>
        <type>Integer</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>N</replace>
      </field>
      <field>
        <name>cantidadCustodia</name>
        <rename>cantidadCustodia</rename>
        <type>Integer</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>N</replace>
      </field>
      <field>
        <name>cantidadRescate</name>
        <rename>cantidadRescate</rename>
        <type>Integer</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>N</replace>
      </field>
      <field>
        <name>cantidadNegociacion</name>
        <rename>cantidadNegociacion</rename>
        <type>Integer</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>N</replace>
      </field>
      <field>
        <name>importeDepositos</name>
        <rename>importeDepositos</rename>
        <type>BigNumber</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>N</replace>
      </field>
      <field>
        <name>importeCustodia</name>
        <rename>importeCustodia</rename>
        <type>BigNumber</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>N</replace>
      </field>
      <field>
        <name>importeRescate</name>
        <rename>importeRescate</rename>
        <type>BigNumber</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>N</replace>
      </field>
      <field>
        <name>importeNegociacion</name>
        <rename>importeNegociacion</rename>
        <type>BigNumber</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>N</replace>
      </field>
      <field>
        <name>regTotal</name>
        <rename>regTotal</rename>
        <type>Integer</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>N</replace>
      </field>
      <field>
        <name>importeTotal</name>
        <rename>importeTotal</rename>
        <type>BigNumber</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>N</replace>
      </field>
      <field>
        <name>cantidadCamara</name>
        <rename>cantidadCamara</rename>
        <type>Integer</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>N</replace>
      </field>
      <field>
        <name>importeCamara</name>
        <rename>importeCamara</rename>
        <type>BigNumber</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>N</replace>
      </field>
    </fields>
    <attributes/>
    <cluster_schema/>
    <remotesteps>
      <input>
      </input>
      <output>
      </output>
    </remotesteps>
    <GUI>
      <xloc>2144</xloc>
      <yloc>160</yloc>
      <draw>Y</draw>
    </GUI>
  </step>
  <step>
    <name>Configuración</name>
    <type>ScriptValueMod</type>
    <description/>
    <distribute>Y</distribute>
    <custom_distribution/>
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name/>
    </partitioning>
    <compatible>N</compatible>
    <optimizationLevel>9</optimizationLevel>
    <jsScripts>
      <jsScript>
        <jsScript_type>0</jsScript_type>
        <jsScript_name>Script 1</jsScript_name>
        <jsScript_script>

var IMPORTE = new java.math.BigDecimal(MONTO);

IMPORTE = IMPORTE.scaleByPowerOfTen(-2);

EMI_FIID = parseInt(EMI_FIID, 10);
BENEF_FIID = parseInt(BENEF_FIID, 10);

EMI_SUC = parseInt(EMI_SUC, 10);
BENEF_SUC = parseInt(BENEF_SUC, 10);

EMI_CUE = parseInt(EMI_CUE, 10);
BENEF_CUE = parseInt(BENEF_CUE, 10);

CANAL = 1;
ORDEN = 0;

var ESTADO = 'RC';
var DESCRIPCION = 'Recibo';

var CLE_CHEQUE_ID = trim(String(CHEQ_ID));
</jsScript_script>
      </jsScript>
    </jsScripts>
    <fields>
      <field>
        <name>ESTADO</name>
        <rename>ESTADO</rename>
        <type>String</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>N</replace>
      </field>
      <field>
        <name>DESCRIPCION</name>
        <rename>DESCRIPCION</rename>
        <type>String</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>N</replace>
      </field>
      <field>
        <name>IMPORTE</name>
        <rename>IMPORTE</rename>
        <type>BigNumber</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>N</replace>
      </field>
      <field>
        <name>EMI_FIID</name>
        <rename>EMI_FIID</rename>
        <type>Integer</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>Y</replace>
      </field>
      <field>
        <name>BENEF_FIID</name>
        <rename>BENEF_FIID</rename>
        <type>Integer</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>Y</replace>
      </field>
      <field>
        <name>EMI_SUC</name>
        <rename>EMI_SUC</rename>
        <type>Integer</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>Y</replace>
      </field>
      <field>
        <name>BENEF_SUC</name>
        <rename>BENEF_SUC</rename>
        <type>Integer</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>Y</replace>
      </field>
      <field>
        <name>EMI_CUE</name>
        <rename>EMI_CUE</rename>
        <type>Integer</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>Y</replace>
      </field>
      <field>
        <name>BENEF_CUE</name>
        <rename>BENEF_CUE</rename>
        <type>Integer</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>Y</replace>
      </field>
      <field>
        <name>CANAL</name>
        <rename>CANAL</rename>
        <type>Integer</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>N</replace>
      </field>
      <field>
        <name>ORDEN</name>
        <rename>ORDEN</rename>
        <type>Integer</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>N</replace>
      </field>
      <field>
        <name>CLE_CHEQUE_ID</name>
        <rename>CLE_CHEQUE_ID</rename>
        <type>String</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>N</replace>
      </field>
    </fields>
    <attributes/>
    <cluster_schema/>
    <remotesteps>
      <input>
      </input>
      <output>
      </output>
    </remotesteps>
    <GUI>
      <xloc>848</xloc>
      <yloc>160</yloc>
      <draw>Y</draw>
    </GUI>
  </step>
  <step>
    <name>Database lookup</name>
    <type>DBLookup</type>
    <description/>
    <distribute>Y</distribute>
    <custom_distribution/>
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name/>
    </partitioning>
    <connection>TopazDS</connection>
    <cache>N</cache>
    <cache_load_all>N</cache_load_all>
    <cache_size>0</cache_size>
    <lookup>
      <schema>dbo</schema>
      <table>CLE_DESCUENTOS_ECHEQ</table>
      <orderby/>
      <fail_on_multiple>N</fail_on_multiple>
      <eat_row_on_failure>N</eat_row_on_failure>
      <key>
        <name>CLE_CHEQUE_ID</name>
        <field>ID_CHEQUE</field>
        <condition>=</condition>
        <name2/>
      </key>
      <value>
        <name>ESTADO</name>
        <rename>CLE_ESTADO</rename>
        <default/>
        <type>String</type>
      </value>
    </lookup>
    <attributes/>
    <cluster_schema/>
    <remotesteps>
      <input>
      </input>
      <output>
      </output>
    </remotesteps>
    <GUI>
      <xloc>976</xloc>
      <yloc>160</yloc>
      <draw>Y</draw>
    </GUI>
  </step>
  <step>
    <name>Descartar echeqs</name>
    <type>ScriptValueMod</type>
    <description/>
    <distribute>Y</distribute>
    <custom_distribution/>
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name/>
    </partitioning>
    <compatible>N</compatible>
    <optimizationLevel>9</optimizationLevel>
    <jsScripts>
      <jsScript>
        <jsScript_type>0</jsScript_type>
        <jsScript_name>Script 1</jsScript_name>
        <jsScript_script>trans_Status = CONTINUE_TRANSFORMATION;

if (['C','R','N'].indexOf(String(REG_TIPO))!=-1) {
	// Se descartan echeqs tipo Custodia, Rescate y Negociación. Sólo se admiten tipo Depósito.
	cant_descartados++
	writeToLog('e', 'Se descarta echeq ['+CLE_CHEQUE_ID+']: Tipo de registro ['+REG_TIPO+'].');
	trans_Status = SKIP_TRANSFORMATION;
} 
else if (['D'].indexOf(String(CLE_ESTADO))!=-1) {
	// Existe solicitud de negociación con estado Depositado
	cant_descartados++
	writeToLog('e', 'Se descarta echeq ['+CLE_CHEQUE_ID+'] con solicitud de negociación con estado ['+CLE_ESTADO+'].');
	trans_Status = SKIP_TRANSFORMATION;
}</jsScript_script>
      </jsScript>
      <jsScript>
        <jsScript_type>1</jsScript_type>
        <jsScript_name>Item_0</jsScript_name>
        <jsScript_script>//Script here

var cant_descartados = 0;</jsScript_script>
      </jsScript>
      <jsScript>
        <jsScript_type>2</jsScript_type>
        <jsScript_name>Item_1</jsScript_name>
        <jsScript_script>
setVariable('REG_DESCAR', cant_descartados, 'r');</jsScript_script>
      </jsScript>
    </jsScripts>
    <fields>    </fields>
    <attributes/>
    <cluster_schema/>
    <remotesteps>
      <input>
      </input>
      <output>
      </output>
    </remotesteps>
    <GUI>
      <xloc>1120</xloc>
      <yloc>160</yloc>
      <draw>Y</draw>
    </GUI>
  </step>
  <step>
    <name>Detalle</name>
    <type>StringCut</type>
    <description/>
    <distribute>Y</distribute>
    <custom_distribution/>
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name/>
    </partitioning>
    <fields>
      <field>
        <in_stream_name>linea</in_stream_name>
        <out_stream_name>CHEQ_ID</out_stream_name>
        <cut_from>1</cut_from>
        <cut_to>20</cut_to>
      </field>
      <field>
        <in_stream_name>linea</in_stream_name>
        <out_stream_name>CHEQ_NRO</out_stream_name>
        <cut_from>20</cut_from>
        <cut_to>28</cut_to>
      </field>
      <field>
        <in_stream_name>linea</in_stream_name>
        <out_stream_name>CHEQ_TIPO</out_stream_name>
        <cut_from>28</cut_from>
        <cut_to>29</cut_to>
      </field>
      <field>
        <in_stream_name>linea</in_stream_name>
        <out_stream_name>CHEQ_MODO</out_stream_name>
        <cut_from>29</cut_from>
        <cut_to>30</cut_to>
      </field>
      <field>
        <in_stream_name>linea</in_stream_name>
        <out_stream_name>CHEQ_CARAC</out_stream_name>
        <cut_from>30</cut_from>
        <cut_to>31</cut_to>
      </field>
      <field>
        <in_stream_name>linea</in_stream_name>
        <out_stream_name>CHEQRA_NRO</out_stream_name>
        <cut_from>31</cut_from>
        <cut_to>50</cut_to>
      </field>
      <field>
        <in_stream_name>linea</in_stream_name>
        <out_stream_name>CMC7</out_stream_name>
        <cut_from>50</cut_from>
        <cut_to>79</cut_to>
      </field>
      <field>
        <in_stream_name>linea</in_stream_name>
        <out_stream_name>VISUALIZ_COD</out_stream_name>
        <cut_from>79</cut_from>
        <cut_to>101</cut_to>
      </field>
      <field>
        <in_stream_name>linea</in_stream_name>
        <out_stream_name>REG_TIPO</out_stream_name>
        <cut_from>101</cut_from>
        <cut_to>102</cut_to>
      </field>
      <field>
        <in_stream_name>linea</in_stream_name>
        <out_stream_name>EMI_FIID</out_stream_name>
        <cut_from>102</cut_from>
        <cut_to>107</cut_to>
      </field>
      <field>
        <in_stream_name>linea</in_stream_name>
        <out_stream_name>EMI_SUC</out_stream_name>
        <cut_from>107</cut_from>
        <cut_to>110</cut_to>
      </field>
      <field>
        <in_stream_name>linea</in_stream_name>
        <out_stream_name>EMI_CUE</out_stream_name>
        <cut_from>110</cut_from>
        <cut_to>129</cut_to>
      </field>
      <field>
        <in_stream_name>linea</in_stream_name>
        <out_stream_name>EMI_SUBCUE</out_stream_name>
        <cut_from>129</cut_from>
        <cut_to>148</cut_to>
      </field>
      <field>
        <in_stream_name>linea</in_stream_name>
        <out_stream_name>EMI_CBU</out_stream_name>
        <cut_from>148</cut_from>
        <cut_to>170</cut_to>
      </field>
      <field>
        <in_stream_name>linea</in_stream_name>
        <out_stream_name>EMI_CUIT</out_stream_name>
        <cut_from>170</cut_from>
        <cut_to>181</cut_to>
      </field>
      <field>
        <in_stream_name>linea</in_stream_name>
        <out_stream_name>MONEDA</out_stream_name>
        <cut_from>181</cut_from>
        <cut_to>184</cut_to>
      </field>
      <field>
        <in_stream_name>linea</in_stream_name>
        <out_stream_name>MONTO</out_stream_name>
        <cut_from>184</cut_from>
        <cut_to>204</cut_to>
      </field>
      <field>
        <in_stream_name>linea</in_stream_name>
        <out_stream_name>FECHA_EMIS</out_stream_name>
        <cut_from>204</cut_from>
        <cut_to>210</cut_to>
      </field>
      <field>
        <in_stream_name>linea</in_stream_name>
        <out_stream_name>HORA_EMIS</out_stream_name>
        <cut_from>210</cut_from>
        <cut_to>216</cut_to>
      </field>
      <field>
        <in_stream_name>linea</in_stream_name>
        <out_stream_name>FECHA_PAGO</out_stream_name>
        <cut_from>216</cut_from>
        <cut_to>222</cut_to>
      </field>
      <field>
        <in_stream_name>linea</in_stream_name>
        <out_stream_name>HORA_PAGO</out_stream_name>
        <cut_from>222</cut_from>
        <cut_to>228</cut_to>
      </field>
      <field>
        <in_stream_name>linea</in_stream_name>
        <out_stream_name>FECHA_TRAN</out_stream_name>
        <cut_from>228</cut_from>
        <cut_to>234</cut_to>
      </field>
      <field>
        <in_stream_name>linea</in_stream_name>
        <out_stream_name>HORA_TRAN</out_stream_name>
        <cut_from>234</cut_from>
        <cut_to>240</cut_to>
      </field>
      <field>
        <in_stream_name>linea</in_stream_name>
        <out_stream_name>BENEF_FIID</out_stream_name>
        <cut_from>240</cut_from>
        <cut_to>245</cut_to>
      </field>
      <field>
        <in_stream_name>linea</in_stream_name>
        <out_stream_name>BENEF_SUC</out_stream_name>
        <cut_from>245</cut_from>
        <cut_to>248</cut_to>
      </field>
      <field>
        <in_stream_name>linea</in_stream_name>
        <out_stream_name>BENEF_CUE</out_stream_name>
        <cut_from>248</cut_from>
        <cut_to>267</cut_to>
      </field>
      <field>
        <in_stream_name>linea</in_stream_name>
        <out_stream_name>BENEF_CBU</out_stream_name>
        <cut_from>267</cut_from>
        <cut_to>289</cut_to>
      </field>
      <field>
        <in_stream_name>linea</in_stream_name>
        <out_stream_name>BENEF_CUIT</out_stream_name>
        <cut_from>289</cut_from>
        <cut_to>300</cut_to>
      </field>
      <field>
        <in_stream_name>linea</in_stream_name>
        <out_stream_name>FILLER</out_stream_name>
        <cut_from>300</cut_from>
        <cut_to>350</cut_to>
      </field>
    </fields>
    <attributes/>
    <cluster_schema/>
    <remotesteps>
      <input>
      </input>
      <output>
      </output>
    </remotesteps>
    <GUI>
      <xloc>400</xloc>
      <yloc>160</yloc>
      <draw>Y</draw>
    </GUI>
  </step>
  <step>
    <name>Detecta flujo vacio</name>
    <type>DetectEmptyStream</type>
    <description/>
    <distribute>Y</distribute>
    <custom_distribution/>
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name/>
    </partitioning>
    <attributes/>
    <cluster_schema/>
    <remotesteps>
      <input>
      </input>
      <output>
      </output>
    </remotesteps>
    <GUI>
      <xloc>80</xloc>
      <yloc>240</yloc>
      <draw>Y</draw>
    </GUI>
  </step>
  <step>
    <name>Error archivo vacio</name>
    <type>ScriptValueMod</type>
    <description/>
    <distribute>Y</distribute>
    <custom_distribution/>
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name/>
    </partitioning>
    <compatible>N</compatible>
    <optimizationLevel>9</optimizationLevel>
    <jsScripts>
      <jsScript>
        <jsScript_type>0</jsScript_type>
        <jsScript_name>Script 1</jsScript_name>
        <jsScript_script>trans_Status = CONTINUE_TRANSFORMATION;

ERROR = 'Archivo vacío ['+getVariable('archivo', '')+'].';


writeToLog('e', ERROR);
setVariable('msg_err', ERROR, 'r');	
trans_Status = ERROR_TRANSFORMATION;
_step_.stopAll();</jsScript_script>
      </jsScript>
    </jsScripts>
    <fields>
      <field>
        <name>FILE_NAME</name>
        <rename>FILE_NAME</rename>
        <type>String</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>N</replace>
      </field>
    </fields>
    <attributes/>
    <cluster_schema/>
    <remotesteps>
      <input>
      </input>
      <output>
      </output>
    </remotesteps>
    <GUI>
      <xloc>80</xloc>
      <yloc>320</yloc>
      <draw>Y</draw>
    </GUI>
  </step>
  <step>
    <name>Error en generico</name>
    <type>ScriptValueMod</type>
    <description/>
    <distribute>Y</distribute>
    <custom_distribution/>
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name/>
    </partitioning>
    <compatible>N</compatible>
    <optimizationLevel>9</optimizationLevel>
    <jsScripts>
      <jsScript>
        <jsScript_type>0</jsScript_type>
        <jsScript_name>Script 1</jsScript_name>
        <jsScript_script>//Script here

ERROR = 'Reg. N° '+regCantidad+'. Errores encontrados: '+GEN_ERROR;

writeToLog('e', ERROR);

</jsScript_script>
      </jsScript>
    </jsScripts>
    <fields>
      <field>
        <name>ERROR</name>
        <rename>ERROR</rename>
        <type>String</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>N</replace>
      </field>
    </fields>
    <attributes/>
    <cluster_schema/>
    <remotesteps>
      <input>
      </input>
      <output>
      </output>
    </remotesteps>
    <GUI>
      <xloc>1600</xloc>
      <yloc>240</yloc>
      <draw>Y</draw>
    </GUI>
  </step>
  <step>
    <name>Graba Echeqs</name>
    <type>SimpleMapping</type>
    <description/>
    <distribute>Y</distribute>
    <custom_distribution/>
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name/>
    </partitioning>
    <specification_method>filename</specification_method>
    <trans_object_id/>
    <trans_name/>
    <filename>${Top.Repository}ITF_ECHEQ_EXTRACT_DEPOSITO_GENERICO.ktr</filename>
    <directory_path/>
    <mappings>
      <input>
        <mapping>
          <input_step/>
          <output_step/>
          <main_path>Y</main_path>
          <rename_on_output>Y</rename_on_output>
          <description/>
          <connector>
            <parent>CHEQ_ID</parent>
            <child>CHEQ_ID</child>
          </connector>
          <connector>
            <parent>CHEQ_NRO</parent>
            <child>CHEQ_NRO</child>
          </connector>
          <connector>
            <parent>CHEQ_TIPO</parent>
            <child>CHEQ_TIPO</child>
          </connector>
          <connector>
            <parent>CHEQ_MODO</parent>
            <child>CHEQ_MODO</child>
          </connector>
          <connector>
            <parent>CHEQ_CARAC</parent>
            <child>CHEQ_CARAC</child>
          </connector>
          <connector>
            <parent>CHEQRA_NRO</parent>
            <child>CHEQRA_NRO</child>
          </connector>
          <connector>
            <parent>CMC7</parent>
            <child>CMC7</child>
          </connector>
          <connector>
            <parent>VISUALIZ_COD</parent>
            <child>VISUALIZ_COD</child>
          </connector>
          <connector>
            <parent>REG_TIPO</parent>
            <child>REG_TIPO</child>
          </connector>
          <connector>
            <parent>EMI_FIID</parent>
            <child>EMI_FIID</child>
          </connector>
          <connector>
            <parent>EMI_SUC</parent>
            <child>EMI_SUC</child>
          </connector>
          <connector>
            <parent>EMI_CUE</parent>
            <child>EMI_CUE</child>
          </connector>
          <connector>
            <parent>EMI_SUBCUE</parent>
            <child>EMI_SUBCUE</child>
          </connector>
          <connector>
            <parent>EMI_CBU</parent>
            <child>EMI_CBU</child>
          </connector>
          <connector>
            <parent>EMI_CUIT</parent>
            <child>EMI_CUIT</child>
          </connector>
          <connector>
            <parent>MONEDA</parent>
            <child>MONEDA</child>
          </connector>
          <connector>
            <parent>IMPORTE</parent>
            <child>IMPORTE</child>
          </connector>
          <connector>
            <parent>FECHA_EMIS</parent>
            <child>FECHA_EMIS</child>
          </connector>
          <connector>
            <parent>HORA_EMIS</parent>
            <child>HORA_EMIS</child>
          </connector>
          <connector>
            <parent>FECHA_PAGO</parent>
            <child>FECHA_PAGO</child>
          </connector>
          <connector>
            <parent>HORA_PAGO</parent>
            <child>HORA_PAGO</child>
          </connector>
          <connector>
            <parent>FECHA_TRAN</parent>
            <child>FECHA_TRAN</child>
          </connector>
          <connector>
            <parent>HORA_TRAN</parent>
            <child>HORA_TRAN</child>
          </connector>
          <connector>
            <parent>BENEF_FIID</parent>
            <child>BENEF_FIID</child>
          </connector>
          <connector>
            <parent>BENEF_SUC</parent>
            <child>BENEF_SUC</child>
          </connector>
          <connector>
            <parent>BENEF_CUE</parent>
            <child>BENEF_CUE</child>
          </connector>
          <connector>
            <parent>BENEF_CBU</parent>
            <child>BENEF_CBU</child>
          </connector>
          <connector>
            <parent>BENEF_CUIT</parent>
            <child>BENEF_CUIT</child>
          </connector>
          <connector>
            <parent>ESTADO</parent>
            <child>ESTADO</child>
          </connector>
          <connector>
            <parent>DESCRIPCION</parent>
            <child>DESCRIPCION</child>
          </connector>
          <connector>
            <parent>CANAL</parent>
            <child>CANAL</child>
          </connector>
          <connector>
            <parent>ORDEN</parent>
            <child>ORDEN</child>
          </connector>
        </mapping>
      </input>
      <output>
        <mapping>
          <input_step/>
          <output_step/>
          <main_path>Y</main_path>
          <rename_on_output>N</rename_on_output>
          <description/>
          <connector>
            <parent>GEN_ERROR</parent>
            <child>GEN_ERROR</child>
          </connector>
        </mapping>
      </output>
      <parameters>
        <inherit_all_vars>Y</inherit_all_vars>
      </parameters>
    </mappings>
    <attributes/>
    <cluster_schema/>
    <remotesteps>
      <input>
      </input>
      <output>
      </output>
    </remotesteps>
    <GUI>
      <xloc>1472</xloc>
      <yloc>160</yloc>
      <draw>Y</draw>
    </GUI>
  </step>
  <step>
    <name>IF_ERROR</name>
    <type>ScriptValueMod</type>
    <description/>
    <distribute>Y</distribute>
    <custom_distribution/>
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name/>
    </partitioning>
    <compatible>N</compatible>
    <optimizationLevel>9</optimizationLevel>
    <jsScripts>
      <jsScript>
        <jsScript_type>0</jsScript_type>
        <jsScript_name>Script 1</jsScript_name>
        <jsScript_script>//Script here

cantError++;


</jsScript_script>
      </jsScript>
      <jsScript>
        <jsScript_type>1</jsScript_type>
        <jsScript_name>Item_0</jsScript_name>
        <jsScript_script>//Script here



var RCO = getVariable('RCO', '');
var FECHA = getVariable('FECHATOP_F1', '');
var cantError = 0

FILE_NAME = RCO+FECHA+'_ECHEQ_LINK_ERROR.csv';
</jsScript_script>
      </jsScript>
      <jsScript>
        <jsScript_type>2</jsScript_type>
        <jsScript_name>Item_1</jsScript_name>
        <jsScript_script>//Script here
var IF_ERROR = '';
IF_ERROR = '${CRLF}TOPAZ_PROCESS_INFO_3: Archivo de error generado en: '+FILE_NAME;

// Setea variables en caso de error
setVariable('REG_ERROR', cantError, 'r')
setVariable('IF_ERROR', IF_ERROR, 'r');</jsScript_script>
      </jsScript>
    </jsScripts>
    <fields>
      <field>
        <name>FILE_NAME</name>
        <rename>FILE_NAME</rename>
        <type>String</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>N</replace>
      </field>
    </fields>
    <attributes/>
    <cluster_schema/>
    <remotesteps>
      <input>
      </input>
      <output>
      </output>
    </remotesteps>
    <GUI>
      <xloc>1328</xloc>
      <yloc>320</yloc>
      <draw>Y</draw>
    </GUI>
  </step>
  <step>
    <name>Lee archivo</name>
    <type>TextFileInput</type>
    <description/>
    <distribute>N</distribute>
    <custom_distribution/>
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name/>
    </partitioning>
    <accept_filenames>N</accept_filenames>
    <passing_through_fields>N</passing_through_fields>
    <accept_field/>
    <accept_stepname/>
    <separator/>
    <enclosure/>
    <enclosure_breaks>N</enclosure_breaks>
    <escapechar/>
    <header>N</header>
    <nr_headerlines>1</nr_headerlines>
    <footer>N</footer>
    <nr_footerlines>1</nr_footerlines>
    <line_wrapped>N</line_wrapped>
    <nr_wraps>1</nr_wraps>
    <layout_paged>N</layout_paged>
    <nr_lines_per_page>80</nr_lines_per_page>
    <nr_lines_doc_header>0</nr_lines_doc_header>
    <noempty>Y</noempty>
    <include>N</include>
    <include_field/>
    <rownum>N</rownum>
    <rownumByFile>N</rownumByFile>
    <rownum_field/>
    <format>mixed</format>
    <encoding>UTF-8</encoding>
    <length>Characters</length>
    <add_to_result_filenames>Y</add_to_result_filenames>
    <file>
      <name>${Top.Input}ECHEQ/EXTRACT/${archivo}</name>
      <filemask/>
      <exclude_filemask/>
      <file_required>N</file_required>
      <include_subfolders>N</include_subfolders>
      <type>Fixed</type>
      <compression>None</compression>
    </file>
    <filters>
    </filters>
    <fields>
      <field>
        <name>ID_TIPO_REG</name>
        <type>String</type>
        <format/>
        <currency/>
        <decimal/>
        <group/>
        <nullif/>
        <ifnull/>
        <position>0</position>
        <length>1</length>
        <precision>-1</precision>
        <trim_type>none</trim_type>
        <repeat>N</repeat>
      </field>
      <field>
        <name>linea</name>
        <type>String</type>
        <format/>
        <currency/>
        <decimal/>
        <group/>
        <nullif/>
        <ifnull/>
        <position>0</position>
        <length>355</length>
        <precision>-1</precision>
        <trim_type>none</trim_type>
        <repeat>N</repeat>
      </field>
    </fields>
    <limit>0</limit>
    <error_ignored>N</error_ignored>
    <skip_bad_files>N</skip_bad_files>
    <file_error_field/>
    <file_error_message_field/>
    <error_line_skipped>N</error_line_skipped>
    <error_count_field/>
    <error_fields_field/>
    <error_text_field/>
    <bad_line_files_destination_directory/>
    <bad_line_files_extension>warning</bad_line_files_extension>
    <error_line_files_destination_directory/>
    <error_line_files_extension>error</error_line_files_extension>
    <line_number_files_destination_directory/>
    <line_number_files_extension>line</line_number_files_extension>
    <date_format_lenient>Y</date_format_lenient>
    <date_format_locale>es_UY</date_format_locale>
    <shortFileFieldName/>
    <pathFieldName/>
    <hiddenFieldName/>
    <lastModificationTimeFieldName/>
    <uriNameFieldName/>
    <rootUriNameFieldName/>
    <extensionFieldName/>
    <sizeFieldName/>
    <attributes/>
    <cluster_schema/>
    <remotesteps>
      <input>
      </input>
      <output>
      </output>
    </remotesteps>
    <GUI>
      <xloc>80</xloc>
      <yloc>160</yloc>
      <draw>Y</draw>
    </GUI>
  </step>
  <step>
    <name>Normaliza errores</name>
    <type>SelectValues</type>
    <description/>
    <distribute>Y</distribute>
    <custom_distribution/>
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name/>
    </partitioning>
    <fields>
      <field>
        <name>ERROR</name>
      </field>
      <field>
        <name>CHEQ_ID</name>
      </field>
      <field>
        <name>CHEQ_NRO</name>
      </field>
      <field>
        <name>CHEQRA_NRO</name>
      </field>
      <field>
        <name>CHEQ_MODO</name>
      </field>
      <field>
        <name>CHEQ_TIPO</name>
      </field>
      <field>
        <name>CHEQ_CARAC</name>
      </field>
      <field>
        <name>CMC7</name>
      </field>
      <field>
        <name>EMI_FIID</name>
      </field>
      <field>
        <name>EMI_CBU</name>
      </field>
      <field>
        <name>EMI_CUE</name>
      </field>
      <field>
        <name>EMI_SUC</name>
      </field>
      <field>
        <name>EMI_SUBCUE</name>
      </field>
      <field>
        <name>EMI_CUIT</name>
      </field>
      <field>
        <name>BENEF_FIID</name>
      </field>
      <field>
        <name>BENEF_CBU</name>
      </field>
      <field>
        <name>BENEF_CUE</name>
      </field>
      <field>
        <name>BENEF_SUC</name>
      </field>
      <field>
        <name>BENEF_CUIT</name>
      </field>
      <field>
        <name>REG_TIPO</name>
      </field>
      <field>
        <name>VISUALIZ_COD</name>
      </field>
      <field>
        <name>MONEDA</name>
      </field>
      <field>
        <name>MONTO</name>
      </field>
      <field>
        <name>FECHA_EMIS</name>
      </field>
      <field>
        <name>HORA_EMIS</name>
      </field>
      <field>
        <name>FECHA_PAGO</name>
      </field>
      <field>
        <name>HORA_PAGO</name>
      </field>
      <field>
        <name>FECHA_TRAN</name>
      </field>
      <field>
        <name>HORA_TRAN</name>
      </field>
      <field>
        <name>archivo</name>
      </field>
      <select_unspecified>N</select_unspecified>
      <meta>
        <name>ERROR</name>
        <rename>ERROR</rename>
        <type>String</type>
        <length>-2</length>
        <precision>-2</precision>
        <conversion_mask/>
        <date_format_lenient>false</date_format_lenient>
        <date_format_locale/>
        <date_format_timezone/>
        <lenient_string_to_number>false</lenient_string_to_number>
        <encoding/>
        <decimal_symbol/>
        <grouping_symbol/>
        <currency_symbol/>
        <storage_type/>
      </meta>
      <meta>
        <name>CHEQ_ID</name>
        <rename>CHEQ_ID</rename>
        <type>String</type>
        <length>-2</length>
        <precision>-2</precision>
        <conversion_mask/>
        <date_format_lenient>false</date_format_lenient>
        <date_format_locale/>
        <date_format_timezone/>
        <lenient_string_to_number>false</lenient_string_to_number>
        <encoding/>
        <decimal_symbol/>
        <grouping_symbol/>
        <currency_symbol/>
        <storage_type/>
      </meta>
      <meta>
        <name>CHEQ_NRO</name>
        <rename>CHEQ_NRO</rename>
        <type>String</type>
        <length>-2</length>
        <precision>-2</precision>
        <conversion_mask/>
        <date_format_lenient>false</date_format_lenient>
        <date_format_locale/>
        <date_format_timezone/>
        <lenient_string_to_number>false</lenient_string_to_number>
        <encoding/>
        <decimal_symbol/>
        <grouping_symbol/>
        <currency_symbol/>
        <storage_type/>
      </meta>
      <meta>
        <name>CHEQRA_NRO</name>
        <rename>CHEQRA_NRO</rename>
        <type>String</type>
        <length>-2</length>
        <precision>-2</precision>
        <conversion_mask/>
        <date_format_lenient>false</date_format_lenient>
        <date_format_locale/>
        <date_format_timezone/>
        <lenient_string_to_number>false</lenient_string_to_number>
        <encoding/>
        <decimal_symbol/>
        <grouping_symbol/>
        <currency_symbol/>
        <storage_type/>
      </meta>
      <meta>
        <name>CHEQ_MODO</name>
        <rename>CHEQ_MODO</rename>
        <type>String</type>
        <length>-2</length>
        <precision>-2</precision>
        <conversion_mask/>
        <date_format_lenient>false</date_format_lenient>
        <date_format_locale/>
        <date_format_timezone/>
        <lenient_string_to_number>false</lenient_string_to_number>
        <encoding/>
        <decimal_symbol/>
        <grouping_symbol/>
        <currency_symbol/>
        <storage_type/>
      </meta>
      <meta>
        <name>CHEQ_TIPO</name>
        <rename>CHEQ_TIPO</rename>
        <type>String</type>
        <length>-2</length>
        <precision>-2</precision>
        <conversion_mask/>
        <date_format_lenient>false</date_format_lenient>
        <date_format_locale/>
        <date_format_timezone/>
        <lenient_string_to_number>false</lenient_string_to_number>
        <encoding/>
        <decimal_symbol/>
        <grouping_symbol/>
        <currency_symbol/>
        <storage_type/>
      </meta>
      <meta>
        <name>CHEQ_CARAC</name>
        <rename>CHEQ_CARAC</rename>
        <type>String</type>
        <length>-2</length>
        <precision>-2</precision>
        <conversion_mask/>
        <date_format_lenient>false</date_format_lenient>
        <date_format_locale/>
        <date_format_timezone/>
        <lenient_string_to_number>false</lenient_string_to_number>
        <encoding/>
        <decimal_symbol/>
        <grouping_symbol/>
        <currency_symbol/>
        <storage_type/>
      </meta>
      <meta>
        <name>CMC7</name>
        <rename>CMC7</rename>
        <type>String</type>
        <length>-2</length>
        <precision>-2</precision>
        <conversion_mask/>
        <date_format_lenient>false</date_format_lenient>
        <date_format_locale/>
        <date_format_timezone/>
        <lenient_string_to_number>false</lenient_string_to_number>
        <encoding/>
        <decimal_symbol/>
        <grouping_symbol/>
        <currency_symbol/>
        <storage_type/>
      </meta>
      <meta>
        <name>EMI_FIID</name>
        <rename>EMI_FIID</rename>
        <type>String</type>
        <length>-2</length>
        <precision>-2</precision>
        <conversion_mask/>
        <date_format_lenient>false</date_format_lenient>
        <date_format_locale/>
        <date_format_timezone/>
        <lenient_string_to_number>false</lenient_string_to_number>
        <encoding/>
        <decimal_symbol/>
        <grouping_symbol/>
        <currency_symbol/>
        <storage_type/>
      </meta>
      <meta>
        <name>EMI_CBU</name>
        <rename>EMI_CBU</rename>
        <type>String</type>
        <length>-2</length>
        <precision>-2</precision>
        <conversion_mask/>
        <date_format_lenient>false</date_format_lenient>
        <date_format_locale/>
        <date_format_timezone/>
        <lenient_string_to_number>false</lenient_string_to_number>
        <encoding/>
        <decimal_symbol/>
        <grouping_symbol/>
        <currency_symbol/>
        <storage_type/>
      </meta>
      <meta>
        <name>EMI_CUE</name>
        <rename>EMI_CUE</rename>
        <type>String</type>
        <length>-2</length>
        <precision>-2</precision>
        <conversion_mask/>
        <date_format_lenient>false</date_format_lenient>
        <date_format_locale/>
        <date_format_timezone/>
        <lenient_string_to_number>false</lenient_string_to_number>
        <encoding/>
        <decimal_symbol/>
        <grouping_symbol/>
        <currency_symbol/>
        <storage_type/>
      </meta>
      <meta>
        <name>EMI_SUC</name>
        <rename>EMI_SUC</rename>
        <type>String</type>
        <length>-2</length>
        <precision>-2</precision>
        <conversion_mask/>
        <date_format_lenient>false</date_format_lenient>
        <date_format_locale/>
        <date_format_timezone/>
        <lenient_string_to_number>false</lenient_string_to_number>
        <encoding/>
        <decimal_symbol/>
        <grouping_symbol/>
        <currency_symbol/>
        <storage_type/>
      </meta>
      <meta>
        <name>EMI_SUBCUE</name>
        <rename>EMI_SUBCUE</rename>
        <type>String</type>
        <length>-2</length>
        <precision>-2</precision>
        <conversion_mask/>
        <date_format_lenient>false</date_format_lenient>
        <date_format_locale/>
        <date_format_timezone/>
        <lenient_string_to_number>false</lenient_string_to_number>
        <encoding/>
        <decimal_symbol/>
        <grouping_symbol/>
        <currency_symbol/>
        <storage_type/>
      </meta>
      <meta>
        <name>EMI_CUIT</name>
        <rename>EMI_CUIT</rename>
        <type>String</type>
        <length>-2</length>
        <precision>-2</precision>
        <conversion_mask/>
        <date_format_lenient>false</date_format_lenient>
        <date_format_locale/>
        <date_format_timezone/>
        <lenient_string_to_number>false</lenient_string_to_number>
        <encoding/>
        <decimal_symbol/>
        <grouping_symbol/>
        <currency_symbol/>
        <storage_type/>
      </meta>
      <meta>
        <name>BENEF_FIID</name>
        <rename>BENEF_FIID</rename>
        <type>String</type>
        <length>-2</length>
        <precision>-2</precision>
        <conversion_mask/>
        <date_format_lenient>false</date_format_lenient>
        <date_format_locale/>
        <date_format_timezone/>
        <lenient_string_to_number>false</lenient_string_to_number>
        <encoding/>
        <decimal_symbol/>
        <grouping_symbol/>
        <currency_symbol/>
        <storage_type/>
      </meta>
      <meta>
        <name>BENEF_CBU</name>
        <rename>BENEF_CBU</rename>
        <type>String</type>
        <length>-2</length>
        <precision>-2</precision>
        <conversion_mask/>
        <date_format_lenient>false</date_format_lenient>
        <date_format_locale/>
        <date_format_timezone/>
        <lenient_string_to_number>false</lenient_string_to_number>
        <encoding/>
        <decimal_symbol/>
        <grouping_symbol/>
        <currency_symbol/>
        <storage_type/>
      </meta>
      <meta>
        <name>BENEF_CUE</name>
        <rename>BENEF_CUE</rename>
        <type>String</type>
        <length>-2</length>
        <precision>-2</precision>
        <conversion_mask/>
        <date_format_lenient>false</date_format_lenient>
        <date_format_locale/>
        <date_format_timezone/>
        <lenient_string_to_number>false</lenient_string_to_number>
        <encoding/>
        <decimal_symbol/>
        <grouping_symbol/>
        <currency_symbol/>
        <storage_type/>
      </meta>
      <meta>
        <name>BENEF_SUC</name>
        <rename>BENEF_SUC</rename>
        <type>String</type>
        <length>-2</length>
        <precision>-2</precision>
        <conversion_mask/>
        <date_format_lenient>false</date_format_lenient>
        <date_format_locale/>
        <date_format_timezone/>
        <lenient_string_to_number>false</lenient_string_to_number>
        <encoding/>
        <decimal_symbol/>
        <grouping_symbol/>
        <currency_symbol/>
        <storage_type/>
      </meta>
      <meta>
        <name>BENEF_CUIT</name>
        <rename>BENEF_CUIT</rename>
        <type>String</type>
        <length>-2</length>
        <precision>-2</precision>
        <conversion_mask/>
        <date_format_lenient>false</date_format_lenient>
        <date_format_locale/>
        <date_format_timezone/>
        <lenient_string_to_number>false</lenient_string_to_number>
        <encoding/>
        <decimal_symbol/>
        <grouping_symbol/>
        <currency_symbol/>
        <storage_type/>
      </meta>
      <meta>
        <name>REG_TIPO</name>
        <rename>REG_TIPO</rename>
        <type>String</type>
        <length>-2</length>
        <precision>-2</precision>
        <conversion_mask/>
        <date_format_lenient>false</date_format_lenient>
        <date_format_locale/>
        <date_format_timezone/>
        <lenient_string_to_number>false</lenient_string_to_number>
        <encoding/>
        <decimal_symbol/>
        <grouping_symbol/>
        <currency_symbol/>
        <storage_type/>
      </meta>
      <meta>
        <name>VISUALIZ_COD</name>
        <rename>VISUALIZ_COD</rename>
        <type>String</type>
        <length>-2</length>
        <precision>-2</precision>
        <conversion_mask/>
        <date_format_lenient>false</date_format_lenient>
        <date_format_locale/>
        <date_format_timezone/>
        <lenient_string_to_number>false</lenient_string_to_number>
        <encoding/>
        <decimal_symbol/>
        <grouping_symbol/>
        <currency_symbol/>
        <storage_type/>
      </meta>
      <meta>
        <name>MONEDA</name>
        <rename>MONEDA</rename>
        <type>String</type>
        <length>-2</length>
        <precision>-2</precision>
        <conversion_mask/>
        <date_format_lenient>false</date_format_lenient>
        <date_format_locale/>
        <date_format_timezone/>
        <lenient_string_to_number>false</lenient_string_to_number>
        <encoding/>
        <decimal_symbol/>
        <grouping_symbol/>
        <currency_symbol/>
        <storage_type/>
      </meta>
      <meta>
        <name>MONTO</name>
        <rename>MONTO</rename>
        <type>String</type>
        <length>-2</length>
        <precision>-2</precision>
        <conversion_mask/>
        <date_format_lenient>false</date_format_lenient>
        <date_format_locale/>
        <date_format_timezone/>
        <lenient_string_to_number>false</lenient_string_to_number>
        <encoding/>
        <decimal_symbol/>
        <grouping_symbol/>
        <currency_symbol/>
        <storage_type/>
      </meta>
      <meta>
        <name>FECHA_EMIS</name>
        <rename>FECHA_EMIS</rename>
        <type>String</type>
        <length>-2</length>
        <precision>-2</precision>
        <conversion_mask/>
        <date_format_lenient>false</date_format_lenient>
        <date_format_locale/>
        <date_format_timezone/>
        <lenient_string_to_number>false</lenient_string_to_number>
        <encoding/>
        <decimal_symbol/>
        <grouping_symbol/>
        <currency_symbol/>
        <storage_type/>
      </meta>
      <meta>
        <name>HORA_EMIS</name>
        <rename>HORA_EMIS</rename>
        <type>String</type>
        <length>-2</length>
        <precision>-2</precision>
        <conversion_mask/>
        <date_format_lenient>false</date_format_lenient>
        <date_format_locale/>
        <date_format_timezone/>
        <lenient_string_to_number>false</lenient_string_to_number>
        <encoding/>
        <decimal_symbol/>
        <grouping_symbol/>
        <currency_symbol/>
        <storage_type/>
      </meta>
      <meta>
        <name>FECHA_PAGO</name>
        <rename>FECHA_PAGO</rename>
        <type>String</type>
        <length>-2</length>
        <precision>-2</precision>
        <conversion_mask/>
        <date_format_lenient>false</date_format_lenient>
        <date_format_locale/>
        <date_format_timezone/>
        <lenient_string_to_number>false</lenient_string_to_number>
        <encoding/>
        <decimal_symbol/>
        <grouping_symbol/>
        <currency_symbol/>
        <storage_type/>
      </meta>
      <meta>
        <name>HORA_PAGO</name>
        <rename>HORA_PAGO</rename>
        <type>String</type>
        <length>-2</length>
        <precision>-2</precision>
        <conversion_mask/>
        <date_format_lenient>false</date_format_lenient>
        <date_format_locale/>
        <date_format_timezone/>
        <lenient_string_to_number>false</lenient_string_to_number>
        <encoding/>
        <decimal_symbol/>
        <grouping_symbol/>
        <currency_symbol/>
        <storage_type/>
      </meta>
      <meta>
        <name>FECHA_TRAN</name>
        <rename>FECHA_TRAN</rename>
        <type>String</type>
        <length>-2</length>
        <precision>-2</precision>
        <conversion_mask/>
        <date_format_lenient>false</date_format_lenient>
        <date_format_locale/>
        <date_format_timezone/>
        <lenient_string_to_number>false</lenient_string_to_number>
        <encoding/>
        <decimal_symbol/>
        <grouping_symbol/>
        <currency_symbol/>
        <storage_type/>
      </meta>
      <meta>
        <name>HORA_TRAN</name>
        <rename>HORA_TRAN</rename>
        <type>String</type>
        <length>-2</length>
        <precision>-2</precision>
        <conversion_mask/>
        <date_format_lenient>false</date_format_lenient>
        <date_format_locale/>
        <date_format_timezone/>
        <lenient_string_to_number>false</lenient_string_to_number>
        <encoding/>
        <decimal_symbol/>
        <grouping_symbol/>
        <currency_symbol/>
        <storage_type/>
      </meta>
      <meta>
        <name>archivo</name>
        <rename>archivo</rename>
        <type>String</type>
        <length>-2</length>
        <precision>-2</precision>
        <conversion_mask/>
        <date_format_lenient>false</date_format_lenient>
        <date_format_locale/>
        <date_format_timezone/>
        <lenient_string_to_number>false</lenient_string_to_number>
        <encoding/>
        <decimal_symbol/>
        <grouping_symbol/>
        <currency_symbol/>
        <storage_type/>
      </meta>
    </fields>
    <attributes/>
    <cluster_schema/>
    <remotesteps>
      <input>
      </input>
      <output>
      </output>
    </remotesteps>
    <GUI>
      <xloc>1600</xloc>
      <yloc>320</yloc>
      <draw>Y</draw>
    </GUI>
  </step>
  <step>
    <name>REG_OK</name>
    <type>ScriptValueMod</type>
    <description/>
    <distribute>Y</distribute>
    <custom_distribution/>
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name/>
    </partitioning>
    <compatible>N</compatible>
    <optimizationLevel>9</optimizationLevel>
    <jsScripts>
      <jsScript>
        <jsScript_type>0</jsScript_type>
        <jsScript_name>Script 1</jsScript_name>
        <jsScript_script>count++

</jsScript_script>
      </jsScript>
      <jsScript>
        <jsScript_type>1</jsScript_type>
        <jsScript_name>Item_0</jsScript_name>
        <jsScript_script>var count = 0;</jsScript_script>
      </jsScript>
      <jsScript>
        <jsScript_type>2</jsScript_type>
        <jsScript_name>Item_1</jsScript_name>
        <jsScript_script>setVariable(_step_.getStepname(), count, 'r');</jsScript_script>
      </jsScript>
    </jsScripts>
    <fields>
      <field>
        <name>count</name>
        <rename>REG_OK</rename>
        <type>Integer</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>N</replace>
      </field>
    </fields>
    <attributes/>
    <cluster_schema/>
    <remotesteps>
      <input>
      </input>
      <output>
      </output>
    </remotesteps>
    <GUI>
      <xloc>1760</xloc>
      <yloc>160</yloc>
      <draw>Y</draw>
    </GUI>
  </step>
  <step>
    <name>Reporte de errores</name>
    <type>TextFileOutput</type>
    <description/>
    <distribute>Y</distribute>
    <custom_distribution/>
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name/>
    </partitioning>
    <separator>;</separator>
    <enclosure>"</enclosure>
    <enclosure_forced>N</enclosure_forced>
    <enclosure_fix_disabled>N</enclosure_fix_disabled>
    <header>Y</header>
    <footer>N</footer>
    <format>DOS</format>
    <compression>None</compression>
    <encoding/>
    <endedLine/>
    <fileNameInField>Y</fileNameInField>
    <fileNameField>FILE_NAME</fileNameField>
    <create_parent_folder>Y</create_parent_folder>
    <file>
      <name>file</name>
      <servlet_output>N</servlet_output>
      <do_not_open_new_file_init>Y</do_not_open_new_file_init>
      <extention/>
      <append>N</append>
      <split>N</split>
      <haspartno>N</haspartno>
      <add_date>N</add_date>
      <add_time>N</add_time>
      <SpecifyFormat>N</SpecifyFormat>
      <date_time_format/>
      <add_to_result_filenames>Y</add_to_result_filenames>
      <pad>N</pad>
      <fast_dump>N</fast_dump>
      <splitevery>0</splitevery>
    </file>
    <fields>
      <field>
        <name>ERROR</name>
        <type>String</type>
        <format/>
        <currency/>
        <decimal/>
        <group/>
        <nullif/>
        <trim_type>none</trim_type>
        <length>-1</length>
        <precision>-1</precision>
      </field>
      <field>
        <name>CHEQ_ID</name>
        <type>String</type>
        <format/>
        <currency/>
        <decimal/>
        <group/>
        <nullif/>
        <trim_type>none</trim_type>
        <length>-1</length>
        <precision>-1</precision>
      </field>
      <field>
        <name>CHEQ_NRO</name>
        <type>String</type>
        <format/>
        <currency/>
        <decimal/>
        <group/>
        <nullif/>
        <trim_type>none</trim_type>
        <length>-1</length>
        <precision>-1</precision>
      </field>
      <field>
        <name>CHEQRA_NRO</name>
        <type>String</type>
        <format/>
        <currency/>
        <decimal/>
        <group/>
        <nullif/>
        <trim_type>none</trim_type>
        <length>-1</length>
        <precision>-1</precision>
      </field>
      <field>
        <name>CHEQ_MODO</name>
        <type>String</type>
        <format/>
        <currency/>
        <decimal/>
        <group/>
        <nullif/>
        <trim_type>none</trim_type>
        <length>-1</length>
        <precision>-1</precision>
      </field>
      <field>
        <name>CHEQ_TIPO</name>
        <type>String</type>
        <format/>
        <currency/>
        <decimal/>
        <group/>
        <nullif/>
        <trim_type>none</trim_type>
        <length>-1</length>
        <precision>-1</precision>
      </field>
      <field>
        <name>CHEQ_CARAC</name>
        <type>String</type>
        <format/>
        <currency/>
        <decimal/>
        <group/>
        <nullif/>
        <trim_type>none</trim_type>
        <length>-1</length>
        <precision>-1</precision>
      </field>
      <field>
        <name>CMC7</name>
        <type>String</type>
        <format/>
        <currency/>
        <decimal/>
        <group/>
        <nullif/>
        <trim_type>none</trim_type>
        <length>-1</length>
        <precision>-1</precision>
      </field>
      <field>
        <name>EMI_FIID</name>
        <type>String</type>
        <format/>
        <currency/>
        <decimal/>
        <group/>
        <nullif/>
        <trim_type>none</trim_type>
        <length>-1</length>
        <precision>-1</precision>
      </field>
      <field>
        <name>EMI_CBU</name>
        <type>String</type>
        <format/>
        <currency/>
        <decimal/>
        <group/>
        <nullif/>
        <trim_type>none</trim_type>
        <length>-1</length>
        <precision>-1</precision>
      </field>
      <field>
        <name>EMI_CUE</name>
        <type>String</type>
        <format/>
        <currency/>
        <decimal/>
        <group/>
        <nullif/>
        <trim_type>none</trim_type>
        <length>-1</length>
        <precision>-1</precision>
      </field>
      <field>
        <name>EMI_SUC</name>
        <type>String</type>
        <format/>
        <currency/>
        <decimal/>
        <group/>
        <nullif/>
        <trim_type>none</trim_type>
        <length>-1</length>
        <precision>-1</precision>
      </field>
      <field>
        <name>EMI_SUBCUE</name>
        <type>String</type>
        <format/>
        <currency/>
        <decimal/>
        <group/>
        <nullif/>
        <trim_type>none</trim_type>
        <length>-1</length>
        <precision>-1</precision>
      </field>
      <field>
        <name>EMI_CUIT</name>
        <type>String</type>
        <format/>
        <currency/>
        <decimal/>
        <group/>
        <nullif/>
        <trim_type>none</trim_type>
        <length>-1</length>
        <precision>-1</precision>
      </field>
      <field>
        <name>BENEF_FIID</name>
        <type>String</type>
        <format/>
        <currency/>
        <decimal/>
        <group/>
        <nullif/>
        <trim_type>none</trim_type>
        <length>-1</length>
        <precision>-1</precision>
      </field>
      <field>
        <name>BENEF_CBU</name>
        <type>String</type>
        <format/>
        <currency/>
        <decimal/>
        <group/>
        <nullif/>
        <trim_type>none</trim_type>
        <length>-1</length>
        <precision>-1</precision>
      </field>
      <field>
        <name>BENEF_CUE</name>
        <type>String</type>
        <format/>
        <currency/>
        <decimal/>
        <group/>
        <nullif/>
        <trim_type>none</trim_type>
        <length>-1</length>
        <precision>-1</precision>
      </field>
      <field>
        <name>BENEF_SUC</name>
        <type>String</type>
        <format/>
        <currency/>
        <decimal/>
        <group/>
        <nullif/>
        <trim_type>none</trim_type>
        <length>-1</length>
        <precision>-1</precision>
      </field>
      <field>
        <name>BENEF_CUIT</name>
        <type>String</type>
        <format/>
        <currency/>
        <decimal/>
        <group/>
        <nullif/>
        <trim_type>none</trim_type>
        <length>-1</length>
        <precision>-1</precision>
      </field>
      <field>
        <name>REG_TIPO</name>
        <type>String</type>
        <format/>
        <currency/>
        <decimal/>
        <group/>
        <nullif/>
        <trim_type>none</trim_type>
        <length>-1</length>
        <precision>-1</precision>
      </field>
      <field>
        <name>VISUALIZ_COD</name>
        <type>String</type>
        <format/>
        <currency/>
        <decimal/>
        <group/>
        <nullif/>
        <trim_type>none</trim_type>
        <length>-1</length>
        <precision>-1</precision>
      </field>
      <field>
        <name>MONEDA</name>
        <type>String</type>
        <format/>
        <currency/>
        <decimal/>
        <group/>
        <nullif/>
        <trim_type>none</trim_type>
        <length>-1</length>
        <precision>-1</precision>
      </field>
      <field>
        <name>MONTO</name>
        <type>String</type>
        <format/>
        <currency/>
        <decimal/>
        <group/>
        <nullif/>
        <trim_type>none</trim_type>
        <length>-1</length>
        <precision>-1</precision>
      </field>
      <field>
        <name>FECHA_EMIS</name>
        <type>String</type>
        <format/>
        <currency/>
        <decimal/>
        <group/>
        <nullif/>
        <trim_type>none</trim_type>
        <length>-1</length>
        <precision>-1</precision>
      </field>
      <field>
        <name>HORA_EMIS</name>
        <type>String</type>
        <format/>
        <currency/>
        <decimal/>
        <group/>
        <nullif/>
        <trim_type>none</trim_type>
        <length>-1</length>
        <precision>-1</precision>
      </field>
      <field>
        <name>FECHA_PAGO</name>
        <type>String</type>
        <format/>
        <currency/>
        <decimal/>
        <group/>
        <nullif/>
        <trim_type>none</trim_type>
        <length>-1</length>
        <precision>-1</precision>
      </field>
      <field>
        <name>HORA_PAGO</name>
        <type>String</type>
        <format/>
        <currency/>
        <decimal/>
        <group/>
        <nullif/>
        <trim_type>none</trim_type>
        <length>-1</length>
        <precision>-1</precision>
      </field>
      <field>
        <name>FECHA_TRAN</name>
        <type>String</type>
        <format/>
        <currency/>
        <decimal/>
        <group/>
        <nullif/>
        <trim_type>none</trim_type>
        <length>-1</length>
        <precision>-1</precision>
      </field>
      <field>
        <name>HORA_TRAN</name>
        <type>String</type>
        <format/>
        <currency/>
        <decimal/>
        <group/>
        <nullif/>
        <trim_type>none</trim_type>
        <length>-1</length>
        <precision>-1</precision>
      </field>
    </fields>
    <attributes/>
    <cluster_schema/>
    <remotesteps>
      <input>
      </input>
      <output>
      </output>
    </remotesteps>
    <GUI>
      <xloc>1328</xloc>
      <yloc>400</yloc>
      <draw>Y</draw>
    </GUI>
  </step>
  <step>
    <name>Reporte de totales</name>
    <type>TextFileOutput</type>
    <description/>
    <distribute>Y</distribute>
    <custom_distribution/>
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name/>
    </partitioning>
    <separator>;</separator>
    <enclosure>"</enclosure>
    <enclosure_forced>N</enclosure_forced>
    <enclosure_fix_disabled>N</enclosure_fix_disabled>
    <header>Y</header>
    <footer>N</footer>
    <format>DOS</format>
    <compression>None</compression>
    <encoding/>
    <endedLine/>
    <fileNameInField>Y</fileNameInField>
    <fileNameField>FILE_NAME</fileNameField>
    <create_parent_folder>Y</create_parent_folder>
    <file>
      <name>file</name>
      <servlet_output>N</servlet_output>
      <do_not_open_new_file_init>Y</do_not_open_new_file_init>
      <extention/>
      <append>N</append>
      <split>N</split>
      <haspartno>N</haspartno>
      <add_date>N</add_date>
      <add_time>N</add_time>
      <SpecifyFormat>N</SpecifyFormat>
      <date_time_format/>
      <add_to_result_filenames>Y</add_to_result_filenames>
      <pad>N</pad>
      <fast_dump>N</fast_dump>
      <splitevery>0</splitevery>
    </file>
    <fields>
      <field>
        <name>SOPORTE</name>
        <type>String</type>
        <format/>
        <currency/>
        <decimal/>
        <group/>
        <nullif/>
        <trim_type>none</trim_type>
        <length>-1</length>
        <precision>-1</precision>
      </field>
      <field>
        <name>CANTIDAD_TOTAL_REGISTROS</name>
        <type>Integer</type>
        <format>####0;-####0</format>
        <currency/>
        <decimal>,</decimal>
        <group>.</group>
        <nullif/>
        <trim_type>none</trim_type>
        <length>-1</length>
        <precision>0</precision>
      </field>
      <field>
        <name>IMPORTE_TOTAL_REGISTROS</name>
        <type>BigNumber</type>
        <format>######0.0###################;-######0.0###################</format>
        <currency/>
        <decimal>.</decimal>
        <group/>
        <nullif/>
        <trim_type>none</trim_type>
        <length>-1</length>
        <precision>-1</precision>
      </field>
      <field>
        <name>ESTADO</name>
        <type>String</type>
        <format/>
        <currency/>
        <decimal/>
        <group/>
        <nullif/>
        <trim_type>none</trim_type>
        <length>-1</length>
        <precision>-1</precision>
      </field>
      <field>
        <name>DESCRIPCION</name>
        <type>String</type>
        <format/>
        <currency/>
        <decimal/>
        <group/>
        <nullif/>
        <trim_type>none</trim_type>
        <length>-1</length>
        <precision>-1</precision>
      </field>
      <field>
        <name>DEPOSITOS</name>
        <type>Integer</type>
        <format>####0;-####0</format>
        <currency/>
        <decimal>,</decimal>
        <group>.</group>
        <nullif/>
        <trim_type>none</trim_type>
        <length>-1</length>
        <precision>0</precision>
      </field>
      <field>
        <name>MONTO_TOTAL_DEPOSITOS</name>
        <type>BigNumber</type>
        <format>######0.0###################;-######0.0###################</format>
        <currency/>
        <decimal>.</decimal>
        <group/>
        <nullif/>
        <trim_type>none</trim_type>
        <length>-1</length>
        <precision>-1</precision>
      </field>
      <field>
        <name>CUSTODIA</name>
        <type>Integer</type>
        <format>####0;-####0</format>
        <currency/>
        <decimal>,</decimal>
        <group>.</group>
        <nullif/>
        <trim_type>none</trim_type>
        <length>-1</length>
        <precision>0</precision>
      </field>
      <field>
        <name>MONTO_TOTAL_CUSTODIA</name>
        <type>BigNumber</type>
        <format>######0.0###################;-######0.0###################</format>
        <currency/>
        <decimal>.</decimal>
        <group/>
        <nullif/>
        <trim_type>none</trim_type>
        <length>-1</length>
        <precision>-1</precision>
      </field>
      <field>
        <name>RESCATE</name>
        <type>Integer</type>
        <format>####0;-####0</format>
        <currency/>
        <decimal>,</decimal>
        <group>.</group>
        <nullif/>
        <trim_type>none</trim_type>
        <length>-1</length>
        <precision>0</precision>
      </field>
      <field>
        <name>MONTO_TOTAL_RESCATE</name>
        <type>BigNumber</type>
        <format>######0.0###################;-######0.0###################</format>
        <currency/>
        <decimal>.</decimal>
        <group/>
        <nullif/>
        <trim_type>none</trim_type>
        <length>-1</length>
        <precision>-1</precision>
      </field>
      <field>
        <name>NEGOCIACIONES</name>
        <type>Integer</type>
        <format>####0;-####0</format>
        <currency/>
        <decimal>,</decimal>
        <group>.</group>
        <nullif/>
        <trim_type>none</trim_type>
        <length>-1</length>
        <precision>0</precision>
      </field>
      <field>
        <name>MONTO_TOTAL_NEGOCIACIONES</name>
        <type>BigNumber</type>
        <format>######0.0###################;-######0.0###################</format>
        <currency/>
        <decimal>.</decimal>
        <group/>
        <nullif/>
        <trim_type>none</trim_type>
        <length>-1</length>
        <precision>-1</precision>
      </field>
      <field>
        <name>CAMARA</name>
        <type>Integer</type>
        <format>####0;-####0</format>
        <currency/>
        <decimal>,</decimal>
        <group>.</group>
        <nullif/>
        <trim_type>none</trim_type>
        <length>-1</length>
        <precision>0</precision>
      </field>
      <field>
        <name>MONTO_TOTAL_CAMARA</name>
        <type>BigNumber</type>
        <format>######0.0###################;-######0.0###################</format>
        <currency/>
        <decimal>.</decimal>
        <group/>
        <nullif/>
        <trim_type>none</trim_type>
        <length>-1</length>
        <precision>-1</precision>
      </field>
      <field>
        <name>USUARIO</name>
        <type>String</type>
        <format/>
        <currency/>
        <decimal/>
        <group/>
        <nullif/>
        <trim_type>none</trim_type>
        <length>-1</length>
        <precision>-1</precision>
      </field>
      <field>
        <name>TERMINAL</name>
        <type>String</type>
        <format/>
        <currency/>
        <decimal/>
        <group/>
        <nullif/>
        <trim_type>none</trim_type>
        <length>-1</length>
        <precision>-1</precision>
      </field>
      <field>
        <name>FECHA</name>
        <type>String</type>
        <format/>
        <currency/>
        <decimal/>
        <group/>
        <nullif/>
        <trim_type>none</trim_type>
        <length>-1</length>
        <precision>-1</precision>
      </field>
      <field>
        <name>HORA</name>
        <type>String</type>
        <format/>
        <currency/>
        <decimal/>
        <group/>
        <nullif/>
        <trim_type>none</trim_type>
        <length>-1</length>
        <precision>-1</precision>
      </field>
    </fields>
    <attributes/>
    <cluster_schema/>
    <remotesteps>
      <input>
      </input>
      <output>
      </output>
    </remotesteps>
    <GUI>
      <xloc>2432</xloc>
      <yloc>160</yloc>
      <draw>Y</draw>
    </GUI>
  </step>
  <step>
    <name>Selecciona para reporte</name>
    <type>SelectValues</type>
    <description/>
    <distribute>Y</distribute>
    <custom_distribution/>
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name/>
    </partitioning>
    <fields>
      <field>
        <name>FILE_NAME</name>
      </field>
      <field>
        <name>SOPORTE</name>
      </field>
      <field>
        <name>regTotal</name>
        <rename>CANTIDAD_TOTAL_REGISTROS</rename>
      </field>
      <field>
        <name>importeTotal</name>
        <rename>IMPORTE_TOTAL_REGISTROS</rename>
      </field>
      <field>
        <name>ESTADO</name>
      </field>
      <field>
        <name>DESCRIPCION</name>
      </field>
      <field>
        <name>cantidadDepositos</name>
        <rename>DEPOSITOS</rename>
      </field>
      <field>
        <name>importeDepositos</name>
        <rename>MONTO_TOTAL_DEPOSITOS</rename>
      </field>
      <field>
        <name>cantidadCustodia</name>
        <rename>CUSTODIA</rename>
      </field>
      <field>
        <name>importeCustodia</name>
        <rename>MONTO_TOTAL_CUSTODIA</rename>
      </field>
      <field>
        <name>cantidadRescate</name>
        <rename>RESCATE</rename>
      </field>
      <field>
        <name>importeRescate</name>
        <rename>MONTO_TOTAL_RESCATE</rename>
      </field>
      <field>
        <name>cantidadNegociacion</name>
        <rename>NEGOCIACIONES</rename>
      </field>
      <field>
        <name>importeNegociacion</name>
        <rename>MONTO_TOTAL_NEGOCIACIONES</rename>
      </field>
      <field>
        <name>cantidadCamara</name>
        <rename>CAMARA</rename>
      </field>
      <field>
        <name>importeCamara</name>
        <rename>MONTO_TOTAL_CAMARA</rename>
      </field>
      <field>
        <name>USUARIO</name>
      </field>
      <field>
        <name>TERMINAL</name>
      </field>
      <field>
        <name>FECHA</name>
      </field>
      <field>
        <name>HORA</name>
      </field>
      <select_unspecified>N</select_unspecified>
    </fields>
    <attributes/>
    <cluster_schema/>
    <remotesteps>
      <input>
      </input>
      <output>
      </output>
    </remotesteps>
    <GUI>
      <xloc>2288</xloc>
      <yloc>160</yloc>
      <draw>Y</draw>
    </GUI>
  </step>
  <step>
    <name>Selecciona registros</name>
    <type>SelectValues</type>
    <description/>
    <distribute>Y</distribute>
    <custom_distribution/>
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name/>
    </partitioning>
    <fields>
      <field>
        <name>ERROR</name>
      </field>
      <field>
        <name>CHEQ_ID</name>
      </field>
      <field>
        <name>CHEQ_NRO</name>
      </field>
      <field>
        <name>CHEQRA_NRO</name>
      </field>
      <field>
        <name>CHEQ_MODO</name>
      </field>
      <field>
        <name>CHEQ_TIPO</name>
      </field>
      <field>
        <name>CHEQ_CARAC</name>
      </field>
      <field>
        <name>CMC7</name>
      </field>
      <field>
        <name>EMI_FIID</name>
      </field>
      <field>
        <name>EMI_CBU</name>
      </field>
      <field>
        <name>EMI_CUE</name>
      </field>
      <field>
        <name>EMI_SUC</name>
      </field>
      <field>
        <name>EMI_SUBCUE</name>
      </field>
      <field>
        <name>EMI_CUIT</name>
      </field>
      <field>
        <name>BENEF_FIID</name>
      </field>
      <field>
        <name>BENEF_CBU</name>
      </field>
      <field>
        <name>BENEF_CUE</name>
      </field>
      <field>
        <name>BENEF_SUC</name>
      </field>
      <field>
        <name>BENEF_CUIT</name>
      </field>
      <field>
        <name>REG_TIPO</name>
      </field>
      <field>
        <name>VISUALIZ_COD</name>
      </field>
      <field>
        <name>MONEDA</name>
      </field>
      <field>
        <name>MONTO</name>
      </field>
      <field>
        <name>FECHA_EMIS</name>
      </field>
      <field>
        <name>HORA_EMIS</name>
      </field>
      <field>
        <name>FECHA_PAGO</name>
      </field>
      <field>
        <name>HORA_PAGO</name>
      </field>
      <field>
        <name>FECHA_TRAN</name>
      </field>
      <field>
        <name>HORA_TRAN</name>
      </field>
      <field>
        <name>archivo</name>
      </field>
      <select_unspecified>N</select_unspecified>
    </fields>
    <attributes/>
    <cluster_schema/>
    <remotesteps>
      <input>
      </input>
      <output>
      </output>
    </remotesteps>
    <GUI>
      <xloc>560</xloc>
      <yloc>320</yloc>
      <draw>Y</draw>
    </GUI>
  </step>
  <step>
    <name>Select values</name>
    <type>SelectValues</type>
    <description/>
    <distribute>Y</distribute>
    <custom_distribution/>
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name/>
    </partitioning>
    <fields>
      <field>
        <name>CHEQ_ID</name>
      </field>
      <field>
        <name>CHEQ_NRO</name>
      </field>
      <field>
        <name>CHEQ_TIPO</name>
      </field>
      <field>
        <name>CHEQ_MODO</name>
      </field>
      <field>
        <name>CHEQ_CARAC</name>
      </field>
      <field>
        <name>CHEQRA_NRO</name>
      </field>
      <field>
        <name>CMC7</name>
      </field>
      <field>
        <name>VISUALIZ_COD</name>
      </field>
      <field>
        <name>REG_TIPO</name>
      </field>
      <field>
        <name>EMI_FIID</name>
      </field>
      <field>
        <name>EMI_SUC</name>
      </field>
      <field>
        <name>EMI_CUE</name>
      </field>
      <field>
        <name>EMI_SUBCUE</name>
      </field>
      <field>
        <name>EMI_CBU</name>
      </field>
      <field>
        <name>EMI_CUIT</name>
      </field>
      <field>
        <name>MONEDA</name>
      </field>
      <field>
        <name>MONTO</name>
      </field>
      <field>
        <name>IMPORTE</name>
      </field>
      <field>
        <name>FECHA_EMIS</name>
      </field>
      <field>
        <name>HORA_EMIS</name>
      </field>
      <field>
        <name>FECHA_PAGO</name>
      </field>
      <field>
        <name>HORA_PAGO</name>
      </field>
      <field>
        <name>FECHA_TRAN</name>
      </field>
      <field>
        <name>HORA_TRAN</name>
      </field>
      <field>
        <name>BENEF_FIID</name>
      </field>
      <field>
        <name>BENEF_SUC</name>
      </field>
      <field>
        <name>BENEF_CUE</name>
      </field>
      <field>
        <name>BENEF_CBU</name>
      </field>
      <field>
        <name>BENEF_CUIT</name>
      </field>
      <field>
        <name>ESTADO</name>
      </field>
      <field>
        <name>DESCRIPCION</name>
      </field>
      <field>
        <name>CANAL</name>
      </field>
      <field>
        <name>ORDEN</name>
      </field>
      <field>
        <name>regCantidad</name>
      </field>
      <field>
        <name>archivo</name>
      </field>
      <select_unspecified>N</select_unspecified>
      <meta>
        <name>IMPORTE</name>
        <rename>IMPORTE</rename>
        <type>BigNumber</type>
        <length>-2</length>
        <precision>-2</precision>
        <conversion_mask>0.00</conversion_mask>
        <date_format_lenient>false</date_format_lenient>
        <date_format_locale/>
        <date_format_timezone/>
        <lenient_string_to_number>false</lenient_string_to_number>
        <encoding/>
        <decimal_symbol/>
        <grouping_symbol/>
        <currency_symbol/>
        <storage_type/>
      </meta>
      <meta>
        <name>EMI_FIID</name>
        <rename>EMI_FIID</rename>
        <type>Integer</type>
        <length>-2</length>
        <precision>-2</precision>
        <conversion_mask>0</conversion_mask>
        <date_format_lenient>false</date_format_lenient>
        <date_format_locale/>
        <date_format_timezone/>
        <lenient_string_to_number>false</lenient_string_to_number>
        <encoding/>
        <decimal_symbol/>
        <grouping_symbol/>
        <currency_symbol/>
        <storage_type/>
      </meta>
      <meta>
        <name>BENEF_FIID</name>
        <rename>BENEF_FIID</rename>
        <type>Integer</type>
        <length>-2</length>
        <precision>-2</precision>
        <conversion_mask>0</conversion_mask>
        <date_format_lenient>false</date_format_lenient>
        <date_format_locale/>
        <date_format_timezone/>
        <lenient_string_to_number>false</lenient_string_to_number>
        <encoding/>
        <decimal_symbol/>
        <grouping_symbol/>
        <currency_symbol/>
        <storage_type/>
      </meta>
      <meta>
        <name>EMI_SUC</name>
        <rename>EMI_SUC</rename>
        <type>Integer</type>
        <length>-2</length>
        <precision>-2</precision>
        <conversion_mask>0</conversion_mask>
        <date_format_lenient>false</date_format_lenient>
        <date_format_locale/>
        <date_format_timezone/>
        <lenient_string_to_number>false</lenient_string_to_number>
        <encoding/>
        <decimal_symbol/>
        <grouping_symbol/>
        <currency_symbol/>
        <storage_type/>
      </meta>
      <meta>
        <name>BENEF_SUC</name>
        <rename>BENEF_SUC</rename>
        <type>Integer</type>
        <length>-2</length>
        <precision>-2</precision>
        <conversion_mask>0</conversion_mask>
        <date_format_lenient>false</date_format_lenient>
        <date_format_locale/>
        <date_format_timezone/>
        <lenient_string_to_number>false</lenient_string_to_number>
        <encoding/>
        <decimal_symbol/>
        <grouping_symbol/>
        <currency_symbol/>
        <storage_type/>
      </meta>
      <meta>
        <name>EMI_CUE</name>
        <rename>EMI_CUE</rename>
        <type>Integer</type>
        <length>-2</length>
        <precision>-2</precision>
        <conversion_mask>0</conversion_mask>
        <date_format_lenient>false</date_format_lenient>
        <date_format_locale/>
        <date_format_timezone/>
        <lenient_string_to_number>false</lenient_string_to_number>
        <encoding/>
        <decimal_symbol/>
        <grouping_symbol/>
        <currency_symbol/>
        <storage_type/>
      </meta>
      <meta>
        <name>BENEF_CUE</name>
        <rename>BENEF_CUE</rename>
        <type>Integer</type>
        <length>-2</length>
        <precision>-2</precision>
        <conversion_mask>0</conversion_mask>
        <date_format_lenient>false</date_format_lenient>
        <date_format_locale/>
        <date_format_timezone/>
        <lenient_string_to_number>false</lenient_string_to_number>
        <encoding/>
        <decimal_symbol/>
        <grouping_symbol/>
        <currency_symbol/>
        <storage_type/>
      </meta>
    </fields>
    <attributes/>
    <cluster_schema/>
    <remotesteps>
      <input>
      </input>
      <output>
      </output>
    </remotesteps>
    <GUI>
      <xloc>1344</xloc>
      <yloc>160</yloc>
      <draw>Y</draw>
    </GUI>
  </step>
  <step>
    <name>Sin error?</name>
    <type>FilterRows</type>
    <description/>
    <distribute>Y</distribute>
    <custom_distribution/>
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name/>
    </partitioning>
    <send_true_to>REG_OK</send_true_to>
    <send_false_to>Error en generico</send_false_to>
    <compare>
      <condition>
        <negated>N</negated>
        <leftvalue>GEN_ERROR</leftvalue>
        <function>IS NULL</function>
        <rightvalue/>
      </condition>
    </compare>
    <attributes/>
    <cluster_schema/>
    <remotesteps>
      <input>
      </input>
      <output>
      </output>
    </remotesteps>
    <GUI>
      <xloc>1600</xloc>
      <yloc>160</yloc>
      <draw>Y</draw>
    </GUI>
  </step>
  <step>
    <name>Sort rows</name>
    <type>SortRows</type>
    <description/>
    <distribute>Y</distribute>
    <custom_distribution/>
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name/>
    </partitioning>
    <directory>%%java.io.tmpdir%%</directory>
    <prefix>out</prefix>
    <sort_size>1000000</sort_size>
    <free_memory/>
    <compress>N</compress>
    <compress_variable/>
    <unique_rows>N</unique_rows>
    <fields>
      <field>
        <name>REG_TIPO</name>
        <ascending>Y</ascending>
        <case_sensitive>N</case_sensitive>
        <collator_enabled>N</collator_enabled>
        <collator_strength>0</collator_strength>
        <presorted>N</presorted>
      </field>
    </fields>
    <attributes/>
    <cluster_schema/>
    <remotesteps>
      <input>
      </input>
      <output>
      </output>
    </remotesteps>
    <GUI>
      <xloc>1872</xloc>
      <yloc>160</yloc>
      <draw>Y</draw>
    </GUI>
  </step>
  <step>
    <name>Valida set de datos</name>
    <type>ScriptValueMod</type>
    <description/>
    <distribute>Y</distribute>
    <custom_distribution/>
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name/>
    </partitioning>
    <compatible>N</compatible>
    <optimizationLevel>9</optimizationLevel>
    <jsScripts>
      <jsScript>
        <jsScript_type>0</jsScript_type>
        <jsScript_name>Script 1</jsScript_name>
        <jsScript_script>trans_Status = CONTINUE_TRANSFORMATION;

errors = [];
ERROR = null;

if (isNaN(CHEQ_NRO)) errors.push('Número de Cheque ['+CHEQ_NRO+'] inválido');
if (['D','N'].indexOf(String(CHEQ_TIPO))==-1) errors.push('Tipo Cheque ['+CHEQ_TIPO+'] inválido.');
if (['1','0'].indexOf(String(CHEQ_MODO))==-1) errors.push('Modo Cheque ['+CHEQ_MODO+'] inválido.');
CHEQ_CARAC=mapaCheqCarac[CHEQ_CARAC];
if (['1','0'].indexOf(String(CHEQ_CARAC))==-1) errors.push('Característica Cheque ['+CHEQ_CARAC+'] inválido.');
if (isNaN(CHEQRA_NRO)) errors.push('Número de chequera ['+CHEQRA_NRO+'] inválida');
if (isNaN(CMC7)) errors.push('CMC7 ['+CMC7+'] inválido');
if (['D','C','R','N'].indexOf(String(REG_TIPO))==-1) errors.push('Tipo Registro Cheque ['+REG_TIPO+'] inválido.');
if (isNaN(EMI_FIID)) errors.push('FIID Entidad Emisora ['+EMI_FIID+'] inválida.');
if (isNaN(EMI_SUC)) errors.push('Sucursal Emisora ['+EMI_SUC+'] inválida.');
if (isNaN(EMI_CUE)) errors.push('Cuenta Emisora ['+EMI_CUE+'] inválida.');
if (isNaN(EMI_SUBCUE)) errors.push('Subcuenta Emisora ['+EMI_SUBCUE+'] inválida.');
if (isNaN(EMI_CBU)) errors.push('CBU Emisor ['+EMI_CBU+'] inválido.');
if (isNaN(EMI_CUIT)) errors.push('CUIT Emisor ['+EMI_CUIT+'] inválido.');
if (MONEDA != '032') errors.push('MONEDA ['+MONEDA+'] Inválida');
if (isNaN(MONTO)) errors.push('MONTO ['+MONTO+'] inválido');
if (!parseDate(FECHA_EMIS, 'yyMMdd')) errors.push('Fecha de Emisión ['+FECHA_EMIS+'] inválida');
if (!parseDate(HORA_EMIS, 'HHmmss')) errors.push('Hora de Emisión ['+HORA_EMIS+'] inválida');
if (!parseDate(FECHA_PAGO, 'yyMMdd')) errors.push('Fecha de Pago ['+FECHA_PAGO+'] inválida');
if (!parseDate(HORA_PAGO, 'HHmmss')) errors.push('Hora de Pago ['+HORA_PAGO+'] inválida');
if (!parseDate(FECHA_TRAN, 'yyMMdd')) errors.push('Fecha de Transacción ['+FECHA_TRAN+'] inválida');
if (!parseDate(HORA_TRAN, 'HHmmss')) errors.push('Hora de Transacción ['+HORA_TRAN+'] inválida');
if (isNaN(BENEF_FIID)) errors.push('FIID Entidad Beneficiaria ['+BENEF_FIID+'] inválida');
if (isNaN(BENEF_SUC)) errors.push('Sucursal Entidad Beneficiaria ['+BENEF_SUC+'] inválida');
if (isNaN(BENEF_CBU)) errors.push('CBU Beneficiario ['+BENEF_CBU+'] inválido');
if (isNaN(BENEF_CUIT)) errors.push('Cuit Beneficiario ['+BENEF_CUIT+'] inválido');

if (errors.length != 0) {
	ERROR = 'Reg. N° '+regCantidad+'. Errores encontrados: '+errors.join(' | ');
	writeToLog('e', ERROR);
	putError(ERROR);
};



</jsScript_script>
      </jsScript>
      <jsScript>
        <jsScript_type>1</jsScript_type>
        <jsScript_name>Item_0</jsScript_name>
        <jsScript_script>//Script here


mapaCheqCarac = {
	'A': '1',
	'N': '0'
}

const parseDate = function (date, format) {
  var parsedDate;
  try {
    parsedDate = str2date( date, format);
  } catch (ex) {
    return null;
  }
 
  var reversedDate = date2str( parsedDate, format);
 
  if ( reversedDate == date) {
    return parsedDate;
  } else {
    return null;
  }
}


function putError(ERROR) {
	var message = java.lang.String.valueOf(String(ERROR));
	_step_.putError( rowMeta, row, 1, message, '', 'ESPERADO');
	trans_Status = SKIP_TRANSFORMATION;
}</jsScript_script>
      </jsScript>
    </jsScripts>
    <fields>
      <field>
        <name>ERROR</name>
        <rename>ERROR</rename>
        <type>String</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>N</replace>
      </field>
      <field>
        <name>CHEQ_CARAC</name>
        <rename>CHEQ_CARAC</rename>
        <type>String</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>Y</replace>
      </field>
    </fields>
    <attributes/>
    <cluster_schema/>
    <remotesteps>
      <input>
      </input>
      <output>
      </output>
    </remotesteps>
    <GUI>
      <xloc>560</xloc>
      <yloc>160</yloc>
      <draw>Y</draw>
    </GUI>
  </step>
  <step>
    <name>lastRow</name>
    <type>DetectLastRow</type>
    <description/>
    <distribute>Y</distribute>
    <custom_distribution/>
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name/>
    </partitioning>
    <resultfieldname>lastRow</resultfieldname>
    <attributes/>
    <cluster_schema/>
    <remotesteps>
      <input>
      </input>
      <output>
      </output>
    </remotesteps>
    <GUI>
      <xloc>192</xloc>
      <yloc>160</yloc>
      <draw>Y</draw>
    </GUI>
  </step>
  <step>
    <name>reporteLastRow</name>
    <type>DetectLastRow</type>
    <description/>
    <distribute>Y</distribute>
    <custom_distribution/>
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name/>
    </partitioning>
    <resultfieldname>reporteLastRow</resultfieldname>
    <attributes/>
    <cluster_schema/>
    <remotesteps>
      <input>
      </input>
      <output>
      </output>
    </remotesteps>
    <GUI>
      <xloc>2016</xloc>
      <yloc>160</yloc>
      <draw>Y</draw>
    </GUI>
  </step>
  <step_error_handling>
    <error>
      <source_step>Valida set de datos</source_step>
      <target_step>Selecciona registros</target_step>
      <is_enabled>Y</is_enabled>
      <nr_valuename/>
      <descriptions_valuename>ERROR</descriptions_valuename>
      <fields_valuename/>
      <codes_valuename/>
      <max_errors/>
      <max_pct_errors/>
      <min_pct_rows/>
    </error>
  </step_error_handling>
  <slave-step-copy-partition-distribution>
  </slave-step-copy-partition-distribution>
  <slave_transformation>N</slave_transformation>
  <attributes/>
</transformation>
