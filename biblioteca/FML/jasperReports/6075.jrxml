<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="6075" language="groovy" pageWidth="1230" pageHeight="842" columnWidth="1190" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20">
	<property name="ireport.zoom" value="1.0"/>
	<property name="ireport.x" value="0"/>
	<property name="ireport.y" value="0"/>
	<property name="net.sf.jasperreports.export.xls.one.page.per.sheet" value="false"/>
	<property name="net.sf.jasperreports.export.xls.remove.empty.space.between.rows" value="true"/>
	<property name="net.sf.jasperreports.export.xls.remove.empty.space.between.columns" value="true"/>
	<property name="net.sf.jasperreports.export.xls.white.page.background" value="false"/>
	<property name="net.sf.jasperreports.export.xls.detect.cell.type" value="true"/>
	<property name="net.sf.jasperreports.export.xls.ignore.graphics" value="true"/>
	<property name="net.sf.jasperreports.export.xls.exclude.origin.band.2" value="pageFooter"/>
	<property name="net.sf.jasperreports.export.xls.exclude.origin.keep.first.band.1" value="pageHeader"/>
	<parameter name="FAMILIA" class="java.lang.Integer"/>
	<parameter name="USAFAMILIA" class="java.lang.String"/>
	<parameter name="PRODUCTO" class="java.lang.Integer"/>
	<parameter name="USAPRODUCTO" class="java.lang.String"/>
	<parameter name="SUCURSAL" class="java.lang.Integer"/>
	<parameter name="USASUCURSAL" class="java.lang.String"/>
	<parameter name="SITUACION" class="java.lang.String"/>
	<parameter name="USASITUACION" class="java.lang.String"/>
	<parameter name="GARANTIA" class="java.lang.String"/>
	<parameter name="USAGARANTIA" class="java.lang.String"/>
	<parameter name="TASADESDE" class="java.math.BigDecimal"/>
	<parameter name="TASAHASTA" class="java.math.BigDecimal"/>
	<parameter name="USATASA" class="java.lang.String"/>
	<parameter name="PROCENTAJEPAGO" class="java.math.BigDecimal"/>
	<parameter name="USAPROCENTAJEPAGO" class="java.lang.String"/>
	<parameter name="VENCIMIENTO" class="java.util.Date"/>
	<parameter name="USAVENCIMIENTO" class="java.lang.String"/>
	<queryString>
		<![CDATA[SELECT concat(c.TIPODOC,' ',c.NUMERODOC) AS DOCUMENTO, c.NOMBRECLIENTE, concat(a.SUCURSAL,' - ',a.NOMBRESUCURSAL) AS SUCURSAL,
concat(a.FAMILIA,' - ',f.DESCRIPCION) AS FAMILIA, concat(a.PRODUCTO,' - ',a.NOMBREPRODUCTO) AS PRODUCTO,
a.OPERACION, a.DESGLOSE, a.SALDO, a.VENCIMIENTO, a.PORCENTAJE_PAGO, a.TASA, gd.DESCRIPCION AS GARANTIA_DESEMBOLSO
FROM VW_ASISTENCIAS a
INNER JOIN VW_CLI_X_DOC c ON a.CLIENTE = c.CODIGOCLIENTE
INNER JOIN CRE_FAMILIAS f ON a.FAMILIA = f.FAMILIAPROD AND f.TZ_LOCK = 0
LEFT JOIN OPCIONES gd ON a.GARANTIA_DESEMBOLSO = gd.OPCIONINTERNA AND gd.NUMERODECAMPO = 43282
WHERE a.SALDO > 0 AND a.TIPO = 5 AND a.JTS_OID NOT IN (SELECT JTS_OID_ASISTENCIA FROM CRE_DET_CESIONCARTERA WHERE TZ_LOCK = 0 AND NUMERO_CESION NOT IN (SELECT NUMERO_CESION FROM CRE_CAB_CESIONCARTERA WHERE TZ_LOCK = 0 AND ESTADO IN ('I','C'))) AND
((a.FAMILIA = $P{FAMILIA} AND $P{USAFAMILIA} = 'S') OR $P{USAFAMILIA} = 'N') AND
((a.PRODUCTO = $P{PRODUCTO} AND $P{USAPRODUCTO} = 'S') OR $P{USAPRODUCTO} = 'N') AND
((a.SUCURSAL = $P{SUCURSAL} AND $P{USASUCURSAL} = 'S') OR $P{USASUCURSAL} = 'N') AND
((a.SITUACION = $P{SITUACION} AND $P{USASITUACION} = 'S') OR $P{USASITUACION} = 'N') AND
((a.GARANTIA_DESEMBOLSO = $P{GARANTIA} AND $P{USAGARANTIA} = 'S') OR $P{USAGARANTIA} = 'N') AND
((a.TASA >= $P{TASADESDE} AND a.TASA <= $P{TASAHASTA} AND $P{USATASA} = 'S') OR $P{USATASA} = 'N') AND
((a.PORCENTAJE_PAGO >= $P{PROCENTAJEPAGO} AND $P{USAPROCENTAJEPAGO} = 'S') OR $P{USAPROCENTAJEPAGO} = 'N') AND
((a.VENCIMIENTO >= CONVERT(datetime, $P{VENCIMIENTO}, 103) AND $P{USAVENCIMIENTO} = 'S') OR $P{USAVENCIMIENTO} = 'N')]]>
	</queryString>
	<field name="DOCUMENTO" class="java.lang.String"/>
	<field name="NOMBRECLIENTE" class="java.lang.String"/>
	<field name="SUCURSAL" class="java.lang.String"/>
	<field name="FAMILIA" class="java.lang.String"/>
	<field name="PRODUCTO" class="java.lang.String"/>
	<field name="OPERACION" class="java.math.BigDecimal"/>
	<field name="DESGLOSE" class="java.math.BigDecimal"/>
	<field name="SALDO" class="java.math.BigDecimal"/>
	<field name="VENCIMIENTO" class="java.sql.Timestamp"/>
	<field name="PORCENTAJE_PAGO" class="java.math.BigDecimal"/>
	<field name="TASA" class="java.math.BigDecimal"/>
	<field name="GARANTIA_DESEMBOLSO" class="java.lang.String"/>
	<background>
		<band splitType="Stretch"/>
	</background>
	<title>
		<band height="55" splitType="Stretch">
			<staticText>
				<reportElement x="80" y="0" width="941" height="33"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="18" isBold="true"/>
				</textElement>
				<text><![CDATA[Asistencias para Cesión de Cartera ]]></text>
			</staticText>
			<image>
				<reportElement x="0" y="0" width="80" height="40"/>
				<imageExpression class="java.lang.String"><![CDATA[java.lang.System.getProperty("topsystems.images.root")+"logo.png"]]></imageExpression>
			</image>
		</band>
	</title>
	<columnHeader>
		<band height="29" splitType="Stretch">
			<staticText>
				<reportElement x="0" y="0" width="112" height="29"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="11" isBold="true"/>
				</textElement>
				<text><![CDATA[Documento]]></text>
			</staticText>
			<staticText>
				<reportElement x="112" y="0" width="180" height="29"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="11" isBold="true"/>
				</textElement>
				<text><![CDATA[Sucursal]]></text>
			</staticText>
			<staticText>
				<reportElement x="292" y="0" width="180" height="29"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="11" isBold="true"/>
				</textElement>
				<text><![CDATA[Familia]]></text>
			</staticText>
			<staticText>
				<reportElement x="472" y="0" width="180" height="29"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="11" isBold="true"/>
				</textElement>
				<text><![CDATA[Producto]]></text>
			</staticText>
			<staticText>
				<reportElement x="652" y="0" width="73" height="29"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="11" isBold="true"/>
				</textElement>
				<text><![CDATA[Operación]]></text>
			</staticText>
			<staticText>
				<reportElement x="725" y="0" width="63" height="29"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="11" isBold="true"/>
				</textElement>
				<text><![CDATA[Desglose]]></text>
			</staticText>
			<staticText>
				<reportElement x="788" y="0" width="100" height="29"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="11" isBold="true"/>
				</textElement>
				<text><![CDATA[Saldo]]></text>
			</staticText>
			<staticText>
				<reportElement x="888" y="0" width="80" height="29"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="11" isBold="true"/>
				</textElement>
				<text><![CDATA[Vencimiento]]></text>
			</staticText>
			<staticText>
				<reportElement x="968" y="0" width="53" height="29"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="11" isBold="true"/>
				</textElement>
				<text><![CDATA[% Pago]]></text>
			</staticText>
			<staticText>
				<reportElement x="1021" y="0" width="64" height="29"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="11" isBold="true"/>
				</textElement>
				<text><![CDATA[Tasa]]></text>
			</staticText>
			<staticText>
				<reportElement x="1085" y="0" width="102" height="29"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="11" isBold="true"/>
				</textElement>
				<text><![CDATA[Garantía]]></text>
			</staticText>
		</band>
	</columnHeader>
	<detail>
		<band height="22" splitType="Stretch">
			<textField pattern="" isBlankWhenNull="true">
				<reportElement x="0" y="0" width="112" height="22"/>
				<textElement textAlignment="Center" verticalAlignment="Middle"/>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{DOCUMENTO}]]></textFieldExpression>
			</textField>
			<textField pattern="" isBlankWhenNull="true">
				<reportElement x="112" y="0" width="180" height="22"/>
				<textElement textAlignment="Center" verticalAlignment="Middle"/>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{SUCURSAL}]]></textFieldExpression>
			</textField>
			<textField pattern="" isBlankWhenNull="true">
				<reportElement x="292" y="0" width="180" height="22"/>
				<textElement textAlignment="Center" verticalAlignment="Middle"/>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{FAMILIA}]]></textFieldExpression>
			</textField>
			<textField pattern="" isBlankWhenNull="true">
				<reportElement x="472" y="0" width="180" height="22"/>
				<textElement textAlignment="Center" verticalAlignment="Middle"/>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{PRODUCTO}]]></textFieldExpression>
			</textField>
			<textField pattern="" isBlankWhenNull="true">
				<reportElement x="652" y="0" width="73" height="22"/>
				<textElement textAlignment="Center" verticalAlignment="Middle"/>
				<textFieldExpression class="java.lang.Integer"><![CDATA[$F{OPERACION}]]></textFieldExpression>
			</textField>
			<textField pattern="" isBlankWhenNull="true">
				<reportElement x="723" y="0" width="65" height="22"/>
				<textElement textAlignment="Center" verticalAlignment="Middle"/>
				<textFieldExpression class="java.lang.Integer"><![CDATA[$F{DESGLOSE}]]></textFieldExpression>
			</textField>
			<textField pattern="#,##0.00" isBlankWhenNull="true">
				<reportElement x="788" y="0" width="100" height="22"/>
				<textElement textAlignment="Center" verticalAlignment="Middle"/>
				<textFieldExpression class="java.math.BigDecimal"><![CDATA[$F{SALDO}]]></textFieldExpression>
			</textField>
			<textField pattern="dd/MM/yyyy" isBlankWhenNull="true">
				<reportElement x="888" y="0" width="80" height="22"/>
				<textElement textAlignment="Center" verticalAlignment="Middle"/>
				<textFieldExpression class="java.util.Date"><![CDATA[$F{VENCIMIENTO}]]></textFieldExpression>
			</textField>
			<textField pattern="#,##0.00" isBlankWhenNull="true">
				<reportElement x="968" y="0" width="53" height="22"/>
				<textElement textAlignment="Center" verticalAlignment="Middle"/>
				<textFieldExpression class="java.math.BigDecimal"><![CDATA[$F{PORCENTAJE_PAGO}]]></textFieldExpression>
			</textField>
			<textField pattern="#,##0.00" isBlankWhenNull="true">
				<reportElement x="1021" y="0" width="64" height="22"/>
				<textElement textAlignment="Center" verticalAlignment="Middle"/>
				<textFieldExpression class="java.math.BigDecimal"><![CDATA[$F{TASA}]]></textFieldExpression>
			</textField>
			<textField pattern="" isBlankWhenNull="true">
				<reportElement x="1085" y="0" width="102" height="22"/>
				<textElement textAlignment="Center" verticalAlignment="Middle"/>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{GARANTIA_DESEMBOLSO}]]></textFieldExpression>
			</textField>
		</band>
	</detail>
</jasperReport>
