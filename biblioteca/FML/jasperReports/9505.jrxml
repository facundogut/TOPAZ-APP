<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="9505" pageWidth="595" pageHeight="842" columnWidth="555" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20">
	<property name="ireport.zoom" value="1.0"/>
	<property name="ireport.x" value="0"/>
	<property name="ireport.y" value="0"/>
	<parameter name="ID_BCE" class="java.lang.Double">
		<parameterDescription><![CDATA[ID Balance]]></parameterDescription>
		<defaultValueExpression><![CDATA[($P{ID_BCE} == null) ? 1 : $P{ID_BCE}]]></defaultValueExpression>
	</parameter>
	<parameter name="FECHAQUERY" class="java.util.Date">
		<parameterDescription><![CDATA[Fecha]]></parameterDescription>
	</parameter>
	<parameter name="Tipo_BCE" class="java.lang.String">
		<parameterDescription><![CDATA[Tipo de Balance (D,M)]]></parameterDescription>
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<queryString>
		<![CDATA[
SELECT   br.CODIGO_INTERNO
	,bi.DESCRIPCION
	,sum(CASE WHEN SUBSTRING(br.CODIGO_INTERNO,1,1) IN('1','6') THEN br.SALDOMESANTMN* -1
		WHEN SUBSTRING(br.CODIGO_INTERNO,1,2) = '81' THEN br.SALDOMESANTMN* -1
		WHEN SUBSTRING(br.CODIGO_INTERNO,1,10) = '8401010001' THEN br.SALDOMESANTMN* -1
		ELSE br.SALDOMESANTMN
	     END) SaldoAnt
	,sum(br.DEBITOSMN) Debitos
	,sum(br.CREDITOSMN) Creditos
	,sum(CASE WHEN SUBSTRING(br.CODIGO_INTERNO,1,1) IN ('1','6') THEN br.SALDOFINMESMN*-1
		WHEN SUBSTRING(br.CODIGO_INTERNO,1,2) = '81' THEN br.SALDOFINMESMN*-1
		WHEN SUBSTRING(br.CODIGO_INTERNO,1,10) = '8401010001' THEN br.SALDOFINMESMN*-1
		ELSE br.SALDOFINMESMN
    	     END) SaldoAct
FROM CO_BALANCE_RESULTADOS br
	 INNER JOIN CO_BALANCE_IMPRESION bi ON br.CODIGO_INTERNO = bi.CODIGO_INTERNO
WHERE br.FECHA = $P{FECHAQUERY}
	AND br.ID_BCE = isnull($P{ID_BCE},1)
	AND br.TIPO_BALANCE = (CASE WHEN ($P{Tipo_BCE} = '' OR $P{Tipo_BCE}='D') THEN 'D'
					ELSE 'M'
				END)
GROUP BY br.CODIGO_INTERNO
	,bi.DESCRIPCION
	,br.TIPO_BALANCE
	,br.ID_BCE
ORDER BY br.CODIGO_INTERNO
]]>
	</queryString>
	<field name="CODIGO_INTERNO" class="java.lang.String"/>
	<field name="DESCRIPCION" class="java.lang.String"/>
	<field name="SaldoAnt" class="java.math.BigDecimal"/>
	<field name="Debitos" class="java.math.BigDecimal"/>
	<field name="Creditos" class="java.math.BigDecimal"/>
	<field name="SaldoAct" class="java.math.BigDecimal"/>
	<variable name="Tipo_Balance" class="java.lang.String">
		<initialValueExpression><![CDATA["M"]]></initialValueExpression>
	</variable>
	<background>
		<band splitType="Stretch"/>
	</background>
	<title>
		<band height="66" splitType="Stretch">
			<staticText>
				<reportElement x="217" y="24" width="28" height="20"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="12" isBold="true"/>
				</textElement>
				<text><![CDATA[Al]]></text>
			</staticText>
			<textField pattern="dd MMMMM yyyy">
				<reportElement x="246" y="24" width="100" height="20"/>
				<textElement textAlignment="Left" verticalAlignment="Middle">
					<font size="12" isBold="true"/>
				</textElement>
				<textFieldExpression class="java.util.Date"><![CDATA[$P{FECHAQUERY}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement x="191" y="44" width="172" height="20"/>
				<textElement>
					<font size="11"/>
				</textElement>
				<text><![CDATA[(Cifras expresadas en Cordobas)]]></text>
			</staticText>
			<staticText>
				<reportElement x="191" y="4" width="172" height="20"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="12" isBold="true"/>
				</textElement>
				<text><![CDATA[Balanza de Comprobación]]></text>
			</staticText>
		</band>
	</title>
	<pageHeader>
		<band height="26" splitType="Stretch">
			<staticText>
				<reportElement x="478" y="6" width="75" height="16"/>
				<textElement textAlignment="Right">
					<font isBold="true"/>
				</textElement>
				<text><![CDATA[Saldo Final]]></text>
			</staticText>
			<staticText>
				<reportElement x="253" y="6" width="75" height="16"/>
				<textElement textAlignment="Right">
					<font isBold="true"/>
				</textElement>
				<text><![CDATA[Saldo Inicial]]></text>
			</staticText>
			<rectangle>
				<reportElement mode="Transparent" x="0" y="1" width="555" height="25"/>
			</rectangle>
			<staticText>
				<reportElement x="403" y="6" width="75" height="16"/>
				<textElement textAlignment="Right">
					<font isBold="true"/>
				</textElement>
				<text><![CDATA[Créditos]]></text>
			</staticText>
			<staticText>
				<reportElement x="54" y="6" width="192" height="16"/>
				<textElement>
					<font isBold="true"/>
				</textElement>
				<text><![CDATA[Descripción]]></text>
			</staticText>
			<staticText>
				<reportElement x="7" y="6" width="47" height="16"/>
				<textElement>
					<font isBold="true"/>
				</textElement>
				<text><![CDATA[Código]]></text>
			</staticText>
			<staticText>
				<reportElement x="328" y="6" width="75" height="16"/>
				<textElement textAlignment="Right">
					<font isBold="true"/>
				</textElement>
				<text><![CDATA[Débitos]]></text>
			</staticText>
		</band>
	</pageHeader>
	<detail>
		<band height="13" splitType="Stretch">
			<textField pattern="#,##0.00">
				<reportElement x="481" y="1" width="75" height="12"/>
				<textElement textAlignment="Right">
					<font size="8"/>
				</textElement>
				<textFieldExpression class="java.math.BigDecimal"><![CDATA[$F{SaldoAct}]]></textFieldExpression>
			</textField>
			<textField pattern="#,##0.00">
				<reportElement x="406" y="1" width="75" height="12"/>
				<textElement textAlignment="Right">
					<font size="8"/>
				</textElement>
				<textFieldExpression class="java.math.BigDecimal"><![CDATA[$F{Creditos}]]></textFieldExpression>
			</textField>
			<textField pattern="#,##0.00">
				<reportElement x="331" y="1" width="75" height="12"/>
				<textElement textAlignment="Right">
					<font size="8"/>
				</textElement>
				<textFieldExpression class="java.math.BigDecimal"><![CDATA[$F{Debitos}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement positionType="Float" x="57" y="1" width="199" height="12" isPrintWhenDetailOverflows="true"/>
				<textElement>
					<font fontName="SansSerif" size="7"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{DESCRIPCION}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="10" y="1" width="47" height="12"/>
				<textElement>
					<font size="8"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{CODIGO_INTERNO}]]></textFieldExpression>
			</textField>
			<textField pattern="#,##0.00">
				<reportElement x="256" y="1" width="75" height="12"/>
				<textElement textAlignment="Right">
					<font size="8"/>
				</textElement>
				<textFieldExpression class="java.math.BigDecimal"><![CDATA[$F{SaldoAnt}]]></textFieldExpression>
			</textField>
		</band>
	</detail>
</jasperReport>
