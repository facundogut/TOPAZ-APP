<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="Balance_Diario" language="groovy" pageWidth="842" pageHeight="595" orientation="Landscape" columnWidth="802" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20">
	<property name="ireport.zoom" value="1.0"/>
	<property name="ireport.x" value="0"/>
	<property name="ireport.y" value="0"/>
	<parameter name="FECHA_PROCESO" class="java.util.Date"/>
	<queryString>
		<![CDATA[SELECT
I.CODIGO_INTERNO AS CODIGO_INTERNO,
FECHA,
DEBITOSMN AS DEBITOS,
CREDITOSMN AS CREDITOS,
SALDOMESANTMN AS SALDO_INICIAL,
SALDOFINMESMN AS SALDO_FINAL,
I.DESCRIPCION AS "NOMBRECUENTA",
TIPO_BALANCE,
te.ID_BCE,
MONEDA,
I.DESCRIPCION,
SUCURSAL
FROM  CO_BALANCE_IMPRESION I,
(SELECT
R.CODIGO_INTERNO AS "CODIGO",
R.FECHA,
R.ID_BCE,
R.MONEDA,
R.SUCURSAL,
R.TIPO_BALANCE AS TIPO_BALANCE,
SUM(R.DEBITOSMO * TIPO_CAMBIO_oficial ) AS "DEBITOSMN",
SUM(R.CREDITOSMO * TIPO_CAMBIO_oficial)AS "CREDITOSMN",
SUM(R.SALDOSMESANTMO * TIPO_CAMBIO_oficial) AS "SALDOMESANTMN",
SUM(R.SALDOFINMESMO * TIPO_CAMBIO_oficial) AS "SALDOFINMESMN"
FROM CO_BALANCE_RESULTADOS R, HISTORICOTIPOSCAMBIO HC, CO_BALANCE_ESTRUCTURA E
WHERE HC.MONEDA=R.MONEDA
AND HC.FECHA_COTIZACION = FECHA
AND R.CODIGO_INTERNO = E.CODIGO_INTERNO AND R.tipo_balance='M'
AND e.impresion = 'S'--??
AND e.tz_lock = 0
AND FECHA =$P{FECHA_PROCESO}
GROUP BY R.CODIGO_INTERNO, R.FECHA, R.TIPO_BALANCE,R.ID_BCE,R.MONEDA,R.SUCURSAL) te
WHERE CODIGO = I.CODIGO_INTERNO AND I.tz_lock = 0
ORDER BY SUCURSAL,MONEDA,codigo_interno]]>
	</queryString>
	<field name="CODIGO_INTERNO" class="java.lang.String"/>
	<field name="FECHA" class="java.sql.Timestamp"/>
	<field name="DEBITOS" class="java.math.BigDecimal"/>
	<field name="CREDITOS" class="java.math.BigDecimal"/>
	<field name="SALDO_INICIAL" class="java.math.BigDecimal"/>
	<field name="SALDO_FINAL" class="java.math.BigDecimal"/>
	<field name="NOMBRECUENTA" class="java.lang.String"/>
	<field name="TIPO_BALANCE" class="java.lang.String"/>
	<field name="ID_BCE" class="java.math.BigDecimal"/>
	<field name="MONEDA" class="java.lang.Integer"/>
	<field name="DESCRIPCION" class="java.lang.String"/>
	<field name="SUCURSAL" class="java.lang.Integer"/>
	<background>
		<band splitType="Stretch"/>
	</background>
	<title>
		<band height="57" splitType="Stretch">
			<staticText>
				<reportElement x="268" y="0" width="293" height="33"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="16" isBold="true"/>
				</textElement>
				<text><![CDATA[BALANCE MENSUAL SUCURSAL]]></text>
			</staticText>
			<staticText>
				<reportElement x="268" y="33" width="149" height="20"/>
				<textElement textAlignment="Right" verticalAlignment="Middle">
					<font size="14" isBold="true"/>
				</textElement>
				<text><![CDATA[FECHA:]]></text>
			</staticText>
			<textField>
				<reportElement x="417" y="33" width="144" height="20"/>
				<textElement verticalAlignment="Middle">
					<font size="14" isBold="true"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{FECHA}]]></textFieldExpression>
			</textField>
		</band>
	</title>
	<pageHeader>
		<band height="6" splitType="Stretch"/>
	</pageHeader>
	<columnHeader>
		<band height="37" splitType="Stretch">
			<staticText>
				<reportElement x="0" y="2" width="74" height="31"/>
				<textElement verticalAlignment="Bottom">
					<font size="10" isBold="true"/>
				</textElement>
				<text><![CDATA[FECHA]]></text>
			</staticText>
			<staticText>
				<reportElement x="191" y="2" width="59" height="31"/>
				<textElement textAlignment="Center" verticalAlignment="Bottom">
					<font size="10" isBold="true"/>
				</textElement>
				<text><![CDATA[ID_BCE]]></text>
			</staticText>
			<staticText>
				<reportElement x="74" y="2" width="57" height="31"/>
				<textElement textAlignment="Center" verticalAlignment="Bottom">
					<font size="10" isBold="true"/>
				</textElement>
				<text><![CDATA[SUCURSAL]]></text>
			</staticText>
			<staticText>
				<reportElement x="131" y="2" width="60" height="31"/>
				<textElement textAlignment="Center" verticalAlignment="Bottom">
					<font size="10" isBold="true"/>
				</textElement>
				<text><![CDATA[MONEDA]]></text>
			</staticText>
			<staticText>
				<reportElement x="250" y="2" width="96" height="31"/>
				<textElement verticalAlignment="Bottom">
					<font size="10" isBold="true"/>
				</textElement>
				<text><![CDATA[CODIGO INTERNO]]></text>
			</staticText>
			<staticText>
				<reportElement x="346" y="2" width="151" height="31"/>
				<textElement verticalAlignment="Bottom">
					<font size="10" isBold="true"/>
				</textElement>
				<text><![CDATA[DESCRIPCION]]></text>
			</staticText>
			<staticText>
				<reportElement x="497" y="2" width="77" height="31"/>
				<textElement textAlignment="Right" verticalAlignment="Bottom">
					<font size="10" isBold="true"/>
				</textElement>
				<text><![CDATA[SALDO INCIALMN]]></text>
			</staticText>
			<staticText>
				<reportElement x="574" y="2" width="77" height="31"/>
				<textElement textAlignment="Right" verticalAlignment="Bottom">
					<font size="10" isBold="true"/>
				</textElement>
				<text><![CDATA[DEBITOS MN]]></text>
			</staticText>
			<staticText>
				<reportElement x="739" y="2" width="63" height="31"/>
				<textElement textAlignment="Right" verticalAlignment="Bottom">
					<font size="10" isBold="true"/>
				</textElement>
				<text><![CDATA[SALDO FINAL MN]]></text>
			</staticText>
			<staticText>
				<reportElement x="651" y="2" width="77" height="31"/>
				<textElement textAlignment="Right" verticalAlignment="Bottom">
					<font size="10" isBold="true"/>
				</textElement>
				<text><![CDATA[CREDITOS MN]]></text>
			</staticText>
		</band>
	</columnHeader>
	<detail>
		<band height="25" splitType="Stretch">
			<textField>
				<reportElement x="74" y="0" width="57" height="20"/>
				<textElement textAlignment="Center"/>
				<textFieldExpression class="java.math.BigDecimal"><![CDATA[$F{SUCURSAL}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="131" y="0" width="60" height="20"/>
				<textElement textAlignment="Center"/>
				<textFieldExpression class="java.math.BigDecimal"><![CDATA[$F{MONEDA}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="191" y="0" width="57" height="20"/>
				<textElement textAlignment="Center"/>
				<textFieldExpression class="java.math.BigDecimal"><![CDATA[$F{ID_BCE}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="250" y="0" width="96" height="20"/>
				<textElement/>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{CODIGO_INTERNO}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="346" y="0" width="151" height="20"/>
				<textElement/>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{DESCRIPCION}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="0" y="0" width="74" height="20"/>
				<textElement/>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{FECHA}]]></textFieldExpression>
			</textField>
			<textField pattern="#,##0.00">
				<reportElement x="728" y="0" width="74" height="20"/>
				<textElement textAlignment="Right" verticalAlignment="Top"/>
				<textFieldExpression class="java.math.BigDecimal"><![CDATA[$F{SALDO_FINAL}]]></textFieldExpression>
			</textField>
			<textField pattern="#,##0.00">
				<reportElement x="651" y="0" width="77" height="20"/>
				<textElement textAlignment="Right"/>
				<textFieldExpression class="java.math.BigDecimal"><![CDATA[$F{CREDITOS}]]></textFieldExpression>
			</textField>
			<textField pattern="#,##0.00">
				<reportElement x="574" y="0" width="77" height="20"/>
				<textElement textAlignment="Right"/>
				<textFieldExpression class="java.math.BigDecimal"><![CDATA[$F{DEBITOS}]]></textFieldExpression>
			</textField>
			<textField pattern="#,##0.00">
				<reportElement x="497" y="0" width="77" height="20"/>
				<textElement textAlignment="Right"/>
				<textFieldExpression class="java.math.BigDecimal"><![CDATA[$F{SALDO_INICIAL}]]></textFieldExpression>
			</textField>
		</band>
	</detail>
	<summary>
		<band height="42" splitType="Stretch"/>
	</summary>
</jasperReport>
