<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<map>
    <class>
        <class-name>com.topsystems.jtopaz.server.api.TableUsuariosLogueados</class-name>
        <entity-name>core.vo_UsuariosLogueados</entity-name>
        <table-name>Usuarios_Logueados</table-name>
        <database-name>TOP/CLIENTES</database-name>
        <attribute>
            <attribute-name>jts_oid</attribute-name>
            <column-name>JTS_OID</column-name>
            <key>primary</key>
            <attribute-id-generator>selfNumerator</attribute-id-generator>
        </attribute>
        <attribute>
            <attribute-name>usuario</attribute-name>
            <column-name>USUARIO</column-name>
        </attribute>
        <attribute>
            <attribute-name>sucursal</attribute-name>
            <column-name>SUCURSAL</column-name>
        </attribute>
        <attribute>
            <attribute-name>maquina</attribute-name>
            <column-name>MAQUINA</column-name>
        </attribute>
        <attribute>
            <attribute-name>ipCliente</attribute-name>
            <column-name>IP_CLIENTE</column-name>
        </attribute>
        <attribute>
            <attribute-name>ipServidor</attribute-name>
            <column-name>IP_SERVIDOR</column-name>
        </attribute>
        <attribute>
            <attribute-name>macAddress</attribute-name>
            <column-name>MAC_ADDRESS</column-name>
        </attribute>
        <attribute>
            <attribute-name>fechaConexion</attribute-name>
            <column-name>FECHA_LOGIN</column-name>
        </attribute>
    </class>
    <query>
        <class-name>com.topsystems.jtopaz.server.api.TableUsuariosLogueados</class-name>
        <query-name>query.core.vo_SessionsOfServer</query-name>
        <database-name>TOP/CLIENTES</database-name>
        <sentence>
				            SELECT JTS_OID
							FROM Usuarios_Logueados
				            WHERE IP_SERVIDOR = ?
						 </sentence>
        <attribute>
            <attribute-name>jts_oid</attribute-name>
            <column-name>JTS_OID</column-name>
            <column-type>long</column-type>
        </attribute>
    </query>
    <query>
        <class-name>com.topsystems.jtopaz.server.api.TableUsuariosLogueados</class-name>
        <query-name>query.core.vo_CantSessionsUser</query-name>
        <database-name>TOP/CLIENTES</database-name>
        <sentence>
				            SELECT JTS_OID, USUARIO, SUCURSAL, MAQUINA, IP_CLIENTE, IP_SERVIDOR, MAC_ADDRESS, FECHA_LOGIN
							FROM Usuarios_Logueados
				            WHERE USUARIO = ?
						</sentence>
        <attribute>
            <attribute-name>jts_oid</attribute-name>
            <column-name>JTS_OID</column-name>
            <column-type>long</column-type>
        </attribute>
        <attribute>
            <attribute-name>usuario</attribute-name>
            <column-name>USUARIO</column-name>
            <column-type>String</column-type>
        </attribute>
        <attribute>
            <attribute-name>sucursal</attribute-name>
            <column-name>SUCURSAL</column-name>
            <column-type>int</column-type>
        </attribute>
        <attribute>
            <attribute-name>maquina</attribute-name>
            <column-name>MAQUINA</column-name>
            <column-type>int</column-type>
        </attribute>
        <attribute>
            <attribute-name>ipCliente</attribute-name>
            <column-name>IP_CLIENTE</column-name>
            <column-type>String</column-type>
        </attribute>
        <attribute>
            <attribute-name>ipServidor</attribute-name>
            <column-name>IP_SERVIDOR</column-name>
            <column-type>String</column-type>
        </attribute>
        <attribute>
            <attribute-name>macAddress</attribute-name>
            <column-name>MAC_ADDRESS</column-name>
            <column-type>String</column-type>
        </attribute>
        <attribute>
            <attribute-name>fechaConexion</attribute-name>
            <column-name>FECHA_LOGIN</column-name>
            <column-type>Timestamp</column-type>
        </attribute>
    </query>
    <query>
        <class-name>com.topsystems.jtopaz.server.api.TableUsuariosLogueados</class-name>
        <query-name>query.core.vo_SessionToDelete</query-name>
        <database-name>TOP/CLIENTES</database-name>
        <sentence>
				            SELECT JTS_OID
							FROM Usuarios_Logueados
				            WHERE USUARIO = ? AND SUCURSAL = ? AND MAQUINA = ? AND IP_CLIENTE = ? AND IP_SERVIDOR = ? AND MAC_ADDRESS = ? AND FECHA_LOGIN = ?
						 </sentence>
        <attribute>
            <attribute-name>jts_oid</attribute-name>
            <column-name>JTS_OID</column-name>
            <column-type>long</column-type>
        </attribute>
    </query>
    <query>
        <class-name>com.topsystems.jtopaz.server.api.TableUsuariosLogueados</class-name>
        <query-name>query.core.vo_SessionToUpdate</query-name>
        <database-name>TOP/CLIENTES</database-name>
        <sentence>
				            SELECT JTS_OID
							FROM Usuarios_Logueados
				            WHERE USUARIO = ? AND SUCURSAL = ? AND MAQUINA = ? AND IP_CLIENTE = ? AND MAC_ADDRESS = ? AND FECHA_LOGIN = ?
						 </sentence>
        <attribute>
            <attribute-name>jts_oid</attribute-name>
            <column-name>JTS_OID</column-name>
            <column-type>long</column-type>
        </attribute>
    </query>
    <query>
        <class-name>com.topsystems.jtopaz.server.api.TableUsuariosLogueados</class-name>
        <query-name>query.core.vo_AllSessions</query-name>
        <database-name>TOP/CLIENTES</database-name>
        <sentence>
				            SELECT USUARIO, SUCURSAL, MAQUINA, IP_CLIENTE, IP_SERVIDOR, FECHA_LOGIN
							FROM Usuarios_Logueados
						</sentence>
        <attribute>
            <attribute-name>usuario</attribute-name>
            <column-name>USUARIO</column-name>
            <column-type>String</column-type>
        </attribute>
        <attribute>
            <attribute-name>sucursal</attribute-name>
            <column-name>SUCURSAL</column-name>
            <column-type>int</column-type>
        </attribute>
        <attribute>
            <attribute-name>maquina</attribute-name>
            <column-name>MAQUINA</column-name>
            <column-type>int</column-type>
        </attribute>
        <attribute>
            <attribute-name>ipCliente</attribute-name>
            <column-name>IP_CLIENTE</column-name>
            <column-type>String</column-type>
        </attribute>
        <attribute>
            <attribute-name>ipServidor</attribute-name>
            <column-name>IP_SERVIDOR</column-name>
            <column-type>String</column-type>
        </attribute>
        <attribute>
            <attribute-name>fechaConexion</attribute-name>
            <column-name>FECHA_LOGIN</column-name>
            <column-type>Timestamp</column-type>
        </attribute>
    </query>
    <query>
        <class-name>topsystems.automaticprocess.usuariosinactivos.objectdomain.QueryInactividadUsuarios</class-name>
        <query-name>query.QueryInactividadUsuarios</query-name>
        <database-name>TOP/CLIENTES</database-name>
        <sentence>
					SELECT CLAVE, CASE WHEN FECHAULTLOG IS NULL THEN FECHACREACION  ELSE FECHAULTLOG END AS FECHAULTLOG, DESHABILITADO
					  FROM USUARIOS
					 WHERE  CONTROLA_INACTIVO = 'S'
					   AND CLAVE NOT IN
					       (SELECT CLAVE
					          FROM LICENCIAS
					         WHERE FECHA_INICIO IS NULL
					            OR FECHA_FIN IS NULL
					            OR (FECHA_INICIO &gt; ? OR
					               FECHA_FIN &lt; ?)
					           AND TZ_LOCK = 0)
			    </sentence>
        <attribute>
            <attribute-name>clave</attribute-name>
            <column-name>CLAVE</column-name>
            <column-type>String</column-type>
        </attribute>
        <attribute>
            <attribute-name>fechaUltLogin</attribute-name>
            <column-name>FECHAULTLOG</column-name>
            <column-type>Date</column-type>
        </attribute>
        <attribute>
            <attribute-name>deshabilitado</attribute-name>
            <column-name>DESHABILITADO</column-name>
            <column-type>Long</column-type>
        </attribute>
    </query>
    <class>
        <class-name>topsystems.automaticprocess.usuariosinactivos.objectdomain.Notificaciones</class-name>
        <entity-name>core.vo_Notificaciones</entity-name>
        <table-name>NOTIFICACIONES</table-name>
        <database-name>TOP/CLIENTES</database-name>
        <attribute>
            <attribute-name>tz_lock</attribute-name>
            <column-name>TZ_LOCK</column-name>
        </attribute>
        <attribute>
            <attribute-name>evento</attribute-name>
            <column-name>EVENTO</column-name>
            <key>primary</key>
        </attribute>
        <attribute>
            <attribute-name>destinatarios</attribute-name>
            <column-name>DESTINATARIOS</column-name>
        </attribute>
        <attribute>
            <attribute-name>subject</attribute-name>
            <column-name>SUBJECT</column-name>
        </attribute>
    </class>
</map>
