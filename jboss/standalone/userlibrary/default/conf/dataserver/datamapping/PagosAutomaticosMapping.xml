<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<map>
    <class>
        <class-name>topsystems.automaticprocess.automaticcredit.valueobjects.CabezalDePago</class-name>
        <entity-name>core.vo_CabezalDePago</entity-name>
        <table-name>SCL_CABEZAL_CREDITOS</table-name>
        <database-name>TOP/CLIENTES</database-name>
        <attribute>
            <attribute-name>tz_lock</attribute-name>
            <column-name>TZ_LOCK</column-name>
        </attribute>
        <attribute>
            <attribute-name>lote</attribute-name>
            <column-name>LOTE</column-name>
            <key>primary</key>
        </attribute>
        <attribute>
            <attribute-name>monto</attribute-name>
            <column-name>MONTO</column-name>
        </attribute>
        <attribute>
            <attribute-name>estado</attribute-name>
            <column-name>ESTADO</column-name>
        </attribute>
        <attribute>
            <attribute-name>causal</attribute-name>
            <column-name>CAUSAL</column-name>
        </attribute>
        <attribute>
            <attribute-name>concepto</attribute-name>
            <column-name>CONCEPTO</column-name>
        </attribute>
        <attribute>
            <attribute-name>totalDebitado</attribute-name>
            <column-name>TOTAL_DEBITADO</column-name>
        </attribute>
        <attribute>
            <attribute-name>fechaAcreditacion</attribute-name>
            <column-name>FECHA_ACREDITACION</column-name>
        </attribute>
        <attribute>
            <attribute-name>fechaProcesado</attribute-name>
            <column-name>FECHA_PROCESADO</column-name>
        </attribute>
        <attribute>
            <attribute-name>usuarioAlta</attribute-name>
            <column-name>USUARIO_ALTA</column-name>
        </attribute>
        <attribute>
            <attribute-name>fechaAlta</attribute-name>
            <column-name>FECHA_ALTA</column-name>
        </attribute>
        <attribute>
            <attribute-name>horaAlta</attribute-name>
            <column-name>HORA_ALTA</column-name>
        </attribute>
        <attribute>
            <attribute-name>usuarioModifica</attribute-name>
            <column-name>USUARIO_MODIFICA</column-name>
        </attribute>
        <attribute>
            <attribute-name>fechaModifica</attribute-name>
            <column-name>FECHA_MODIFICA</column-name>
        </attribute>
        <attribute>
            <attribute-name>horaModifica</attribute-name>
            <column-name>HORA_MODIFICA</column-name>
        </attribute>
        <attribute>
            <attribute-name>canalEntrada</attribute-name>
            <column-name>CANAL_ENTRADA</column-name>
        </attribute>
        <attribute>
            <attribute-name>idConvenio</attribute-name>
            <column-name>ID_CONVENIO</column-name>
        </attribute>
        <attribute>
            <attribute-name>loteReferencia</attribute-name>
            <column-name>LOTE_REFERENCIA</column-name>
        </attribute>
        <attribute>
            <attribute-name>cantidadDetalles</attribute-name>
            <column-name>CANTIDAD_DETALLES</column-name>
        </attribute>
        <attribute>
            <attribute-name>monedaLote</attribute-name>
            <column-name>MONEDA_LOTE</column-name>
        </attribute>
        <attribute>
            <attribute-name>totalComision</attribute-name>
            <column-name>TOTAL_COMISION</column-name>
        </attribute>
        <attribute>
            <attribute-name>procesamientoInmediato</attribute-name>
            <column-name>PROCESAMIENTO_INMEDIATO</column-name>
        </attribute>
        <attribute>
            <attribute-name>fechaFinal</attribute-name>
            <column-name>FECHA_FINAL</column-name>
        </attribute>
    </class>
    <class>
        <class-name>topsystems.automaticprocess.automaticcredit.valueobjects.DetalleDePago</class-name>
        <entity-name>core.vo_DetalleDePago</entity-name>
        <table-name>SCL_DETALLE_CREDITOS</table-name>
        <database-name>TOP/CLIENTES</database-name>
        <attribute>
            <attribute-name>tz_lock</attribute-name>
            <column-name>TZ_LOCK</column-name>
        </attribute>
        <attribute>
            <attribute-name>lote</attribute-name>
            <column-name>LOTE</column-name>
            <key>primary</key>
        </attribute>
        <attribute>
            <attribute-name>ordinal</attribute-name>
            <column-name>ORDINAL</column-name>
            <key>primary</key>
        </attribute>
        <attribute>
            <attribute-name>importe</attribute-name>
            <column-name>IMPORTE</column-name>
        </attribute>
        <attribute>
            <attribute-name>estado</attribute-name>
            <column-name>ESTADO</column-name>
        </attribute>
        <attribute>
            <attribute-name>causal</attribute-name>
            <column-name>CAUSAL</column-name>
        </attribute>
        <attribute>
            <attribute-name>saldoJtsOid</attribute-name>
            <column-name>SALDO_JTS_OID</column-name>
        </attribute>
        <attribute>
            <attribute-name>concepto</attribute-name>
            <column-name>CONCEPTO</column-name>
        </attribute>
        <attribute>
            <attribute-name>beneficiario</attribute-name>
            <column-name>BENEFICIARIO</column-name>
        </attribute>
        <attribute>
            <attribute-name>codigoBanco</attribute-name>
            <column-name>COD_BANCO</column-name>
        </attribute>
        <attribute>
            <attribute-name>cuentaOB</attribute-name>
            <column-name>CUENTAOB</column-name>
        </attribute>
        <attribute>
            <attribute-name>dependencia</attribute-name>
            <column-name>DEPENDENCIA</column-name>
        </attribute>
        <attribute>
            <attribute-name>numeroSerie</attribute-name>
            <column-name>NUMERO_SERIE</column-name>
        </attribute>
        <attribute>
            <attribute-name>numeroLetra</attribute-name>
            <column-name>NUMERO_LETRA</column-name>
        </attribute>
        <attribute>
            <attribute-name>fechaProcesado</attribute-name>
            <column-name>FECHA_PROCESADO</column-name>
        </attribute>
        <attribute>
            <attribute-name>asiento</attribute-name>
            <column-name>ASIENTO</column-name>
        </attribute>
        <attribute>
            <attribute-name>sucursal</attribute-name>
            <column-name>SUCURSAL</column-name>
        </attribute>
        <attribute>
            <attribute-name>medioDePago</attribute-name>
            <column-name>MEDIODEPAGO</column-name>
        </attribute>
        <attribute>
            <attribute-name>referencia</attribute-name>
            <column-name>REFERENCIA</column-name>
        </attribute>
        <attribute>
            <attribute-name>moneda</attribute-name>
            <column-name>MONEDA_DESTINO</column-name>
        </attribute>
    </class>
    <class>
        <class-name>topsystems.automaticprocess.automaticcredit.valueobjects.ConveniosPagos</class-name>
        <entity-name>core.vo_ConveniosPagos</entity-name>
        <table-name>PCT_CONVENIOS_PAGOS</table-name>
        <database-name>TOP/CLIENTES</database-name>
        <attribute>
            <attribute-name>idConvenio</attribute-name>
            <column-name>ID_CONVENIO</column-name>
            <key>primary</key>
        </attribute>
        <attribute>
            <attribute-name>estado</attribute-name>
            <column-name>ESTADO</column-name>
        </attribute>
        <attribute>
            <attribute-name>pagoParcial</attribute-name>
            <column-name>PAGO_PARCIAL</column-name>
        </attribute>
        <attribute>
            <attribute-name>cliente</attribute-name>
            <column-name>CLIENTE</column-name>
        </attribute>
        <attribute>
            <attribute-name>sumariza</attribute-name>
            <column-name>SUMARIZA</column-name>
        </attribute>
        <attribute>
            <attribute-name>sobregiro</attribute-name>
            <column-name>SOBREGIRO</column-name>
        </attribute>
        <attribute>
            <attribute-name>tz_lock</attribute-name>
            <column-name>TZ_LOCK</column-name>
        </attribute>
        <attribute>
            <attribute-name>tipoConvenio</attribute-name>
            <column-name>TIPO_CONVENIO</column-name>
        </attribute>
        <attribute>
            <attribute-name>vencimientoLetras</attribute-name>
            <column-name>VENC_LETRAS</column-name>
        </attribute>
        <attribute>
            <attribute-name>nombre</attribute-name>
            <column-name>NOMBRE</column-name>
        </attribute>
        <attribute>
            <attribute-name>fechaVencSobregiro</attribute-name>
            <column-name>FECVTOSOBREGIRO</column-name>
        </attribute>
    </class>
    <query>
        <class-name>topsystems.automaticprocess.automaticcredit.valueobjects.QueryNumeracionLetras</class-name>
        <query-name>core.letras.vo_Numeracion</query-name>
        <database-name>TOP/CLIENTES</database-name>
        <sentence>
		  SELECT scl_detalle_creditos.lote,
				 scl_detalle_creditos.ordinal,
				 pct_convenios_pagos.id_convenio,
				 PCT_CONVENIOS_SALDOS.PAGO_JTS_OID AS cuenta_deb_pago
			FROM scl_cabezal_creditos
		   INNER JOIN scl_detalle_creditos ON scl_cabezal_creditos.lote =
					  scl_detalle_creditos.lote
		   INNER JOIN pct_convenios_pagos ON scl_cabezal_creditos.id_convenio =
					 pct_convenios_pagos.id_convenio
		   INNER JOIN PCT_CONVENIOS_SALDOS ON pct_convenios_pagos.id_convenio =  PCT_CONVENIOS_SALDOS.ID_CONVENIO
		   AND scl_detalle_creditos.Moneda = PCT_CONVENIOS_SALDOS.MONEDA         
		   WHERE pct_convenios_pagos.Estado = 'A'
			 AND scl_detalle_creditos.mediodepago = 2
			 AND scl_detalle_creditos.estado = 1
			 AND (scl_detalle_creditos.lote = ? or -1 = ?)
			 AND (scl_detalle_creditos.moneda = ? or -1 = ?)
			 AND ((scl_detalle_creditos.numero_letra IS NULL OR
				 scl_detalle_creditos.numero_letra = 0) AND 1 = ? OR
				 (scl_detalle_creditos.Numero_Letra  &gt;= ? AND
				 scl_detalle_creditos.Numero_Letra  &lt;= ? AND
				 scl_detalle_creditos.Numero_SERIE = ?))
			 AND scl_detalle_creditos.Tz_Lock = 0
			 AND scl_cabezal_creditos.Tz_Lock = 0
			 AND pct_convenios_pagos.Tz_Lock = 0
		   ORDER BY scl_detalle_creditos.Dependencia,
					  scl_cabezal_creditos.id_convenio,
			  scl_detalle_creditos.Lote,
					scl_detalle_creditos.beneficiario
		</sentence>
        <attribute>
            <attribute-name>lote</attribute-name>
            <column-name>LOTE</column-name>
            <column-type>long</column-type>
        </attribute>
        <attribute>
            <attribute-name>ordinal</attribute-name>
            <column-name>ORDINAL</column-name>
            <column-type>long</column-type>
        </attribute>
        <attribute>
            <attribute-name>idConvenio</attribute-name>
            <column-name>ID_CONVENIO</column-name>
            <column-type>long</column-type>
        </attribute>
        <attribute>
            <attribute-name>cuentaDebPago</attribute-name>
            <column-name>CUENTA_DEB_PAGO</column-name>
            <column-type>long</column-type>
        </attribute>
    </query>
    <class>
        <class-name>topsystems.automaticprocess.automaticcredit.valueobjects.ConveniosSaldos</class-name>
        <entity-name>core.vo_ConveniosSaldos</entity-name>
        <table-name>PCT_CONVENIOS_SALDOS</table-name>
        <database-name>TOP/CLIENTES</database-name>
        <attribute>
            <attribute-name>idConvenio</attribute-name>
            <column-name>ID_CONVENIO</column-name>
            <key>primary</key>
        </attribute>
        <attribute>
            <attribute-name>moneda</attribute-name>
            <column-name>MONEDA</column-name>
            <key>primary</key>
        </attribute>
        <attribute>
            <attribute-name>jtsOidPago</attribute-name>
            <column-name>PAGO_JTS_OID</column-name>
        </attribute>
        <attribute>
            <attribute-name>jtsOidCosto</attribute-name>
            <column-name>COSTO_JTS_OID</column-name>
        </attribute>
    </class>
    <query>
        <class-name>topsystems.automaticprocess.automaticcredit.valueobjects.CabezalDePago</class-name>
        <query-name>query.QueryCreditosAutomaticos</query-name>
        <database-name>TOP/CLIENTES</database-name>
        <sentence>
                SELECT LOTE 
                FROM SCL_CABEZAL_CREDITOS
                WHERE (LOTE = ? OR -1 = ?)
                AND (PROCESAMIENTO_INMEDIATO = ? OR -1 = ?)
                AND ESTADO = 0
                AND FECHA_ACREDITACION &lt;= (SELECT FECHAPROCESO FROM PARAMETROS)
	</sentence>
        <attribute>
            <attribute-name>lote</attribute-name>
            <column-name>LOTE</column-name>
            <column-type>long</column-type>
        </attribute>
    </query>
</map>
